<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>C&#43;&#43;日志模块:loguru - William</title><meta name="author" content="william">
<meta name="author-link" content="">
<meta name="description" content="loguru 是一款轻量级的　ｃ&#43;&#43; 日志模块，提供了多种格式的日志输出，并且可以使用 fmtlib 的格式化。" /><meta name="keywords" content='c&#43;&#43;, log, loguru, 日志' /><meta itemprop="name" content="C&#43;&#43;日志模块:loguru">
<meta itemprop="description" content="loguru 是一款轻量级的　ｃ&#43;&#43; 日志模块，提供了多种格式的日志输出，并且可以使用 fmtlib 的格式化。"><meta itemprop="datePublished" content="2020-03-23T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-03-23T00:00:00+00:00" />
<meta itemprop="wordCount" content="16589"><meta itemprop="image" content="https://williamlfang.github.io/logo.png" />
<meta itemprop="keywords" content="c&#43;&#43;,log,loguru,日志," /><meta property="og:title" content="C&#43;&#43;日志模块:loguru" />
<meta property="og:description" content="loguru 是一款轻量级的　ｃ&#43;&#43; 日志模块，提供了多种格式的日志输出，并且可以使用 fmtlib 的格式化。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://williamlfang.github.io/archives/2020-03-23-c&#43;&#43;%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97-loguru/" /><meta property="og:image" content="https://williamlfang.github.io/logo.png" /><meta property="article:section" content="archives" />
<meta property="article:published_time" content="2020-03-23T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-03-23T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://williamlfang.github.io/logo.png" /><meta name="twitter:title" content="C&#43;&#43;日志模块:loguru"/>
<meta name="twitter:description" content="loguru 是一款轻量级的　ｃ&#43;&#43; 日志模块，提供了多种格式的日志输出，并且可以使用 fmtlib 的格式化。"/>
<meta name="application-name" content="FixIt">
<meta name="apple-mobile-web-app-title" content="FixIt"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://williamlfang.github.io/archives/2020-03-23-c&#43;&#43;%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97-loguru/" /><link rel="prev" href="https://williamlfang.github.io/archives/spec--no-such-file-or-directory/" /><link rel="next" href="https://williamlfang.github.io/archives/2020-03-30-warning--void-memset_void-int-size_t-clearing-an-object-of-non-trivial-type/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "C++日志模块:loguru",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https:\/\/williamlfang.github.io\/archives\/2020-03-23-c\u002b\u002b%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97-loguru\/"
    },"genre": "posts","keywords": "c\u002b\u002b, log, loguru, 日志","wordcount":  16589 ,
    "url": "https:\/\/williamlfang.github.io\/archives\/2020-03-23-c\u002b\u002b%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97-loguru\/","datePublished": "2020-03-23T00:00:00+00:00","dateModified": "2020-03-23T00:00:00+00:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "william"
      },"description": ""
  }
  </script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="wide"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="William"><img loading="lazy" src="/images/wuya-logo.png" alt="William" data-title="William" class="logo" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/><span class="header-title-text">William</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/posts/"
                
                
              ><i class="fa-regular fa-newspaper fa-fw fa-sm" aria-hidden="true"></i> 文章</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/archives/"
                
                
              ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 归档</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              ><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/friends/"
                title="友情链接"
                
              ><i class="fa-solid fa-users-viewfinder fa-fw fa-sm fa-fw fa-sm" aria-hidden="true"></i> 友链</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/about/"
                
                
              ><i class="fa-solid fa-signature fa-fw fa-sm" aria-hidden="true"></i> 关于</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/calendar/"
                
                
              ><i class="fa-regular fa-calendar fa-fw fa-sm fa-fw fa-sm" aria-hidden="true"></i> 月历</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="搜索文章标题或内容……" id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="William"><img loading="lazy" src="/images/wuya-logo.png" alt="/images/wuya-logo.png" data-title="/images/wuya-logo.png" class="logo" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/><span class="header-title-text">William</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="搜索文章标题或内容……" id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              取消
            </a>
          </li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/posts/"
                  
                  
                ><i class="fa-regular fa-newspaper fa-fw fa-sm" aria-hidden="true"></i> 文章</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/archives/"
                  
                  
                ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 归档</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                ><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/friends/"
                  title="友情链接"
                  
                ><i class="fa-solid fa-users-viewfinder fa-fw fa-sm fa-fw fa-sm" aria-hidden="true"></i> 友链</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/about/"
                  
                  
                ><i class="fa-solid fa-signature fa-fw fa-sm" aria-hidden="true"></i> 关于</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/calendar/"
                  
                  
                ><i class="fa-regular fa-calendar fa-fw fa-sm fa-fw fa-sm" aria-hidden="true"></i> 月历</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><main class="container"><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="合集"></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>C&#43;&#43;日志模块:loguru</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><img loading="lazy" src="/images/william.jpg" alt="william" data-title="william" class="avatar" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/>&nbsp;william</span></span><span class="post-included-in">&nbsp;收录于 <a href="/categories/programming/" class="post-category" title="分类 - Programming"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> Programming</a></span></div><div class="post-meta-line"><span title="发布于 2020-03-23 00:00:00"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden="true"></i><time datetime="2020-03-23">2020-03-23</time></span>&nbsp;<span title="16589 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 16600 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 34 分钟</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ol>
    <li><a href="#安装">安装</a>
      <ol>
        <li><a href="#安装-fmtlib">安装 <code>fmtlib</code></a></li>
        <li><a href="#安装-loguru">安装 <code>loguru</code></a></li>
      </ol>
    </li>
    <li><a href="#定制-loguru">定制 <code>loguru</code></a>
      <ol>
        <li><a href="#修改日志头文件">修改日志头文件</a></li>
        <li><a href="#修改-micro-精确的时间戳">修改 micro 精确的时间戳</a></li>
        <li><a href="#打印-micro-时间戳">打印 micro 时间戳</a></li>
        <li><a href="#修改函数运行时间计数器">修改函数运行时间计数器</a></li>
        <li><a href="#增加-fmtlib-支持">增加 fmtlib 支持</a></li>
      </ol>
    </li>
    <li><a href="#编译静态库">编译静态库</a></li>
    <li><a href="#我的配置方案">我的配置方案</a>
      <ol>
        <li><a href="#loguruhpp"><code>loguru.hpp</code></a></li>
        <li><a href="#logurucpp"><code>loguru.cpp</code></a></li>
        <li><a href="#cmakeliststxt"><code>CMakeLists.txt</code></a></li>
        <li><a href="#demo">demo</a>
          <ol>
            <li><a href="#maincpp"><code>main.cpp</code></a></li>
            <li><a href="#cmakeliststxt-1"><code>CMakeLists.txt</code></a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav></div>
      </div><div class="content" id="content"><div class="details admonition warning open">
      <div class="details-summary admonition-title">
        <i class="icon fa-solid fa-exclamation-triangle fa-fw" aria-hidden="true"></i>警告<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden="true"></i>
      </div>
      <div class="details-content">
        <div class="admonition-content">本文最后更新于 2020-03-23，文中内容可能已过时。</div>
      </div>
    </div><p>loguru 是一款轻量级的　ｃ++ 日志模块，提供了多种格式的日志输出，并且可以使用 fmtlib 的格式化。</p>
<p>总结：</p>
<ul>
<li>
<p>如果使用 <code>fmtlib</code>，则需要在编译静态库的时候，设置 <code>include</code> 之前添加</p>
<div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#define LOGURU_USE_FMTLIB 1
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;loguru.hpp&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>编译可执行的时候，需要确保先链接 <code>loguru</code>，然后在链接 <code>fmt</code></p>
<div class="highlight" id="id-2"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cmake" data-lang="cmake"><span class="line"><span class="cl"><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">ctpmd</span> <span class="s">PRIVATE</span>
</span></span><span class="line"><span class="cl">    <span class="s">thostmduserapi_se</span>
</span></span><span class="line"><span class="cl">    <span class="c"># NanoLog
</span></span></span><span class="line"><span class="cl"><span class="c"></span>    <span class="c"># fmt
</span></span></span><span class="line"><span class="cl"><span class="c"></span>    <span class="s">loguru</span>
</span></span><span class="line"><span class="cl">    <span class="s">fmt</span>  <span class="c">## 确定 fmt 是在后面
</span></span></span><span class="line"><span class="cl"><span class="c"></span>    <span class="s">yaml-cpp</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><figure><a class="lightgallery" href="./loguru.png?size=large" data-thumbnail="./loguru.png?size=small" data-sub-html="<h2>loguru</h2><p>loguru</p>"><img loading="lazy" src="./loguru.png" alt="loguru" srcset="./loguru.png?size=small, ./loguru.png?size=medium 1.5x, ./loguru.png?size=large 2x" data-title="loguru" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a><figcaption class="image-caption">loguru</figcaption>
  </figure></p>
<h1 id="安装" class="heading-element">
  <a href="#%e5%ae%89%e8%a3%85" class="heading-mark"></a>安装</h1><p>由于我们后面需要使用 <code>fmtlib</code> 模块用于更好的输出日志，所以需要先进行安装。</p>
<h2 id="安装-fmtlib" class="heading-element">
  <a href="#%e5%ae%89%e8%a3%85-fmtlib" class="heading-mark"></a>安装 <code>fmtlib</code></h2><div class="highlight" id="id-3"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> ~/Downloads
</span></span><span class="line"><span class="cl">git clone git@github.com:fmtlib/fmt.git
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">mkdir build
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> build
</span></span><span class="line"><span class="cl">sudo cmake ..
</span></span><span class="line"><span class="cl">sudo make
</span></span><span class="line"><span class="cl">sudo install</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="安装-loguru" class="heading-element">
  <a href="#%e5%ae%89%e8%a3%85-loguru" class="heading-mark"></a>安装 <code>loguru</code></h2><p>首先，我们把这个项目拷贝到本地，然后再通过修改相应的模块。</p>
<div class="highlight" id="id-4"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git clone git@github.com:emilk/loguru.git</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="定制-loguru" class="heading-element">
  <a href="#%e5%ae%9a%e5%88%b6-loguru" class="heading-mark"></a>定制 <code>loguru</code></h1><p>由于这个提供了源代码，我们可以根据公司的日志记录需要，进行定制化配置。</p>
<h2 id="修改日志头文件" class="heading-element">
  <a href="#%e4%bf%ae%e6%94%b9%e6%97%a5%e5%bf%97%e5%a4%b4%e6%96%87%e4%bb%b6" class="heading-mark"></a>修改日志头文件</h2><div class="highlight" id="id-5"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// vim loguru.cpp
</span></span></span><span class="line"><span class="cl"><span class="c1">// 1. 修改日志表头的显示
</span></span></span><span class="line"><span class="cl"><span class="c1">// #define LOGURU_PREAMBLE_WIDTH (53 + LOGURU_THREADNAME_WIDTH + LOGURU_FILENAME_WIDTH)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define LOGURU_PREAMBLE_WIDTH (57 + LOGURU_THREADNAME_WIDTH + LOGURU_FILENAME_WIDTH)</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="修改-micro-精确的时间戳" class="heading-element">
  <a href="#%e4%bf%ae%e6%94%b9-micro-%e7%b2%be%e7%a1%ae%e7%9a%84%e6%97%b6%e9%97%b4%e6%88%b3" class="heading-mark"></a>修改 micro 精确的时间戳</h2><div class="highlight" id="id-6"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// vim loguru.cpp
</span></span></span><span class="line"><span class="cl"><span class="c1">//## 2. 增加 micro 时间戳
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">write_date_time</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">buff</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">buff_size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">now</span> <span class="o">=</span> <span class="n">system_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">long</span> <span class="kt">long</span> <span class="n">ms_since_epoch</span> <span class="o">=</span> <span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">microseconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">now</span><span class="p">.</span><span class="n">time_since_epoch</span><span class="p">()).</span><span class="n">count</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">time_t</span> <span class="n">sec_since_epoch</span> <span class="o">=</span> <span class="n">time_t</span><span class="p">(</span><span class="n">ms_since_epoch</span> <span class="o">/</span> <span class="mi">1000000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">tm</span> <span class="n">time_info</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">localtime_r</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sec_since_epoch</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">time_info</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">snprintf</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="n">buff_size</span><span class="p">,</span> <span class="s">&#34;%04d%02d%02d_%02d%02d%02d.%06lld&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="mi">1900</span> <span class="o">+</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_year</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_mon</span><span class="p">,</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_mday</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">time_info</span><span class="p">.</span><span class="n">tm_hour</span><span class="p">,</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_min</span><span class="p">,</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_sec</span><span class="p">,</span> <span class="n">ms_since_epoch</span> <span class="o">%</span> <span class="mi">1000000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="打印-micro-时间戳" class="heading-element">
  <a href="#%e6%89%93%e5%8d%b0-micro-%e6%97%b6%e9%97%b4%e6%88%b3" class="heading-mark"></a>打印 micro 时间戳</h2><div class="highlight" id="id-7"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// vim loguru.cpp
</span></span></span><span class="line"><span class="cl"><span class="c1">// 打印 micro 时间戳
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">static</span> <span class="kt">void</span> <span class="nf">print_preamble</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">out_buff</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">out_buff_size</span><span class="p">,</span> <span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">out_buff_size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">out_buff</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">g_preamble</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">long</span> <span class="kt">long</span> <span class="n">ms_since_epoch</span> <span class="o">=</span> <span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">microseconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">system_clock</span><span class="o">::</span><span class="n">now</span><span class="p">().</span><span class="n">time_since_epoch</span><span class="p">()).</span><span class="n">count</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">time_t</span> <span class="n">sec_since_epoch</span> <span class="o">=</span> <span class="n">time_t</span><span class="p">(</span><span class="n">ms_since_epoch</span> <span class="o">/</span> <span class="mi">1000000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">tm</span> <span class="n">time_info</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">localtime_r</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sec_since_epoch</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">time_info</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">uptime_ms</span> <span class="o">=</span> <span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">milliseconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">steady_clock</span><span class="o">::</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">s_start_time</span><span class="p">).</span><span class="n">count</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">uptime_sec</span> <span class="o">=</span> <span class="n">uptime_ms</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">thread_name</span><span class="p">[</span><span class="n">LOGURU_THREADNAME_WIDTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="n">get_thread_name</span><span class="p">(</span><span class="n">thread_name</span><span class="p">,</span> <span class="n">LOGURU_THREADNAME_WIDTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">s_strip_file_path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">file</span> <span class="o">=</span> <span class="n">filename</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">level_buff</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">custom_level_name</span> <span class="o">=</span> <span class="n">get_verbosity_name</span><span class="p">(</span><span class="n">verbosity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">custom_level_name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">snprintf</span><span class="p">(</span><span class="n">level_buff</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">level_buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;%s&#34;</span><span class="p">,</span> <span class="n">custom_level_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">snprintf</span><span class="p">(</span><span class="n">level_buff</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">level_buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;% 4d&#34;</span><span class="p">,</span> <span class="n">verbosity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">long</span> <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_date</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;%04d-%02d-%02d &#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                         <span class="mi">1900</span> <span class="o">+</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_year</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_mon</span><span class="p">,</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_mday</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_time</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;%02d:%02d:%02d.%06lld &#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                       <span class="n">time_info</span><span class="p">.</span><span class="n">tm_hour</span><span class="p">,</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_min</span><span class="p">,</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_sec</span><span class="p">,</span> <span class="n">ms_since_epoch</span> <span class="o">%</span> <span class="mi">1000000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_uptime</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//pos += snprintf(out_buff + pos, out_buff_size - pos, &#34;(%8.3fs) &#34;,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//               uptime_sec);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;(%9.3fs) &#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                       <span class="n">uptime_sec</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_thread</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;[%-*s]&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                       <span class="n">LOGURU_THREADNAME_WIDTH</span><span class="p">,</span> <span class="n">thread_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_file</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span> <span class="n">shortened_filename</span><span class="p">[</span><span class="n">LOGURU_FILENAME_WIDTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="n">snprintf</span><span class="p">(</span><span class="n">shortened_filename</span><span class="p">,</span> <span class="n">LOGURU_FILENAME_WIDTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;%s&#34;</span><span class="p">,</span> <span class="n">file</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;%*s:%-5u &#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                       <span class="n">LOGURU_FILENAME_WIDTH</span><span class="p">,</span> <span class="n">shortened_filename</span><span class="p">,</span> <span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_verbose</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;%4s&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                       <span class="n">level_buff</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_pipe</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;| &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="修改函数运行时间计数器" class="heading-element">
  <a href="#%e4%bf%ae%e6%94%b9%e5%87%bd%e6%95%b0%e8%bf%90%e8%a1%8c%e6%97%b6%e9%97%b4%e8%ae%a1%e6%95%b0%e5%99%a8" class="heading-mark"></a>修改函数运行时间计数器</h2><div class="highlight" id="id-8"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// vim loguru.cpp
</span></span></span><span class="line"><span class="cl"><span class="c1">// 3.修改函数运行时间
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#if LOGURU_VERBOSE_SCOPE_ENDINGS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="k">auto</span> <span class="n">duration_sec</span> <span class="o">=</span> <span class="p">(</span><span class="n">now_ns</span><span class="p">()</span> <span class="o">-</span> <span class="n">_start_time_ns</span><span class="p">)</span> <span class="o">/</span> <span class="mf">1e9</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_USE_FMTLIB
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="c1">//auto buff = textprintf(&#34;{:.{}f} s: {:s}&#34;, duration_sec, LOGURU_SCOPE_TIME_PRECISION, _name);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">auto</span> <span class="n">buff</span> <span class="o">=</span> <span class="n">textprintf</span><span class="p">(</span><span class="s">&#34;[{:.{}f} s]: {:s}&#34;</span><span class="p">,</span> <span class="n">duration_sec</span><span class="p">,</span> <span class="n">LOGURU_SCOPE_TIME_PRECISION</span><span class="p">,</span> <span class="n">_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="c1">//auto buff = textprintf(&#34;%.*f s: %s&#34;, LOGURU_SCOPE_TIME_PRECISION, duration_sec, _name);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">auto</span> <span class="n">buff</span> <span class="o">=</span> <span class="n">textprintf</span><span class="p">(</span><span class="s">&#34;[%.*f s: %s]&#34;</span><span class="p">,</span> <span class="n">LOGURU_SCOPE_TIME_PRECISION</span><span class="p">,</span> <span class="n">duration_sec</span><span class="p">,</span> <span class="n">_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="增加-fmtlib-支持" class="heading-element">
  <a href="#%e5%a2%9e%e5%8a%a0-fmtlib-%e6%94%af%e6%8c%81" class="heading-mark"></a>增加 fmtlib 支持</h2><div class="highlight" id="id-9"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-hpp" data-lang="hpp"><span class="line"><span class="cl"><span class="c1">// vim loguru.hpp
</span></span></span><span class="line"><span class="cl"><span class="c1">// 增加 fmt 支持
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_USE_FMTLIB 1
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;loguru.hpp&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_SCOPE_TIME_PRECISION
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Resolution of scope timers. 3=ms, 6=us, 9=ns
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// #define LOGURU_SCOPE_TIME_PRECISION 3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define LOGURU_SCOPE_TIME_PRECISION 6
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_FILENAME_WIDTH
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Width of the column containing the file name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// #define LOGURU_FILENAME_WIDTH 23
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="cp">#define LOGURU_FILENAME_WIDTH 18
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_THREADNAME_WIDTH
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Width of the column containing the thread name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// #define LOGURU_THREADNAME_WIDTH 16
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="cp">#define LOGURU_THREADNAME_WIDTH 12
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="编译静态库" class="heading-element">
  <a href="#%e7%bc%96%e8%af%91%e9%9d%99%e6%80%81%e5%ba%93" class="heading-mark"></a>编译静态库</h1><div class="highlight" id="id-10"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cmake" data-lang="cmake"><span class="line"><span class="cl"><span class="c">## CMakeLists.txt
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nb">project</span><span class="p">(</span><span class="s">loguru</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">3.10</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_FLAGS</span> <span class="s2">&#34;${CMAKE_CXX_FLAGS} -o3&#34;</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">set</span><span class="p">(</span><span class="s">LIBRARY_OUTPUT_PATH</span> <span class="o">${</span><span class="nv">CMAKE_SOURCE_DIR</span><span class="o">}</span><span class="s">/</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">add_library</span><span class="p">(</span><span class="s">loguru</span> <span class="s">STATIC</span> <span class="s">loguru.cpp</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">loguru</span> <span class="s">fmt</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="我的配置方案" class="heading-element">
  <a href="#%e6%88%91%e7%9a%84%e9%85%8d%e7%bd%ae%e6%96%b9%e6%a1%88" class="heading-mark"></a>我的配置方案</h1><h2 id="loguruhpp" class="heading-element">
  <a href="#loguruhpp" class="heading-mark"></a><code>loguru.hpp</code></h2><div class="highlight" id="id-11"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">   1
</span><span class="lnt">   2
</span><span class="lnt">   3
</span><span class="lnt">   4
</span><span class="lnt">   5
</span><span class="lnt">   6
</span><span class="lnt">   7
</span><span class="lnt">   8
</span><span class="lnt">   9
</span><span class="lnt">  10
</span><span class="lnt">  11
</span><span class="lnt">  12
</span><span class="lnt">  13
</span><span class="lnt">  14
</span><span class="lnt">  15
</span><span class="lnt">  16
</span><span class="lnt">  17
</span><span class="lnt">  18
</span><span class="lnt">  19
</span><span class="lnt">  20
</span><span class="lnt">  21
</span><span class="lnt">  22
</span><span class="lnt">  23
</span><span class="lnt">  24
</span><span class="lnt">  25
</span><span class="lnt">  26
</span><span class="lnt">  27
</span><span class="lnt">  28
</span><span class="lnt">  29
</span><span class="lnt">  30
</span><span class="lnt">  31
</span><span class="lnt">  32
</span><span class="lnt">  33
</span><span class="lnt">  34
</span><span class="lnt">  35
</span><span class="lnt">  36
</span><span class="lnt">  37
</span><span class="lnt">  38
</span><span class="lnt">  39
</span><span class="lnt">  40
</span><span class="lnt">  41
</span><span class="lnt">  42
</span><span class="lnt">  43
</span><span class="lnt">  44
</span><span class="lnt">  45
</span><span class="lnt">  46
</span><span class="lnt">  47
</span><span class="lnt">  48
</span><span class="lnt">  49
</span><span class="lnt">  50
</span><span class="lnt">  51
</span><span class="lnt">  52
</span><span class="lnt">  53
</span><span class="lnt">  54
</span><span class="lnt">  55
</span><span class="lnt">  56
</span><span class="lnt">  57
</span><span class="lnt">  58
</span><span class="lnt">  59
</span><span class="lnt">  60
</span><span class="lnt">  61
</span><span class="lnt">  62
</span><span class="lnt">  63
</span><span class="lnt">  64
</span><span class="lnt">  65
</span><span class="lnt">  66
</span><span class="lnt">  67
</span><span class="lnt">  68
</span><span class="lnt">  69
</span><span class="lnt">  70
</span><span class="lnt">  71
</span><span class="lnt">  72
</span><span class="lnt">  73
</span><span class="lnt">  74
</span><span class="lnt">  75
</span><span class="lnt">  76
</span><span class="lnt">  77
</span><span class="lnt">  78
</span><span class="lnt">  79
</span><span class="lnt">  80
</span><span class="lnt">  81
</span><span class="lnt">  82
</span><span class="lnt">  83
</span><span class="lnt">  84
</span><span class="lnt">  85
</span><span class="lnt">  86
</span><span class="lnt">  87
</span><span class="lnt">  88
</span><span class="lnt">  89
</span><span class="lnt">  90
</span><span class="lnt">  91
</span><span class="lnt">  92
</span><span class="lnt">  93
</span><span class="lnt">  94
</span><span class="lnt">  95
</span><span class="lnt">  96
</span><span class="lnt">  97
</span><span class="lnt">  98
</span><span class="lnt">  99
</span><span class="lnt"> 100
</span><span class="lnt"> 101
</span><span class="lnt"> 102
</span><span class="lnt"> 103
</span><span class="lnt"> 104
</span><span class="lnt"> 105
</span><span class="lnt"> 106
</span><span class="lnt"> 107
</span><span class="lnt"> 108
</span><span class="lnt"> 109
</span><span class="lnt"> 110
</span><span class="lnt"> 111
</span><span class="lnt"> 112
</span><span class="lnt"> 113
</span><span class="lnt"> 114
</span><span class="lnt"> 115
</span><span class="lnt"> 116
</span><span class="lnt"> 117
</span><span class="lnt"> 118
</span><span class="lnt"> 119
</span><span class="lnt"> 120
</span><span class="lnt"> 121
</span><span class="lnt"> 122
</span><span class="lnt"> 123
</span><span class="lnt"> 124
</span><span class="lnt"> 125
</span><span class="lnt"> 126
</span><span class="lnt"> 127
</span><span class="lnt"> 128
</span><span class="lnt"> 129
</span><span class="lnt"> 130
</span><span class="lnt"> 131
</span><span class="lnt"> 132
</span><span class="lnt"> 133
</span><span class="lnt"> 134
</span><span class="lnt"> 135
</span><span class="lnt"> 136
</span><span class="lnt"> 137
</span><span class="lnt"> 138
</span><span class="lnt"> 139
</span><span class="lnt"> 140
</span><span class="lnt"> 141
</span><span class="lnt"> 142
</span><span class="lnt"> 143
</span><span class="lnt"> 144
</span><span class="lnt"> 145
</span><span class="lnt"> 146
</span><span class="lnt"> 147
</span><span class="lnt"> 148
</span><span class="lnt"> 149
</span><span class="lnt"> 150
</span><span class="lnt"> 151
</span><span class="lnt"> 152
</span><span class="lnt"> 153
</span><span class="lnt"> 154
</span><span class="lnt"> 155
</span><span class="lnt"> 156
</span><span class="lnt"> 157
</span><span class="lnt"> 158
</span><span class="lnt"> 159
</span><span class="lnt"> 160
</span><span class="lnt"> 161
</span><span class="lnt"> 162
</span><span class="lnt"> 163
</span><span class="lnt"> 164
</span><span class="lnt"> 165
</span><span class="lnt"> 166
</span><span class="lnt"> 167
</span><span class="lnt"> 168
</span><span class="lnt"> 169
</span><span class="lnt"> 170
</span><span class="lnt"> 171
</span><span class="lnt"> 172
</span><span class="lnt"> 173
</span><span class="lnt"> 174
</span><span class="lnt"> 175
</span><span class="lnt"> 176
</span><span class="lnt"> 177
</span><span class="lnt"> 178
</span><span class="lnt"> 179
</span><span class="lnt"> 180
</span><span class="lnt"> 181
</span><span class="lnt"> 182
</span><span class="lnt"> 183
</span><span class="lnt"> 184
</span><span class="lnt"> 185
</span><span class="lnt"> 186
</span><span class="lnt"> 187
</span><span class="lnt"> 188
</span><span class="lnt"> 189
</span><span class="lnt"> 190
</span><span class="lnt"> 191
</span><span class="lnt"> 192
</span><span class="lnt"> 193
</span><span class="lnt"> 194
</span><span class="lnt"> 195
</span><span class="lnt"> 196
</span><span class="lnt"> 197
</span><span class="lnt"> 198
</span><span class="lnt"> 199
</span><span class="lnt"> 200
</span><span class="lnt"> 201
</span><span class="lnt"> 202
</span><span class="lnt"> 203
</span><span class="lnt"> 204
</span><span class="lnt"> 205
</span><span class="lnt"> 206
</span><span class="lnt"> 207
</span><span class="lnt"> 208
</span><span class="lnt"> 209
</span><span class="lnt"> 210
</span><span class="lnt"> 211
</span><span class="lnt"> 212
</span><span class="lnt"> 213
</span><span class="lnt"> 214
</span><span class="lnt"> 215
</span><span class="lnt"> 216
</span><span class="lnt"> 217
</span><span class="lnt"> 218
</span><span class="lnt"> 219
</span><span class="lnt"> 220
</span><span class="lnt"> 221
</span><span class="lnt"> 222
</span><span class="lnt"> 223
</span><span class="lnt"> 224
</span><span class="lnt"> 225
</span><span class="lnt"> 226
</span><span class="lnt"> 227
</span><span class="lnt"> 228
</span><span class="lnt"> 229
</span><span class="lnt"> 230
</span><span class="lnt"> 231
</span><span class="lnt"> 232
</span><span class="lnt"> 233
</span><span class="lnt"> 234
</span><span class="lnt"> 235
</span><span class="lnt"> 236
</span><span class="lnt"> 237
</span><span class="lnt"> 238
</span><span class="lnt"> 239
</span><span class="lnt"> 240
</span><span class="lnt"> 241
</span><span class="lnt"> 242
</span><span class="lnt"> 243
</span><span class="lnt"> 244
</span><span class="lnt"> 245
</span><span class="lnt"> 246
</span><span class="lnt"> 247
</span><span class="lnt"> 248
</span><span class="lnt"> 249
</span><span class="lnt"> 250
</span><span class="lnt"> 251
</span><span class="lnt"> 252
</span><span class="lnt"> 253
</span><span class="lnt"> 254
</span><span class="lnt"> 255
</span><span class="lnt"> 256
</span><span class="lnt"> 257
</span><span class="lnt"> 258
</span><span class="lnt"> 259
</span><span class="lnt"> 260
</span><span class="lnt"> 261
</span><span class="lnt"> 262
</span><span class="lnt"> 263
</span><span class="lnt"> 264
</span><span class="lnt"> 265
</span><span class="lnt"> 266
</span><span class="lnt"> 267
</span><span class="lnt"> 268
</span><span class="lnt"> 269
</span><span class="lnt"> 270
</span><span class="lnt"> 271
</span><span class="lnt"> 272
</span><span class="lnt"> 273
</span><span class="lnt"> 274
</span><span class="lnt"> 275
</span><span class="lnt"> 276
</span><span class="lnt"> 277
</span><span class="lnt"> 278
</span><span class="lnt"> 279
</span><span class="lnt"> 280
</span><span class="lnt"> 281
</span><span class="lnt"> 282
</span><span class="lnt"> 283
</span><span class="lnt"> 284
</span><span class="lnt"> 285
</span><span class="lnt"> 286
</span><span class="lnt"> 287
</span><span class="lnt"> 288
</span><span class="lnt"> 289
</span><span class="lnt"> 290
</span><span class="lnt"> 291
</span><span class="lnt"> 292
</span><span class="lnt"> 293
</span><span class="lnt"> 294
</span><span class="lnt"> 295
</span><span class="lnt"> 296
</span><span class="lnt"> 297
</span><span class="lnt"> 298
</span><span class="lnt"> 299
</span><span class="lnt"> 300
</span><span class="lnt"> 301
</span><span class="lnt"> 302
</span><span class="lnt"> 303
</span><span class="lnt"> 304
</span><span class="lnt"> 305
</span><span class="lnt"> 306
</span><span class="lnt"> 307
</span><span class="lnt"> 308
</span><span class="lnt"> 309
</span><span class="lnt"> 310
</span><span class="lnt"> 311
</span><span class="lnt"> 312
</span><span class="lnt"> 313
</span><span class="lnt"> 314
</span><span class="lnt"> 315
</span><span class="lnt"> 316
</span><span class="lnt"> 317
</span><span class="lnt"> 318
</span><span class="lnt"> 319
</span><span class="lnt"> 320
</span><span class="lnt"> 321
</span><span class="lnt"> 322
</span><span class="lnt"> 323
</span><span class="lnt"> 324
</span><span class="lnt"> 325
</span><span class="lnt"> 326
</span><span class="lnt"> 327
</span><span class="lnt"> 328
</span><span class="lnt"> 329
</span><span class="lnt"> 330
</span><span class="lnt"> 331
</span><span class="lnt"> 332
</span><span class="lnt"> 333
</span><span class="lnt"> 334
</span><span class="lnt"> 335
</span><span class="lnt"> 336
</span><span class="lnt"> 337
</span><span class="lnt"> 338
</span><span class="lnt"> 339
</span><span class="lnt"> 340
</span><span class="lnt"> 341
</span><span class="lnt"> 342
</span><span class="lnt"> 343
</span><span class="lnt"> 344
</span><span class="lnt"> 345
</span><span class="lnt"> 346
</span><span class="lnt"> 347
</span><span class="lnt"> 348
</span><span class="lnt"> 349
</span><span class="lnt"> 350
</span><span class="lnt"> 351
</span><span class="lnt"> 352
</span><span class="lnt"> 353
</span><span class="lnt"> 354
</span><span class="lnt"> 355
</span><span class="lnt"> 356
</span><span class="lnt"> 357
</span><span class="lnt"> 358
</span><span class="lnt"> 359
</span><span class="lnt"> 360
</span><span class="lnt"> 361
</span><span class="lnt"> 362
</span><span class="lnt"> 363
</span><span class="lnt"> 364
</span><span class="lnt"> 365
</span><span class="lnt"> 366
</span><span class="lnt"> 367
</span><span class="lnt"> 368
</span><span class="lnt"> 369
</span><span class="lnt"> 370
</span><span class="lnt"> 371
</span><span class="lnt"> 372
</span><span class="lnt"> 373
</span><span class="lnt"> 374
</span><span class="lnt"> 375
</span><span class="lnt"> 376
</span><span class="lnt"> 377
</span><span class="lnt"> 378
</span><span class="lnt"> 379
</span><span class="lnt"> 380
</span><span class="lnt"> 381
</span><span class="lnt"> 382
</span><span class="lnt"> 383
</span><span class="lnt"> 384
</span><span class="lnt"> 385
</span><span class="lnt"> 386
</span><span class="lnt"> 387
</span><span class="lnt"> 388
</span><span class="lnt"> 389
</span><span class="lnt"> 390
</span><span class="lnt"> 391
</span><span class="lnt"> 392
</span><span class="lnt"> 393
</span><span class="lnt"> 394
</span><span class="lnt"> 395
</span><span class="lnt"> 396
</span><span class="lnt"> 397
</span><span class="lnt"> 398
</span><span class="lnt"> 399
</span><span class="lnt"> 400
</span><span class="lnt"> 401
</span><span class="lnt"> 402
</span><span class="lnt"> 403
</span><span class="lnt"> 404
</span><span class="lnt"> 405
</span><span class="lnt"> 406
</span><span class="lnt"> 407
</span><span class="lnt"> 408
</span><span class="lnt"> 409
</span><span class="lnt"> 410
</span><span class="lnt"> 411
</span><span class="lnt"> 412
</span><span class="lnt"> 413
</span><span class="lnt"> 414
</span><span class="lnt"> 415
</span><span class="lnt"> 416
</span><span class="lnt"> 417
</span><span class="lnt"> 418
</span><span class="lnt"> 419
</span><span class="lnt"> 420
</span><span class="lnt"> 421
</span><span class="lnt"> 422
</span><span class="lnt"> 423
</span><span class="lnt"> 424
</span><span class="lnt"> 425
</span><span class="lnt"> 426
</span><span class="lnt"> 427
</span><span class="lnt"> 428
</span><span class="lnt"> 429
</span><span class="lnt"> 430
</span><span class="lnt"> 431
</span><span class="lnt"> 432
</span><span class="lnt"> 433
</span><span class="lnt"> 434
</span><span class="lnt"> 435
</span><span class="lnt"> 436
</span><span class="lnt"> 437
</span><span class="lnt"> 438
</span><span class="lnt"> 439
</span><span class="lnt"> 440
</span><span class="lnt"> 441
</span><span class="lnt"> 442
</span><span class="lnt"> 443
</span><span class="lnt"> 444
</span><span class="lnt"> 445
</span><span class="lnt"> 446
</span><span class="lnt"> 447
</span><span class="lnt"> 448
</span><span class="lnt"> 449
</span><span class="lnt"> 450
</span><span class="lnt"> 451
</span><span class="lnt"> 452
</span><span class="lnt"> 453
</span><span class="lnt"> 454
</span><span class="lnt"> 455
</span><span class="lnt"> 456
</span><span class="lnt"> 457
</span><span class="lnt"> 458
</span><span class="lnt"> 459
</span><span class="lnt"> 460
</span><span class="lnt"> 461
</span><span class="lnt"> 462
</span><span class="lnt"> 463
</span><span class="lnt"> 464
</span><span class="lnt"> 465
</span><span class="lnt"> 466
</span><span class="lnt"> 467
</span><span class="lnt"> 468
</span><span class="lnt"> 469
</span><span class="lnt"> 470
</span><span class="lnt"> 471
</span><span class="lnt"> 472
</span><span class="lnt"> 473
</span><span class="lnt"> 474
</span><span class="lnt"> 475
</span><span class="lnt"> 476
</span><span class="lnt"> 477
</span><span class="lnt"> 478
</span><span class="lnt"> 479
</span><span class="lnt"> 480
</span><span class="lnt"> 481
</span><span class="lnt"> 482
</span><span class="lnt"> 483
</span><span class="lnt"> 484
</span><span class="lnt"> 485
</span><span class="lnt"> 486
</span><span class="lnt"> 487
</span><span class="lnt"> 488
</span><span class="lnt"> 489
</span><span class="lnt"> 490
</span><span class="lnt"> 491
</span><span class="lnt"> 492
</span><span class="lnt"> 493
</span><span class="lnt"> 494
</span><span class="lnt"> 495
</span><span class="lnt"> 496
</span><span class="lnt"> 497
</span><span class="lnt"> 498
</span><span class="lnt"> 499
</span><span class="lnt"> 500
</span><span class="lnt"> 501
</span><span class="lnt"> 502
</span><span class="lnt"> 503
</span><span class="lnt"> 504
</span><span class="lnt"> 505
</span><span class="lnt"> 506
</span><span class="lnt"> 507
</span><span class="lnt"> 508
</span><span class="lnt"> 509
</span><span class="lnt"> 510
</span><span class="lnt"> 511
</span><span class="lnt"> 512
</span><span class="lnt"> 513
</span><span class="lnt"> 514
</span><span class="lnt"> 515
</span><span class="lnt"> 516
</span><span class="lnt"> 517
</span><span class="lnt"> 518
</span><span class="lnt"> 519
</span><span class="lnt"> 520
</span><span class="lnt"> 521
</span><span class="lnt"> 522
</span><span class="lnt"> 523
</span><span class="lnt"> 524
</span><span class="lnt"> 525
</span><span class="lnt"> 526
</span><span class="lnt"> 527
</span><span class="lnt"> 528
</span><span class="lnt"> 529
</span><span class="lnt"> 530
</span><span class="lnt"> 531
</span><span class="lnt"> 532
</span><span class="lnt"> 533
</span><span class="lnt"> 534
</span><span class="lnt"> 535
</span><span class="lnt"> 536
</span><span class="lnt"> 537
</span><span class="lnt"> 538
</span><span class="lnt"> 539
</span><span class="lnt"> 540
</span><span class="lnt"> 541
</span><span class="lnt"> 542
</span><span class="lnt"> 543
</span><span class="lnt"> 544
</span><span class="lnt"> 545
</span><span class="lnt"> 546
</span><span class="lnt"> 547
</span><span class="lnt"> 548
</span><span class="lnt"> 549
</span><span class="lnt"> 550
</span><span class="lnt"> 551
</span><span class="lnt"> 552
</span><span class="lnt"> 553
</span><span class="lnt"> 554
</span><span class="lnt"> 555
</span><span class="lnt"> 556
</span><span class="lnt"> 557
</span><span class="lnt"> 558
</span><span class="lnt"> 559
</span><span class="lnt"> 560
</span><span class="lnt"> 561
</span><span class="lnt"> 562
</span><span class="lnt"> 563
</span><span class="lnt"> 564
</span><span class="lnt"> 565
</span><span class="lnt"> 566
</span><span class="lnt"> 567
</span><span class="lnt"> 568
</span><span class="lnt"> 569
</span><span class="lnt"> 570
</span><span class="lnt"> 571
</span><span class="lnt"> 572
</span><span class="lnt"> 573
</span><span class="lnt"> 574
</span><span class="lnt"> 575
</span><span class="lnt"> 576
</span><span class="lnt"> 577
</span><span class="lnt"> 578
</span><span class="lnt"> 579
</span><span class="lnt"> 580
</span><span class="lnt"> 581
</span><span class="lnt"> 582
</span><span class="lnt"> 583
</span><span class="lnt"> 584
</span><span class="lnt"> 585
</span><span class="lnt"> 586
</span><span class="lnt"> 587
</span><span class="lnt"> 588
</span><span class="lnt"> 589
</span><span class="lnt"> 590
</span><span class="lnt"> 591
</span><span class="lnt"> 592
</span><span class="lnt"> 593
</span><span class="lnt"> 594
</span><span class="lnt"> 595
</span><span class="lnt"> 596
</span><span class="lnt"> 597
</span><span class="lnt"> 598
</span><span class="lnt"> 599
</span><span class="lnt"> 600
</span><span class="lnt"> 601
</span><span class="lnt"> 602
</span><span class="lnt"> 603
</span><span class="lnt"> 604
</span><span class="lnt"> 605
</span><span class="lnt"> 606
</span><span class="lnt"> 607
</span><span class="lnt"> 608
</span><span class="lnt"> 609
</span><span class="lnt"> 610
</span><span class="lnt"> 611
</span><span class="lnt"> 612
</span><span class="lnt"> 613
</span><span class="lnt"> 614
</span><span class="lnt"> 615
</span><span class="lnt"> 616
</span><span class="lnt"> 617
</span><span class="lnt"> 618
</span><span class="lnt"> 619
</span><span class="lnt"> 620
</span><span class="lnt"> 621
</span><span class="lnt"> 622
</span><span class="lnt"> 623
</span><span class="lnt"> 624
</span><span class="lnt"> 625
</span><span class="lnt"> 626
</span><span class="lnt"> 627
</span><span class="lnt"> 628
</span><span class="lnt"> 629
</span><span class="lnt"> 630
</span><span class="lnt"> 631
</span><span class="lnt"> 632
</span><span class="lnt"> 633
</span><span class="lnt"> 634
</span><span class="lnt"> 635
</span><span class="lnt"> 636
</span><span class="lnt"> 637
</span><span class="lnt"> 638
</span><span class="lnt"> 639
</span><span class="lnt"> 640
</span><span class="lnt"> 641
</span><span class="lnt"> 642
</span><span class="lnt"> 643
</span><span class="lnt"> 644
</span><span class="lnt"> 645
</span><span class="lnt"> 646
</span><span class="lnt"> 647
</span><span class="lnt"> 648
</span><span class="lnt"> 649
</span><span class="lnt"> 650
</span><span class="lnt"> 651
</span><span class="lnt"> 652
</span><span class="lnt"> 653
</span><span class="lnt"> 654
</span><span class="lnt"> 655
</span><span class="lnt"> 656
</span><span class="lnt"> 657
</span><span class="lnt"> 658
</span><span class="lnt"> 659
</span><span class="lnt"> 660
</span><span class="lnt"> 661
</span><span class="lnt"> 662
</span><span class="lnt"> 663
</span><span class="lnt"> 664
</span><span class="lnt"> 665
</span><span class="lnt"> 666
</span><span class="lnt"> 667
</span><span class="lnt"> 668
</span><span class="lnt"> 669
</span><span class="lnt"> 670
</span><span class="lnt"> 671
</span><span class="lnt"> 672
</span><span class="lnt"> 673
</span><span class="lnt"> 674
</span><span class="lnt"> 675
</span><span class="lnt"> 676
</span><span class="lnt"> 677
</span><span class="lnt"> 678
</span><span class="lnt"> 679
</span><span class="lnt"> 680
</span><span class="lnt"> 681
</span><span class="lnt"> 682
</span><span class="lnt"> 683
</span><span class="lnt"> 684
</span><span class="lnt"> 685
</span><span class="lnt"> 686
</span><span class="lnt"> 687
</span><span class="lnt"> 688
</span><span class="lnt"> 689
</span><span class="lnt"> 690
</span><span class="lnt"> 691
</span><span class="lnt"> 692
</span><span class="lnt"> 693
</span><span class="lnt"> 694
</span><span class="lnt"> 695
</span><span class="lnt"> 696
</span><span class="lnt"> 697
</span><span class="lnt"> 698
</span><span class="lnt"> 699
</span><span class="lnt"> 700
</span><span class="lnt"> 701
</span><span class="lnt"> 702
</span><span class="lnt"> 703
</span><span class="lnt"> 704
</span><span class="lnt"> 705
</span><span class="lnt"> 706
</span><span class="lnt"> 707
</span><span class="lnt"> 708
</span><span class="lnt"> 709
</span><span class="lnt"> 710
</span><span class="lnt"> 711
</span><span class="lnt"> 712
</span><span class="lnt"> 713
</span><span class="lnt"> 714
</span><span class="lnt"> 715
</span><span class="lnt"> 716
</span><span class="lnt"> 717
</span><span class="lnt"> 718
</span><span class="lnt"> 719
</span><span class="lnt"> 720
</span><span class="lnt"> 721
</span><span class="lnt"> 722
</span><span class="lnt"> 723
</span><span class="lnt"> 724
</span><span class="lnt"> 725
</span><span class="lnt"> 726
</span><span class="lnt"> 727
</span><span class="lnt"> 728
</span><span class="lnt"> 729
</span><span class="lnt"> 730
</span><span class="lnt"> 731
</span><span class="lnt"> 732
</span><span class="lnt"> 733
</span><span class="lnt"> 734
</span><span class="lnt"> 735
</span><span class="lnt"> 736
</span><span class="lnt"> 737
</span><span class="lnt"> 738
</span><span class="lnt"> 739
</span><span class="lnt"> 740
</span><span class="lnt"> 741
</span><span class="lnt"> 742
</span><span class="lnt"> 743
</span><span class="lnt"> 744
</span><span class="lnt"> 745
</span><span class="lnt"> 746
</span><span class="lnt"> 747
</span><span class="lnt"> 748
</span><span class="lnt"> 749
</span><span class="lnt"> 750
</span><span class="lnt"> 751
</span><span class="lnt"> 752
</span><span class="lnt"> 753
</span><span class="lnt"> 754
</span><span class="lnt"> 755
</span><span class="lnt"> 756
</span><span class="lnt"> 757
</span><span class="lnt"> 758
</span><span class="lnt"> 759
</span><span class="lnt"> 760
</span><span class="lnt"> 761
</span><span class="lnt"> 762
</span><span class="lnt"> 763
</span><span class="lnt"> 764
</span><span class="lnt"> 765
</span><span class="lnt"> 766
</span><span class="lnt"> 767
</span><span class="lnt"> 768
</span><span class="lnt"> 769
</span><span class="lnt"> 770
</span><span class="lnt"> 771
</span><span class="lnt"> 772
</span><span class="lnt"> 773
</span><span class="lnt"> 774
</span><span class="lnt"> 775
</span><span class="lnt"> 776
</span><span class="lnt"> 777
</span><span class="lnt"> 778
</span><span class="lnt"> 779
</span><span class="lnt"> 780
</span><span class="lnt"> 781
</span><span class="lnt"> 782
</span><span class="lnt"> 783
</span><span class="lnt"> 784
</span><span class="lnt"> 785
</span><span class="lnt"> 786
</span><span class="lnt"> 787
</span><span class="lnt"> 788
</span><span class="lnt"> 789
</span><span class="lnt"> 790
</span><span class="lnt"> 791
</span><span class="lnt"> 792
</span><span class="lnt"> 793
</span><span class="lnt"> 794
</span><span class="lnt"> 795
</span><span class="lnt"> 796
</span><span class="lnt"> 797
</span><span class="lnt"> 798
</span><span class="lnt"> 799
</span><span class="lnt"> 800
</span><span class="lnt"> 801
</span><span class="lnt"> 802
</span><span class="lnt"> 803
</span><span class="lnt"> 804
</span><span class="lnt"> 805
</span><span class="lnt"> 806
</span><span class="lnt"> 807
</span><span class="lnt"> 808
</span><span class="lnt"> 809
</span><span class="lnt"> 810
</span><span class="lnt"> 811
</span><span class="lnt"> 812
</span><span class="lnt"> 813
</span><span class="lnt"> 814
</span><span class="lnt"> 815
</span><span class="lnt"> 816
</span><span class="lnt"> 817
</span><span class="lnt"> 818
</span><span class="lnt"> 819
</span><span class="lnt"> 820
</span><span class="lnt"> 821
</span><span class="lnt"> 822
</span><span class="lnt"> 823
</span><span class="lnt"> 824
</span><span class="lnt"> 825
</span><span class="lnt"> 826
</span><span class="lnt"> 827
</span><span class="lnt"> 828
</span><span class="lnt"> 829
</span><span class="lnt"> 830
</span><span class="lnt"> 831
</span><span class="lnt"> 832
</span><span class="lnt"> 833
</span><span class="lnt"> 834
</span><span class="lnt"> 835
</span><span class="lnt"> 836
</span><span class="lnt"> 837
</span><span class="lnt"> 838
</span><span class="lnt"> 839
</span><span class="lnt"> 840
</span><span class="lnt"> 841
</span><span class="lnt"> 842
</span><span class="lnt"> 843
</span><span class="lnt"> 844
</span><span class="lnt"> 845
</span><span class="lnt"> 846
</span><span class="lnt"> 847
</span><span class="lnt"> 848
</span><span class="lnt"> 849
</span><span class="lnt"> 850
</span><span class="lnt"> 851
</span><span class="lnt"> 852
</span><span class="lnt"> 853
</span><span class="lnt"> 854
</span><span class="lnt"> 855
</span><span class="lnt"> 856
</span><span class="lnt"> 857
</span><span class="lnt"> 858
</span><span class="lnt"> 859
</span><span class="lnt"> 860
</span><span class="lnt"> 861
</span><span class="lnt"> 862
</span><span class="lnt"> 863
</span><span class="lnt"> 864
</span><span class="lnt"> 865
</span><span class="lnt"> 866
</span><span class="lnt"> 867
</span><span class="lnt"> 868
</span><span class="lnt"> 869
</span><span class="lnt"> 870
</span><span class="lnt"> 871
</span><span class="lnt"> 872
</span><span class="lnt"> 873
</span><span class="lnt"> 874
</span><span class="lnt"> 875
</span><span class="lnt"> 876
</span><span class="lnt"> 877
</span><span class="lnt"> 878
</span><span class="lnt"> 879
</span><span class="lnt"> 880
</span><span class="lnt"> 881
</span><span class="lnt"> 882
</span><span class="lnt"> 883
</span><span class="lnt"> 884
</span><span class="lnt"> 885
</span><span class="lnt"> 886
</span><span class="lnt"> 887
</span><span class="lnt"> 888
</span><span class="lnt"> 889
</span><span class="lnt"> 890
</span><span class="lnt"> 891
</span><span class="lnt"> 892
</span><span class="lnt"> 893
</span><span class="lnt"> 894
</span><span class="lnt"> 895
</span><span class="lnt"> 896
</span><span class="lnt"> 897
</span><span class="lnt"> 898
</span><span class="lnt"> 899
</span><span class="lnt"> 900
</span><span class="lnt"> 901
</span><span class="lnt"> 902
</span><span class="lnt"> 903
</span><span class="lnt"> 904
</span><span class="lnt"> 905
</span><span class="lnt"> 906
</span><span class="lnt"> 907
</span><span class="lnt"> 908
</span><span class="lnt"> 909
</span><span class="lnt"> 910
</span><span class="lnt"> 911
</span><span class="lnt"> 912
</span><span class="lnt"> 913
</span><span class="lnt"> 914
</span><span class="lnt"> 915
</span><span class="lnt"> 916
</span><span class="lnt"> 917
</span><span class="lnt"> 918
</span><span class="lnt"> 919
</span><span class="lnt"> 920
</span><span class="lnt"> 921
</span><span class="lnt"> 922
</span><span class="lnt"> 923
</span><span class="lnt"> 924
</span><span class="lnt"> 925
</span><span class="lnt"> 926
</span><span class="lnt"> 927
</span><span class="lnt"> 928
</span><span class="lnt"> 929
</span><span class="lnt"> 930
</span><span class="lnt"> 931
</span><span class="lnt"> 932
</span><span class="lnt"> 933
</span><span class="lnt"> 934
</span><span class="lnt"> 935
</span><span class="lnt"> 936
</span><span class="lnt"> 937
</span><span class="lnt"> 938
</span><span class="lnt"> 939
</span><span class="lnt"> 940
</span><span class="lnt"> 941
</span><span class="lnt"> 942
</span><span class="lnt"> 943
</span><span class="lnt"> 944
</span><span class="lnt"> 945
</span><span class="lnt"> 946
</span><span class="lnt"> 947
</span><span class="lnt"> 948
</span><span class="lnt"> 949
</span><span class="lnt"> 950
</span><span class="lnt"> 951
</span><span class="lnt"> 952
</span><span class="lnt"> 953
</span><span class="lnt"> 954
</span><span class="lnt"> 955
</span><span class="lnt"> 956
</span><span class="lnt"> 957
</span><span class="lnt"> 958
</span><span class="lnt"> 959
</span><span class="lnt"> 960
</span><span class="lnt"> 961
</span><span class="lnt"> 962
</span><span class="lnt"> 963
</span><span class="lnt"> 964
</span><span class="lnt"> 965
</span><span class="lnt"> 966
</span><span class="lnt"> 967
</span><span class="lnt"> 968
</span><span class="lnt"> 969
</span><span class="lnt"> 970
</span><span class="lnt"> 971
</span><span class="lnt"> 972
</span><span class="lnt"> 973
</span><span class="lnt"> 974
</span><span class="lnt"> 975
</span><span class="lnt"> 976
</span><span class="lnt"> 977
</span><span class="lnt"> 978
</span><span class="lnt"> 979
</span><span class="lnt"> 980
</span><span class="lnt"> 981
</span><span class="lnt"> 982
</span><span class="lnt"> 983
</span><span class="lnt"> 984
</span><span class="lnt"> 985
</span><span class="lnt"> 986
</span><span class="lnt"> 987
</span><span class="lnt"> 988
</span><span class="lnt"> 989
</span><span class="lnt"> 990
</span><span class="lnt"> 991
</span><span class="lnt"> 992
</span><span class="lnt"> 993
</span><span class="lnt"> 994
</span><span class="lnt"> 995
</span><span class="lnt"> 996
</span><span class="lnt"> 997
</span><span class="lnt"> 998
</span><span class="lnt"> 999
</span><span class="lnt">1000
</span><span class="lnt">1001
</span><span class="lnt">1002
</span><span class="lnt">1003
</span><span class="lnt">1004
</span><span class="lnt">1005
</span><span class="lnt">1006
</span><span class="lnt">1007
</span><span class="lnt">1008
</span><span class="lnt">1009
</span><span class="lnt">1010
</span><span class="lnt">1011
</span><span class="lnt">1012
</span><span class="lnt">1013
</span><span class="lnt">1014
</span><span class="lnt">1015
</span><span class="lnt">1016
</span><span class="lnt">1017
</span><span class="lnt">1018
</span><span class="lnt">1019
</span><span class="lnt">1020
</span><span class="lnt">1021
</span><span class="lnt">1022
</span><span class="lnt">1023
</span><span class="lnt">1024
</span><span class="lnt">1025
</span><span class="lnt">1026
</span><span class="lnt">1027
</span><span class="lnt">1028
</span><span class="lnt">1029
</span><span class="lnt">1030
</span><span class="lnt">1031
</span><span class="lnt">1032
</span><span class="lnt">1033
</span><span class="lnt">1034
</span><span class="lnt">1035
</span><span class="lnt">1036
</span><span class="lnt">1037
</span><span class="lnt">1038
</span><span class="lnt">1039
</span><span class="lnt">1040
</span><span class="lnt">1041
</span><span class="lnt">1042
</span><span class="lnt">1043
</span><span class="lnt">1044
</span><span class="lnt">1045
</span><span class="lnt">1046
</span><span class="lnt">1047
</span><span class="lnt">1048
</span><span class="lnt">1049
</span><span class="lnt">1050
</span><span class="lnt">1051
</span><span class="lnt">1052
</span><span class="lnt">1053
</span><span class="lnt">1054
</span><span class="lnt">1055
</span><span class="lnt">1056
</span><span class="lnt">1057
</span><span class="lnt">1058
</span><span class="lnt">1059
</span><span class="lnt">1060
</span><span class="lnt">1061
</span><span class="lnt">1062
</span><span class="lnt">1063
</span><span class="lnt">1064
</span><span class="lnt">1065
</span><span class="lnt">1066
</span><span class="lnt">1067
</span><span class="lnt">1068
</span><span class="lnt">1069
</span><span class="lnt">1070
</span><span class="lnt">1071
</span><span class="lnt">1072
</span><span class="lnt">1073
</span><span class="lnt">1074
</span><span class="lnt">1075
</span><span class="lnt">1076
</span><span class="lnt">1077
</span><span class="lnt">1078
</span><span class="lnt">1079
</span><span class="lnt">1080
</span><span class="lnt">1081
</span><span class="lnt">1082
</span><span class="lnt">1083
</span><span class="lnt">1084
</span><span class="lnt">1085
</span><span class="lnt">1086
</span><span class="lnt">1087
</span><span class="lnt">1088
</span><span class="lnt">1089
</span><span class="lnt">1090
</span><span class="lnt">1091
</span><span class="lnt">1092
</span><span class="lnt">1093
</span><span class="lnt">1094
</span><span class="lnt">1095
</span><span class="lnt">1096
</span><span class="lnt">1097
</span><span class="lnt">1098
</span><span class="lnt">1099
</span><span class="lnt">1100
</span><span class="lnt">1101
</span><span class="lnt">1102
</span><span class="lnt">1103
</span><span class="lnt">1104
</span><span class="lnt">1105
</span><span class="lnt">1106
</span><span class="lnt">1107
</span><span class="lnt">1108
</span><span class="lnt">1109
</span><span class="lnt">1110
</span><span class="lnt">1111
</span><span class="lnt">1112
</span><span class="lnt">1113
</span><span class="lnt">1114
</span><span class="lnt">1115
</span><span class="lnt">1116
</span><span class="lnt">1117
</span><span class="lnt">1118
</span><span class="lnt">1119
</span><span class="lnt">1120
</span><span class="lnt">1121
</span><span class="lnt">1122
</span><span class="lnt">1123
</span><span class="lnt">1124
</span><span class="lnt">1125
</span><span class="lnt">1126
</span><span class="lnt">1127
</span><span class="lnt">1128
</span><span class="lnt">1129
</span><span class="lnt">1130
</span><span class="lnt">1131
</span><span class="lnt">1132
</span><span class="lnt">1133
</span><span class="lnt">1134
</span><span class="lnt">1135
</span><span class="lnt">1136
</span><span class="lnt">1137
</span><span class="lnt">1138
</span><span class="lnt">1139
</span><span class="lnt">1140
</span><span class="lnt">1141
</span><span class="lnt">1142
</span><span class="lnt">1143
</span><span class="lnt">1144
</span><span class="lnt">1145
</span><span class="lnt">1146
</span><span class="lnt">1147
</span><span class="lnt">1148
</span><span class="lnt">1149
</span><span class="lnt">1150
</span><span class="lnt">1151
</span><span class="lnt">1152
</span><span class="lnt">1153
</span><span class="lnt">1154
</span><span class="lnt">1155
</span><span class="lnt">1156
</span><span class="lnt">1157
</span><span class="lnt">1158
</span><span class="lnt">1159
</span><span class="lnt">1160
</span><span class="lnt">1161
</span><span class="lnt">1162
</span><span class="lnt">1163
</span><span class="lnt">1164
</span><span class="lnt">1165
</span><span class="lnt">1166
</span><span class="lnt">1167
</span><span class="lnt">1168
</span><span class="lnt">1169
</span><span class="lnt">1170
</span><span class="lnt">1171
</span><span class="lnt">1172
</span><span class="lnt">1173
</span><span class="lnt">1174
</span><span class="lnt">1175
</span><span class="lnt">1176
</span><span class="lnt">1177
</span><span class="lnt">1178
</span><span class="lnt">1179
</span><span class="lnt">1180
</span><span class="lnt">1181
</span><span class="lnt">1182
</span><span class="lnt">1183
</span><span class="lnt">1184
</span><span class="lnt">1185
</span><span class="lnt">1186
</span><span class="lnt">1187
</span><span class="lnt">1188
</span><span class="lnt">1189
</span><span class="lnt">1190
</span><span class="lnt">1191
</span><span class="lnt">1192
</span><span class="lnt">1193
</span><span class="lnt">1194
</span><span class="lnt">1195
</span><span class="lnt">1196
</span><span class="lnt">1197
</span><span class="lnt">1198
</span><span class="lnt">1199
</span><span class="lnt">1200
</span><span class="lnt">1201
</span><span class="lnt">1202
</span><span class="lnt">1203
</span><span class="lnt">1204
</span><span class="lnt">1205
</span><span class="lnt">1206
</span><span class="lnt">1207
</span><span class="lnt">1208
</span><span class="lnt">1209
</span><span class="lnt">1210
</span><span class="lnt">1211
</span><span class="lnt">1212
</span><span class="lnt">1213
</span><span class="lnt">1214
</span><span class="lnt">1215
</span><span class="lnt">1216
</span><span class="lnt">1217
</span><span class="lnt">1218
</span><span class="lnt">1219
</span><span class="lnt">1220
</span><span class="lnt">1221
</span><span class="lnt">1222
</span><span class="lnt">1223
</span><span class="lnt">1224
</span><span class="lnt">1225
</span><span class="lnt">1226
</span><span class="lnt">1227
</span><span class="lnt">1228
</span><span class="lnt">1229
</span><span class="lnt">1230
</span><span class="lnt">1231
</span><span class="lnt">1232
</span><span class="lnt">1233
</span><span class="lnt">1234
</span><span class="lnt">1235
</span><span class="lnt">1236
</span><span class="lnt">1237
</span><span class="lnt">1238
</span><span class="lnt">1239
</span><span class="lnt">1240
</span><span class="lnt">1241
</span><span class="lnt">1242
</span><span class="lnt">1243
</span><span class="lnt">1244
</span><span class="lnt">1245
</span><span class="lnt">1246
</span><span class="lnt">1247
</span><span class="lnt">1248
</span><span class="lnt">1249
</span><span class="lnt">1250
</span><span class="lnt">1251
</span><span class="lnt">1252
</span><span class="lnt">1253
</span><span class="lnt">1254
</span><span class="lnt">1255
</span><span class="lnt">1256
</span><span class="lnt">1257
</span><span class="lnt">1258
</span><span class="lnt">1259
</span><span class="lnt">1260
</span><span class="lnt">1261
</span><span class="lnt">1262
</span><span class="lnt">1263
</span><span class="lnt">1264
</span><span class="lnt">1265
</span><span class="lnt">1266
</span><span class="lnt">1267
</span><span class="lnt">1268
</span><span class="lnt">1269
</span><span class="lnt">1270
</span><span class="lnt">1271
</span><span class="lnt">1272
</span><span class="lnt">1273
</span><span class="lnt">1274
</span><span class="lnt">1275
</span><span class="lnt">1276
</span><span class="lnt">1277
</span><span class="lnt">1278
</span><span class="lnt">1279
</span><span class="lnt">1280
</span><span class="lnt">1281
</span><span class="lnt">1282
</span><span class="lnt">1283
</span><span class="lnt">1284
</span><span class="lnt">1285
</span><span class="lnt">1286
</span><span class="lnt">1287
</span><span class="lnt">1288
</span><span class="lnt">1289
</span><span class="lnt">1290
</span><span class="lnt">1291
</span><span class="lnt">1292
</span><span class="lnt">1293
</span><span class="lnt">1294
</span><span class="lnt">1295
</span><span class="lnt">1296
</span><span class="lnt">1297
</span><span class="lnt">1298
</span><span class="lnt">1299
</span><span class="lnt">1300
</span><span class="lnt">1301
</span><span class="lnt">1302
</span><span class="lnt">1303
</span><span class="lnt">1304
</span><span class="lnt">1305
</span><span class="lnt">1306
</span><span class="lnt">1307
</span><span class="lnt">1308
</span><span class="lnt">1309
</span><span class="lnt">1310
</span><span class="lnt">1311
</span><span class="lnt">1312
</span><span class="lnt">1313
</span><span class="lnt">1314
</span><span class="lnt">1315
</span><span class="lnt">1316
</span><span class="lnt">1317
</span><span class="lnt">1318
</span><span class="lnt">1319
</span><span class="lnt">1320
</span><span class="lnt">1321
</span><span class="lnt">1322
</span><span class="lnt">1323
</span><span class="lnt">1324
</span><span class="lnt">1325
</span><span class="lnt">1326
</span><span class="lnt">1327
</span><span class="lnt">1328
</span><span class="lnt">1329
</span><span class="lnt">1330
</span><span class="lnt">1331
</span><span class="lnt">1332
</span><span class="lnt">1333
</span><span class="lnt">1334
</span><span class="lnt">1335
</span><span class="lnt">1336
</span><span class="lnt">1337
</span><span class="lnt">1338
</span><span class="lnt">1339
</span><span class="lnt">1340
</span><span class="lnt">1341
</span><span class="lnt">1342
</span><span class="lnt">1343
</span><span class="lnt">1344
</span><span class="lnt">1345
</span><span class="lnt">1346
</span><span class="lnt">1347
</span><span class="lnt">1348
</span><span class="lnt">1349
</span><span class="lnt">1350
</span><span class="lnt">1351
</span><span class="lnt">1352
</span><span class="lnt">1353
</span><span class="lnt">1354
</span><span class="lnt">1355
</span><span class="lnt">1356
</span><span class="lnt">1357
</span><span class="lnt">1358
</span><span class="lnt">1359
</span><span class="lnt">1360
</span><span class="lnt">1361
</span><span class="lnt">1362
</span><span class="lnt">1363
</span><span class="lnt">1364
</span><span class="lnt">1365
</span><span class="lnt">1366
</span><span class="lnt">1367
</span><span class="lnt">1368
</span><span class="lnt">1369
</span><span class="lnt">1370
</span><span class="lnt">1371
</span><span class="lnt">1372
</span><span class="lnt">1373
</span><span class="lnt">1374
</span><span class="lnt">1375
</span><span class="lnt">1376
</span><span class="lnt">1377
</span><span class="lnt">1378
</span><span class="lnt">1379
</span><span class="lnt">1380
</span><span class="lnt">1381
</span><span class="lnt">1382
</span><span class="lnt">1383
</span><span class="lnt">1384
</span><span class="lnt">1385
</span><span class="lnt">1386
</span><span class="lnt">1387
</span><span class="lnt">1388
</span><span class="lnt">1389
</span><span class="lnt">1390
</span><span class="lnt">1391
</span><span class="lnt">1392
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">Loguru logging library for C++, by Emil Ernerfeldt.
</span></span></span><span class="line"><span class="cl"><span class="cm">www.github.com/emilk/loguru
</span></span></span><span class="line"><span class="cl"><span class="cm">If you find Loguru useful, please let me know on twitter or in a mail!
</span></span></span><span class="line"><span class="cl"><span class="cm">Twitter: @ernerfeldt
</span></span></span><span class="line"><span class="cl"><span class="cm">Mail:    emil.ernerfeldt@gmail.com
</span></span></span><span class="line"><span class="cl"><span class="cm">Website: www.ilikebigbits.com
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm"># License
</span></span></span><span class="line"><span class="cl"><span class="cm">	This software is in the public domain. Where that dedication is not
</span></span></span><span class="line"><span class="cl"><span class="cm">	recognized, you are granted a perpetual, irrevocable license to
</span></span></span><span class="line"><span class="cl"><span class="cm">	copy, modify and distribute it as you see fit.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm"># Inspiration
</span></span></span><span class="line"><span class="cl"><span class="cm">	Much of Loguru was inspired by GLOG, https://code.google.com/p/google-glog/.
</span></span></span><span class="line"><span class="cl"><span class="cm">	The choice of public domain is fully due Sean T. Barrett
</span></span></span><span class="line"><span class="cl"><span class="cm">	and his wonderful stb libraries at https://github.com/nothings/stb.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm"># Version history
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 0.1.0 - 2015-03-22 - Works great on Mac.
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 0.2.0 - 2015-09-17 - Removed the only dependency.
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 0.3.0 - 2015-10-02 - Drop-in replacement for most of GLOG
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 0.4.0 - 2015-10-07 - Single-file!
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 0.5.0 - 2015-10-17 - Improved file logging
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 0.6.0 - 2015-10-24 - Add stack traces
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 0.7.0 - 2015-10-27 - Signals
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 0.8.0 - 2015-10-30 - Color logging.
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 0.9.0 - 2015-11-26 - ABORT_S and proper handling of FATAL
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.0.0 - 2016-02-14 - ERROR_CONTEXT
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.1.0 - 2016-02-19 - -v OFF, -v INFO etc
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.1.1 - 2016-02-20 - textprintf vs strprintf
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.1.2 - 2016-02-22 - Remove g_alsologtostderr
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.1.3 - 2016-02-29 - ERROR_CONTEXT as linked list
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.2.0 - 2016-03-19 - Add get_thread_name()
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.2.1 - 2016-03-20 - Minor fixes
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.2.2 - 2016-03-29 - Fix issues with set_fatal_handler throwing an exception
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.2.3 - 2016-05-16 - Log current working directory in loguru::init().
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.2.4 - 2016-05-18 - Custom replacement for -v in loguru::init() by bjoernpollex
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.2.5 - 2016-05-18 - Add ability to print ERROR_CONTEXT of parent thread.
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.2.6 - 2016-05-19 - Bug fix regarding VLOG verbosity argument lacking ().
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.2.7 - 2016-05-23 - Fix PATH_MAX problem.
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.2.8 - 2016-05-26 - Add shutdown() and remove_all_callbacks()
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.2.9 - 2016-06-09 - Use a monotonic clock for uptime.
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.3.0 - 2016-07-20 - Fix issues with callback flush/close not being called.
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.3.1 - 2016-07-20 - Add LOGURU_UNSAFE_SIGNAL_HANDLER to toggle stacktrace on signals.
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.3.2 - 2016-07-20 - Add loguru::arguments()
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.4.0 - 2016-09-15 - Semantic versioning + add loguru::create_directories
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.4.1 - 2016-09-29 - Customize formating with LOGURU_FILENAME_WIDTH
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.5.0 - 2016-12-22 - LOGURU_USE_FMTLIB by kolis and LOGURU_WITH_FILEABS by scinart
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.5.1 - 2017-08-08 - Terminal colors on Windows 10 thanks to looki
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.6.0 - 2018-01-03 - Add LOGURU_RTTI and LOGURU_STACKTRACES settings
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.7.0 - 2018-01-03 - Add ability to turn off the preamble with loguru::g_preamble
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.7.1 - 2018-04-05 - Add function get_fatal_handler
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.7.2 - 2018-04-22 - Fix a bug where large file names could cause stack corruption (thanks @ccamporesi)
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.8.0 - 2018-04-23 - Shorten long file names to keep preamble fixed width
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 1.9.0 - 2018-09-22 - Adjust terminal colors, add LOGURU_VERBOSE_SCOPE_ENDINGS, add LOGURU_SCOPE_TIME_PRECISION, add named log levels
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 2.0.0 - 2018-09-22 - Split loguru.hpp into loguru.hpp and loguru.cpp
</span></span></span><span class="line"><span class="cl"><span class="cm">	* Version 2.1.0 - 2019-09-23 - Update fmtlib + add option to loguru::init to NOT set main thread name.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm"># Compiling
</span></span></span><span class="line"><span class="cl"><span class="cm">	Just include &lt;loguru.hpp&gt; where you want to use Loguru.
</span></span></span><span class="line"><span class="cl"><span class="cm">	Then, in one .cpp file #include &lt;loguru.cpp&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm">	Make sure you compile with -std=c++11 -lstdc++ -lpthread -ldl
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm"># Usage
</span></span></span><span class="line"><span class="cl"><span class="cm">	For details, please see the official documentation at emilk.github.io/loguru
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	#include &lt;loguru.hpp&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	int main(int argc, char* argv[]) {
</span></span></span><span class="line"><span class="cl"><span class="cm">		loguru::init(argc, argv);
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">		// Put every log message in &#34;everything.log&#34;:
</span></span></span><span class="line"><span class="cl"><span class="cm">		loguru::add_file(&#34;everything.log&#34;, loguru::Append, loguru::Verbosity_MAX);
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">		LOG_F(INFO, &#34;The magic number is %d&#34;, 42);
</span></span></span><span class="line"><span class="cl"><span class="cm">	}
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#if defined(LOGURU_IMPLEMENTATION)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#error &#34;You are defining LOGURU_IMPLEMENTATION. This is for older versions of Loguru. You should now instead include loguru.cpp (or build it and link with it)&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Disable all warnings from gcc/clang:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#if defined(__clang__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#pragma clang system_header
</span></span></span><span class="line"><span class="cl"><span class="cp">#elif defined(__GNUC__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#pragma GCC system_header
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_HAS_DECLARED_FORMAT_HEADER
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_HAS_DECLARED_FORMAT_HEADER
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Semantic versioning. Loguru version can be printed with printf(&#34;%d.%d.%d&#34;, LOGURU_VERSION_MAJOR, LOGURU_VERSION_MINOR, LOGURU_VERSION_PATCH);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define LOGURU_VERSION_MAJOR 2
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_VERSION_MINOR 1
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_VERSION_PATCH 0
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if defined(_MSC_VER)
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;sal.h&gt;</span><span class="cp">	</span><span class="c1">// Needed for _In_z_ etc annotations
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ----------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_EXPORT
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Define to your project&#39;s export declaration if needed for use in a shared library.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define LOGURU_EXPORT
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_SCOPE_TEXT_SIZE
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Maximum length of text that can be printed by a LOG_SCOPE.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// This should be long enough to get most things, but short enough not to clutter the stack.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define LOGURU_SCOPE_TEXT_SIZE 196
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_FILENAME_WIDTH
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Width of the column containing the file name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// #define LOGURU_FILENAME_WIDTH 23
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="cp">#define LOGURU_FILENAME_WIDTH 15
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_THREADNAME_WIDTH
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Width of the column containing the thread name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// #define LOGURU_THREADNAME_WIDTH 16
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="cp">#define LOGURU_THREADNAME_WIDTH 15
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_SCOPE_TIME_PRECISION
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Resolution of scope timers. 3=ms, 6=us, 9=ns
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//#define LOGURU_SCOPE_TIME_PRECISION 3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define LOGURU_SCOPE_TIME_PRECISION 6
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_CATCH_SIGABRT
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Should Loguru catch SIGABRT to print stack trace etc?
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define LOGURU_CATCH_SIGABRT 1
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_VERBOSE_SCOPE_ENDINGS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Show milliseconds and scope name at end of scope.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define LOGURU_VERBOSE_SCOPE_ENDINGS 1
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_REDEFINE_ASSERT
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_REDEFINE_ASSERT 0
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_WITH_STREAMS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_WITH_STREAMS 0
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_REPLACE_GLOG
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_REPLACE_GLOG 0
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_REPLACE_GLOG
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef LOGURU_WITH_STREAMS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_WITH_STREAMS 1
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if defined(LOGURU_UNSAFE_SIGNAL_HANDLER)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#error &#34;You are defining LOGURU_UNSAFE_SIGNAL_HANDLER. This is for older versions of Loguru. You should now instead set the unsafe_signal_handler option when you call loguru::init.&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_IMPLEMENTATION
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef LOGURU_WITH_STREAMS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_WITH_STREAMS 1
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_USE_FMTLIB
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_USE_FMTLIB 0
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_WITH_FILEABS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_WITH_FILEABS 0
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_RTTI
</span></span></span><span class="line"><span class="cl"><span class="cp">#if defined(__clang__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#if __has_feature(cxx_rtti)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>		<span class="cp">#define LOGURU_RTTI 1
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#elif defined(__GNUG__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#if defined(__GXX_RTTI)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>		<span class="cp">#define LOGURU_RTTI 1
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#elif defined(_MSC_VER)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#if defined(_CPPRTTI)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>		<span class="cp">#define LOGURU_RTTI 1
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// --------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1">// Utility macros
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_CONCATENATE_IMPL(s1, s2) s1 ## s2
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_CONCATENATE(s1, s2) LOGURU_CONCATENATE_IMPL(s1, s2)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifdef __COUNTER__
</span></span></span><span class="line"><span class="cl"><span class="cp">#   define LOGURU_ANONYMOUS_VARIABLE(str) LOGURU_CONCATENATE(str, __COUNTER__)
</span></span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp">#   define LOGURU_ANONYMOUS_VARIABLE(str) LOGURU_CONCATENATE(str, __LINE__)
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if defined(__clang__) || defined(__GNUC__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Helper macro for declaring functions as having similar signature to printf.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// This allows the compiler to catch format errors at compile-time.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define LOGURU_PRINTF_LIKE(fmtarg, firstvararg) __attribute__((__format__ (__printf__, fmtarg, firstvararg)))
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_FORMAT_STRING_TYPE const char*
</span></span></span><span class="line"><span class="cl"><span class="cp">#elif defined(_MSC_VER)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_PRINTF_LIKE(fmtarg, firstvararg)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_FORMAT_STRING_TYPE _In_z_ _Printf_format_string_ const char*
</span></span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_PRINTF_LIKE(fmtarg, firstvararg)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_FORMAT_STRING_TYPE const char*
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Used to mark log_and_abort for the benefit of the static analyzer and optimizer.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#if defined(_MSC_VER)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_NORETURN __declspec(noreturn)
</span></span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_NORETURN __attribute__((noreturn))
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if defined(_MSC_VER)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_PREDICT_FALSE(x) (x)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_PREDICT_TRUE(x)  (x)
</span></span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_PREDICT_FALSE(x) (__builtin_expect(x,     0))
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_PREDICT_TRUE(x)  (__builtin_expect(!!(x), 1))
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_USE_FMTLIB
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#include</span> <span class="cpf">&lt;fmt/format.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_FMT(x) &#34;{:&#34; #x &#34;}&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOGURU_FMT(x) &#34;%&#34; #x
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define STRDUP(str) _strdup(str)
</span></span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define STRDUP(str) strdup(str)
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// --------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">loguru</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Simple RAII ownership of a char*.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">class</span> <span class="nc">LOGURU_EXPORT</span> <span class="n">Text</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="k">explicit</span> <span class="n">Text</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">owned_str</span><span class="p">)</span> <span class="o">:</span> <span class="n">_str</span><span class="p">(</span><span class="n">owned_str</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">		<span class="o">~</span><span class="n">Text</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="n">Text</span><span class="p">(</span><span class="n">Text</span><span class="o">&amp;&amp;</span> <span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">_str</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">_str</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="n">t</span><span class="p">.</span><span class="n">_str</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="n">Text</span><span class="p">(</span><span class="n">Text</span><span class="o">&amp;</span> <span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">Text</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Text</span><span class="o">&amp;</span> <span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="kt">void</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Text</span><span class="o">&amp;&amp;</span> <span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">c_str</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_str</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="kt">bool</span> <span class="nf">empty</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_str</span> <span class="o">==</span> <span class="k">nullptr</span> <span class="o">||</span> <span class="o">*</span><span class="n">_str</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="kt">char</span><span class="o">*</span> <span class="nf">release</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">_str</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="n">_str</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="n">result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="kt">char</span><span class="o">*</span> <span class="n">_str</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Like printf, but returns the formated text.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#if LOGURU_USE_FMTLIB
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">Text</span> <span class="nf">vtextprintf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">format_args</span> <span class="n">args</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">Text</span> <span class="n">textprintf</span><span class="p">(</span><span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="k">const</span> <span class="n">Args</span><span class="o">&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nf">vtextprintf</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">make_format_args</span><span class="p">(</span><span class="n">args</span><span class="p">...));</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">Text</span> <span class="nf">textprintf</span><span class="p">(</span><span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="p">...)</span> <span class="n">LOGURU_PRINTF_LIKE</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Overloaded for variadic template matching.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">Text</span> <span class="nf">textprintf</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">using</span> <span class="n">Verbosity</span> <span class="o">=</span> <span class="kt">int</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#undef FATAL
</span></span></span><span class="line"><span class="cl"><span class="cp">#undef ERROR
</span></span></span><span class="line"><span class="cl"><span class="cp">#undef WARNING
</span></span></span><span class="line"><span class="cl"><span class="cp">#undef INFO
</span></span></span><span class="line"><span class="cl"><span class="cp">#undef MAX
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">	<span class="k">enum</span> <span class="nc">NamedVerbosity</span> <span class="o">:</span> <span class="n">Verbosity</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// Used to mark an invalid verbosity. Do not log to this level.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">Verbosity_INVALID</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="c1">// Never do LOG_F(INVALID)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">		<span class="c1">// You may use Verbosity_OFF on g_stderr_verbosity, but for nothing else!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">Verbosity_OFF</span>     <span class="o">=</span> <span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="c1">// Never do LOG_F(OFF)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">		<span class="c1">// Prefer to use ABORT_F or ABORT_S over LOG_F(FATAL) or LOG_S(FATAL).
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">Verbosity_FATAL</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">Verbosity_ERROR</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">Verbosity_WARNING</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">// Normal messages. By default written to stderr.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">Verbosity_INFO</span>    <span class="o">=</span>  <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">// Same as Verbosity_INFO in every way.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">Verbosity_0</span>       <span class="o">=</span>  <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">// Verbosity levels 1-9 are generally not written to stderr, but are written to file.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">Verbosity_1</span>       <span class="o">=</span> <span class="o">+</span><span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">Verbosity_2</span>       <span class="o">=</span> <span class="o">+</span><span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">Verbosity_3</span>       <span class="o">=</span> <span class="o">+</span><span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">Verbosity_4</span>       <span class="o">=</span> <span class="o">+</span><span class="mi">4</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">Verbosity_5</span>       <span class="o">=</span> <span class="o">+</span><span class="mi">5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">Verbosity_6</span>       <span class="o">=</span> <span class="o">+</span><span class="mi">6</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">Verbosity_7</span>       <span class="o">=</span> <span class="o">+</span><span class="mi">7</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">Verbosity_8</span>       <span class="o">=</span> <span class="o">+</span><span class="mi">8</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">Verbosity_9</span>       <span class="o">=</span> <span class="o">+</span><span class="mi">9</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">// Don not use higher verbosity levels, as that will make grepping log files harder.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">Verbosity_MAX</span>     <span class="o">=</span> <span class="o">+</span><span class="mi">9</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">struct</span> <span class="nc">Message</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// You would generally print a Message by just concating the buffers without spacing.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// Optionally, ignore preamble and indentation.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">Verbosity</span>   <span class="n">verbosity</span><span class="p">;</span>   <span class="c1">// Already part of preamble
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">;</span>    <span class="c1">// Already part of preamble
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="kt">unsigned</span>    <span class="n">line</span><span class="p">;</span>        <span class="c1">// Already part of preamble
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">preamble</span><span class="p">;</span>    <span class="c1">// Date, time, uptime, thread, file:line, verbosity.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">indentation</span><span class="p">;</span> <span class="c1">// Just a bunch of spacing.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">prefix</span><span class="p">;</span>      <span class="c1">// Assertion failure info goes here (or &#34;&#34;).
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">message</span><span class="p">;</span>     <span class="c1">// User message goes here.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/* Everything with a verbosity equal or greater than g_stderr_verbosity will be
</span></span></span><span class="line"><span class="cl"><span class="cm">	written to stderr. You can set this in code or via the -v argument.
</span></span></span><span class="line"><span class="cl"><span class="cm">	Set to loguru::Verbosity_OFF to write nothing to stderr.
</span></span></span><span class="line"><span class="cl"><span class="cm">	Default is 0, i.e. only log ERROR, WARNING and INFO are written to stderr.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="k">extern</span> <span class="n">Verbosity</span> <span class="n">g_stderr_verbosity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="k">extern</span> <span class="kt">bool</span>      <span class="n">g_colorlogtostderr</span><span class="p">;</span> <span class="c1">// True by default.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span> <span class="k">extern</span> <span class="kt">unsigned</span>  <span class="n">g_flush_interval_ms</span><span class="p">;</span> <span class="c1">// 0 (unbuffered) by default.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span> <span class="k">extern</span> <span class="kt">bool</span>      <span class="n">g_preamble_header</span><span class="p">;</span> <span class="c1">// Prepend each log start by a descriptions line with all columns name? True by default.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span> <span class="k">extern</span> <span class="kt">bool</span>      <span class="n">g_preamble</span><span class="p">;</span> <span class="c1">// Prefix each log line with date, time etc? True by default.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="cm">/* Specify the verbosity used by loguru to log its info messages including the header
</span></span></span><span class="line"><span class="cl"><span class="cm">	logged when logged::init() is called or on exit. Default is 0 (INFO).
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="k">extern</span> <span class="n">Verbosity</span> <span class="n">g_internal_verbosity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Turn off individual parts of the preamble
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span> <span class="k">extern</span> <span class="kt">bool</span>      <span class="n">g_preamble_date</span><span class="p">;</span> <span class="c1">// The date field
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span> <span class="k">extern</span> <span class="kt">bool</span>      <span class="n">g_preamble_time</span><span class="p">;</span> <span class="c1">// The time of the current day
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span> <span class="k">extern</span> <span class="kt">bool</span>      <span class="n">g_preamble_uptime</span><span class="p">;</span> <span class="c1">// The time since init call
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span> <span class="k">extern</span> <span class="kt">bool</span>      <span class="n">g_preamble_thread</span><span class="p">;</span> <span class="c1">// The logging thread
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span> <span class="k">extern</span> <span class="kt">bool</span>      <span class="n">g_preamble_file</span><span class="p">;</span> <span class="c1">// The file from which the log originates from
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span> <span class="k">extern</span> <span class="kt">bool</span>      <span class="n">g_preamble_verbose</span><span class="p">;</span> <span class="c1">// The verbosity field
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span> <span class="k">extern</span> <span class="kt">bool</span>      <span class="n">g_preamble_pipe</span><span class="p">;</span> <span class="c1">// The pipe symbol right before the message
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">// May not throw!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">*</span><span class="n">log_handler_t</span><span class="p">)(</span><span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">,</span> <span class="k">const</span> <span class="n">Message</span><span class="o">&amp;</span> <span class="n">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">*</span><span class="n">close_handler_t</span><span class="p">)(</span><span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">*</span><span class="n">flush_handler_t</span><span class="p">)(</span><span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// May throw if that&#39;s how you&#39;d like to handle your errors.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">*</span><span class="n">fatal_handler_t</span><span class="p">)(</span><span class="k">const</span> <span class="n">Message</span><span class="o">&amp;</span> <span class="n">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Given a verbosity level, return the level&#39;s name or nullptr.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">typedef</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="p">(</span><span class="o">*</span><span class="n">verbosity_to_name_t</span><span class="p">)(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Given a verbosity level name, return the verbosity level or
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Verbosity_INVALID if name is not recognized.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">typedef</span> <span class="nf">Verbosity</span> <span class="p">(</span><span class="o">*</span><span class="n">name_to_verbosity_t</span><span class="p">)(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Runtime options passed to loguru::init
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">struct</span> <span class="nc">Options</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// This allows you to use something else instead of &#34;-v&#34; via verbosity_flag.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// Set to nullptr to if you don&#39;t want Loguru to parse verbosity from the args.&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">verbosity_flag</span> <span class="o">=</span> <span class="s">&#34;-v&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">// loguru::init will set the name of the calling thread to this.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// If you don&#39;t want Loguru to set the name of the main thread,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// set this to nullptr.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// NOTE: on SOME platforms loguru::init will only overwrite the thread name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// if a thread name has not already been set.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// To always set a thread name, use loguru::set_thread_name instead.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">main_thread_name</span> <span class="o">=</span> <span class="s">&#34;main thread&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">// Make Loguru try to do unsafe but useful things,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// like printing a stack trace, when catching signals.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// This may lead to bad things like deadlocks in certain situations.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="kt">bool</span> <span class="n">unsafe_signal_handler</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/*  Should be called from the main thread.
</span></span></span><span class="line"><span class="cl"><span class="cm">		You don&#39;t *need* to call this, but if you do you get:
</span></span></span><span class="line"><span class="cl"><span class="cm">			* Signal handlers installed
</span></span></span><span class="line"><span class="cl"><span class="cm">			* Program arguments logged
</span></span></span><span class="line"><span class="cl"><span class="cm">			* Working dir logged
</span></span></span><span class="line"><span class="cl"><span class="cm">			* Optional -v verbosity flag parsed
</span></span></span><span class="line"><span class="cl"><span class="cm">			* Main thread name set to &#34;main thread&#34;
</span></span></span><span class="line"><span class="cl"><span class="cm">			* Explanation of the preamble (date, threanmae etc) logged
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">		loguru::init() will look for arguments meant for loguru and remove them.
</span></span></span><span class="line"><span class="cl"><span class="cm">		Arguments meant for loguru are:
</span></span></span><span class="line"><span class="cl"><span class="cm">			-v n   Set loguru::g_stderr_verbosity level. Examples:
</span></span></span><span class="line"><span class="cl"><span class="cm">				-v 3        Show verbosity level 3 and lower.
</span></span></span><span class="line"><span class="cl"><span class="cm">				-v 0        Only show INFO, WARNING, ERROR, FATAL (default).
</span></span></span><span class="line"><span class="cl"><span class="cm">				-v INFO     Only show INFO, WARNING, ERROR, FATAL (default).
</span></span></span><span class="line"><span class="cl"><span class="cm">				-v WARNING  Only show WARNING, ERROR, FATAL.
</span></span></span><span class="line"><span class="cl"><span class="cm">				-v ERROR    Only show ERROR, FATAL.
</span></span></span><span class="line"><span class="cl"><span class="cm">				-v FATAL    Only show FATAL.
</span></span></span><span class="line"><span class="cl"><span class="cm">				-v OFF      Turn off logging to stderr.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">		Tip: You can set g_stderr_verbosity before calling loguru::init.
</span></span></span><span class="line"><span class="cl"><span class="cm">		That way you can set the default but have the user override it with the -v flag.
</span></span></span><span class="line"><span class="cl"><span class="cm">		Note that -v does not affect file logging (see loguru::add_file).
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">		You can you something other than the -v flag by setting the verbosity_flag option.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">init</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[],</span> <span class="k">const</span> <span class="n">Options</span><span class="o">&amp;</span> <span class="n">options</span> <span class="o">=</span> <span class="p">{});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Will call remove_all_callbacks(). After calling this, logging will still go to stderr.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// You generally don&#39;t need to call this.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">shutdown</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// What ~ will be replaced with, e.g. &#34;/home/your_user_name/&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">home_dir</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/* Returns the name of the app as given in argv[0] but without leading path.
</span></span></span><span class="line"><span class="cl"><span class="cm">	   That is, if argv[0] is &#34;../foo/app&#34; this will return &#34;app&#34;.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">argv0_filename</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Returns all arguments given to loguru::init(), but escaped with a single space as separator.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">arguments</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Returns the path to the current working dir when loguru::init() was called.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">current_dir</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Returns the part of the path after the last / or \ (if any).
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">filename</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// e.g. &#34;foo/bar/baz.ext&#34; will create the directories &#34;foo/&#34; and &#34;foo/bar/&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">bool</span> <span class="nf">create_directories</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file_path_const</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Writes date and time with millisecond precision, e.g. &#34;20151017_161503.123&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">write_date_time</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">buff</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">buff_size</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Helper: thread-safe version strerror
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">Text</span> <span class="nf">errno_as_text</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/* Given a prefix of e.g. &#34;~/loguru/&#34; this might return
</span></span></span><span class="line"><span class="cl"><span class="cm">	   &#34;/home/your_username/loguru/app_name/20151017_161503.123.log&#34;
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	   where &#34;app_name&#34; is a sanitized version of argv[0].
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">suggest_log_path</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">prefix</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">buff</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">buff_size</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">enum</span> <span class="nc">FileMode</span> <span class="p">{</span> <span class="n">Truncate</span><span class="p">,</span> <span class="n">Append</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/*  Will log to a file at the given path.
</span></span></span><span class="line"><span class="cl"><span class="cm">		Any logging message with a verbosity lower or equal to
</span></span></span><span class="line"><span class="cl"><span class="cm">		the given verbosity will be included.
</span></span></span><span class="line"><span class="cl"><span class="cm">		The function will create all directories in &#39;path&#39; if needed.
</span></span></span><span class="line"><span class="cl"><span class="cm">		If path starts with a ~, it will be replaced with loguru::home_dir()
</span></span></span><span class="line"><span class="cl"><span class="cm">		To stop the file logging, just call loguru::remove_callback(path) with the same path.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">bool</span> <span class="nf">add_file</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">path</span><span class="p">,</span> <span class="n">FileMode</span> <span class="n">mode</span><span class="p">,</span> <span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/*  Will be called right before abort().
</span></span></span><span class="line"><span class="cl"><span class="cm">		You can for instance use this to print custom error messages, or throw an exception.
</span></span></span><span class="line"><span class="cl"><span class="cm">		Feel free to call LOG:ing function from this, but not FATAL ones! */</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">set_fatal_handler</span><span class="p">(</span><span class="n">fatal_handler_t</span> <span class="n">handler</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Get the current fatal handler, if any. Default value is nullptr.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">fatal_handler_t</span> <span class="nf">get_fatal_handler</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/*  Will be called on each log messages with a verbosity less or equal to the given one.
</span></span></span><span class="line"><span class="cl"><span class="cm">		Useful for displaying messages on-screen in a game, for example.
</span></span></span><span class="line"><span class="cl"><span class="cm">		The given on_close is also expected to flush (if desired).
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">add_callback</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span>     <span class="n">id</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">log_handler_t</span>   <span class="n">callback</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="kt">void</span><span class="o">*</span>           <span class="n">user_data</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">Verbosity</span>       <span class="n">verbosity</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">close_handler_t</span> <span class="n">on_close</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">flush_handler_t</span> <span class="n">on_flush</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/*  Set a callback that returns custom verbosity level names. If callback
</span></span></span><span class="line"><span class="cl"><span class="cm">		is nullptr or returns nullptr, default log names will be used.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">set_verbosity_to_name_callback</span><span class="p">(</span><span class="n">verbosity_to_name_t</span> <span class="n">callback</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/*  Set a callback that returns the verbosity level matching a name. The
</span></span></span><span class="line"><span class="cl"><span class="cm">		callback should return Verbosity_INVALID if the name is not
</span></span></span><span class="line"><span class="cl"><span class="cm">		recognized.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">set_name_to_verbosity_callback</span><span class="p">(</span><span class="n">name_to_verbosity_t</span> <span class="n">callback</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/*  Get a custom name for a specific verbosity, if one exists, or nullptr. */</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">get_verbosity_name</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/*  Get the verbosity enum value from a custom 4-character level name, if one exists.
</span></span></span><span class="line"><span class="cl"><span class="cm">		If the name does not match a custom level name, Verbosity_INVALID is returned.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">Verbosity</span> <span class="nf">get_verbosity_from_name</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Returns true iff the callback was found (and removed).
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">bool</span> <span class="nf">remove_callback</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Shut down all file logging and any other callback hooks installed.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">remove_all_callbacks</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Returns the maximum of g_stderr_verbosity and all file/custom outputs.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">Verbosity</span> <span class="nf">current_verbosity_cutoff</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_USE_FMTLIB
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Internal functions
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">void</span> <span class="nf">vlog</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">format_args</span> <span class="n">args</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">raw_vlog</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">format_args</span> <span class="n">args</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Actual logging function. Use the LOG macro instead of calling this directly.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="n">log</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="k">const</span> <span class="n">Args</span> <span class="o">&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	    <span class="n">vlog</span><span class="p">(</span><span class="n">verbosity</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">make_format_args</span><span class="p">(</span><span class="n">args</span><span class="p">...));</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Log without any preamble or indentation.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="n">raw_log</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="k">const</span> <span class="n">Args</span> <span class="o">&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	    <span class="n">raw_vlog</span><span class="p">(</span><span class="n">verbosity</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">make_format_args</span><span class="p">(</span><span class="n">args</span><span class="p">...));</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else </span><span class="c1">// LOGURU_USE_FMTLIB?
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Actual logging function. Use the LOG macro instead of calling this directly.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="p">...)</span> <span class="n">LOGURU_PRINTF_LIKE</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Log without any preamble or indentation.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">raw_log</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="p">...)</span> <span class="n">LOGURU_PRINTF_LIKE</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// !LOGURU_USE_FMTLIB
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Helper class for LOG_SCOPE_F
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">class</span> <span class="nc">LOGURU_EXPORT</span> <span class="n">LogScopeRAII</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">LogScopeRAII</span><span class="p">()</span> <span class="o">:</span> <span class="n">_file</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// No logging
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">LogScopeRAII</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="p">...)</span> <span class="n">LOGURU_PRINTF_LIKE</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="o">~</span><span class="n">LogScopeRAII</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#if defined(_MSC_VER) &amp;&amp; _MSC_VER &gt; 1800
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>		<span class="c1">// older MSVC default move ctors close the scope on move. See
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// issue #43
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">LogScopeRAII</span><span class="p">(</span><span class="n">LogScopeRAII</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="o">:</span> <span class="n">_verbosity</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">_verbosity</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">,</span> <span class="n">_file</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">_file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">,</span> <span class="n">_line</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">_line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">,</span> <span class="n">_indent_stderr</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">_indent_stderr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">,</span> <span class="n">_start_time_ns</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">_start_time_ns</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="c1">// Make sure the tmp object&#39;s destruction doesn&#39;t close the scope:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="n">other</span><span class="p">.</span><span class="n">_file</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">LOGURU_SCOPE_TEXT_SIZE</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="n">_name</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">other</span><span class="p">.</span><span class="n">_name</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>		<span class="n">LogScopeRAII</span><span class="p">(</span><span class="n">LogScopeRAII</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">	<span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">LogScopeRAII</span><span class="p">(</span><span class="k">const</span> <span class="n">LogScopeRAII</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">LogScopeRAII</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">LogScopeRAII</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="kt">void</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">LogScopeRAII</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="n">Verbosity</span>   <span class="n">_verbosity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">_file</span><span class="p">;</span> <span class="c1">// Set to null if we are disabled due to verbosity
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="kt">unsigned</span>    <span class="n">_line</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="kt">bool</span>        <span class="n">_indent_stderr</span><span class="p">;</span> <span class="c1">// Did we?
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="kt">long</span> <span class="kt">long</span>   <span class="n">_start_time_ns</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="kt">char</span>        <span class="n">_name</span><span class="p">[</span><span class="n">LOGURU_SCOPE_TEXT_SIZE</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">	<span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Marked as &#39;noreturn&#39; for the benefit of the static analyzer and optimizer.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// stack_trace_skip is the number of extrace stack frames to skip above log_and_abort.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#if LOGURU_USE_FMTLIB
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_NORETURN</span> <span class="kt">void</span> <span class="nf">vlog_and_abort</span><span class="p">(</span><span class="kt">int</span> <span class="n">stack_trace_skip</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">expr</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">format_args</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_NORETURN</span> <span class="kt">void</span> <span class="n">log_and_abort</span><span class="p">(</span><span class="kt">int</span> <span class="n">stack_trace_skip</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">expr</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="k">const</span> <span class="n">Args</span><span class="o">&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	    <span class="n">vlog_and_abort</span><span class="p">(</span><span class="n">stack_trace_skip</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">make_format_args</span><span class="p">(</span><span class="n">args</span><span class="p">...));</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_NORETURN</span> <span class="kt">void</span> <span class="nf">log_and_abort</span><span class="p">(</span><span class="kt">int</span> <span class="n">stack_trace_skip</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">expr</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="p">...)</span> <span class="n">LOGURU_PRINTF_LIKE</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_NORETURN</span> <span class="kt">void</span> <span class="nf">log_and_abort</span><span class="p">(</span><span class="kt">int</span> <span class="n">stack_trace_skip</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">expr</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Flush output to stderr and files.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If g_flush_interval_ms is set to non-zero, this will be called automatically this often.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If not set, you do not need to call this at all.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">flush</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span> <span class="kr">inline</span> <span class="n">Text</span> <span class="n">format_value</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span><span class="p">)</span>                    <span class="p">{</span> <span class="k">return</span> <span class="nf">textprintf</span><span class="p">(</span><span class="s">&#34;N/A&#34;</span><span class="p">);</span>     <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;&gt;</span>        <span class="kr">inline</span> <span class="n">Text</span> <span class="n">format_value</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span>               <span class="p">{</span> <span class="k">return</span> <span class="nf">textprintf</span><span class="p">(</span><span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">c</span><span class="p">),</span>   <span class="n">v</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;&gt;</span>        <span class="kr">inline</span> <span class="n">Text</span> <span class="n">format_value</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span>                <span class="p">{</span> <span class="k">return</span> <span class="nf">textprintf</span><span class="p">(</span><span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">d</span><span class="p">),</span>   <span class="n">v</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;&gt;</span>        <span class="kr">inline</span> <span class="n">Text</span> <span class="n">format_value</span><span class="p">(</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span>       <span class="p">{</span> <span class="k">return</span> <span class="nf">textprintf</span><span class="p">(</span><span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">u</span><span class="p">),</span>   <span class="n">v</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;&gt;</span>        <span class="kr">inline</span> <span class="n">Text</span> <span class="n">format_value</span><span class="p">(</span><span class="k">const</span> <span class="kt">long</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span>               <span class="p">{</span> <span class="k">return</span> <span class="nf">textprintf</span><span class="p">(</span><span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">lu</span><span class="p">),</span>  <span class="n">v</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;&gt;</span>        <span class="kr">inline</span> <span class="n">Text</span> <span class="n">format_value</span><span class="p">(</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span>      <span class="p">{</span> <span class="k">return</span> <span class="nf">textprintf</span><span class="p">(</span><span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">ld</span><span class="p">),</span>  <span class="n">v</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;&gt;</span>        <span class="kr">inline</span> <span class="n">Text</span> <span class="n">format_value</span><span class="p">(</span><span class="k">const</span> <span class="kt">long</span> <span class="kt">long</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span>          <span class="p">{</span> <span class="k">return</span> <span class="nf">textprintf</span><span class="p">(</span><span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">llu</span><span class="p">),</span> <span class="n">v</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;&gt;</span>        <span class="kr">inline</span> <span class="n">Text</span> <span class="n">format_value</span><span class="p">(</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">textprintf</span><span class="p">(</span><span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">lld</span><span class="p">),</span> <span class="n">v</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;&gt;</span>        <span class="kr">inline</span> <span class="n">Text</span> <span class="n">format_value</span><span class="p">(</span><span class="k">const</span> <span class="kt">float</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span>              <span class="p">{</span> <span class="k">return</span> <span class="nf">textprintf</span><span class="p">(</span><span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">f</span><span class="p">),</span>   <span class="n">v</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;&gt;</span>        <span class="kr">inline</span> <span class="n">Text</span> <span class="n">format_value</span><span class="p">(</span><span class="k">const</span> <span class="kt">double</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span>             <span class="p">{</span> <span class="k">return</span> <span class="nf">textprintf</span><span class="p">(</span><span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">f</span><span class="p">),</span>   <span class="n">v</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/* Thread names can be set for the benefit of readable logs.
</span></span></span><span class="line"><span class="cl"><span class="cm">	   If you do not set the thread name, a hex id will be shown instead.
</span></span></span><span class="line"><span class="cl"><span class="cm">	   These thread names may or may not be the same as the system thread names,
</span></span></span><span class="line"><span class="cl"><span class="cm">	   depending on the system.
</span></span></span><span class="line"><span class="cl"><span class="cm">	   Try to limit the thread name to 15 characters or less. */</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">set_thread_name</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/* Returns the thread name for this thread.
</span></span></span><span class="line"><span class="cl"><span class="cm">	   On OSX this will return the system thread name (settable from both within and without Loguru).
</span></span></span><span class="line"><span class="cl"><span class="cm">	   On other systems it will return whatever you set in set_thread_name();
</span></span></span><span class="line"><span class="cl"><span class="cm">	   If no thread name is set, this will return a hexadecimal thread id.
</span></span></span><span class="line"><span class="cl"><span class="cm">	   length should be the number of bytes available in the buffer.
</span></span></span><span class="line"><span class="cl"><span class="cm">	   17 is a good number for length.
</span></span></span><span class="line"><span class="cl"><span class="cm">	   right_align_hext_id means any hexadecimal thread id will be written to the end of buffer.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">get_thread_name</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">buffer</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">length</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">right_align_hext_id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/* Generates a readable stacktrace as a string.
</span></span></span><span class="line"><span class="cl"><span class="cm">	   &#39;skip&#39; specifies how many stack frames to skip.
</span></span></span><span class="line"><span class="cl"><span class="cm">	   For instance, the default skip (1) means:
</span></span></span><span class="line"><span class="cl"><span class="cm">	   don&#39;t include the call to loguru::stacktrace in the stack trace. */</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">Text</span> <span class="nf">stacktrace</span><span class="p">(</span><span class="kt">int</span> <span class="n">skip</span> <span class="o">=</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/*  Add a string to be replaced with something else in the stack output.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">		For instance, instead of having a stack trace look like this:
</span></span></span><span class="line"><span class="cl"><span class="cm">			0x41f541 some_function(std::basic_ofstream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;)
</span></span></span><span class="line"><span class="cl"><span class="cm">		You can clean it up with:
</span></span></span><span class="line"><span class="cl"><span class="cm">			auto verbose_type_name = loguru::demangle(typeid(std::ofstream).name());
</span></span></span><span class="line"><span class="cl"><span class="cm">			loguru::add_stack_cleanup(verbose_type_name.c_str(); &#34;std::ofstream&#34;);
</span></span></span><span class="line"><span class="cl"><span class="cm">		So the next time you will instead see:
</span></span></span><span class="line"><span class="cl"><span class="cm">			0x41f541 some_function(std::ofstream&amp;)
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">		`replace_with_this` must be shorter than `find_this`.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">add_stack_cleanup</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">find_this</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">replace_with_this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Example: demangle(typeid(std::ofstream).name()) -&gt; &#34;std::basic_ofstream&lt;char, std::char_traits&lt;char&gt; &gt;&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">Text</span> <span class="nf">demangle</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// ------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">	Not all terminals support colors, but if they do, and g_colorlogtostderr
</span></span></span><span class="line"><span class="cl"><span class="cm">	is set, Loguru will write them to stderr to make errors in red, etc.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	You also have the option to manually use them, via the function below.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Note, however, that if you do, the color codes could end up in your logfile!
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	This means if you intend to use them functions you should either:
</span></span></span><span class="line"><span class="cl"><span class="cm">		* Use them on the stderr/stdout directly (bypass Loguru).
</span></span></span><span class="line"><span class="cl"><span class="cm">		* Don&#39;t add file outputs to Loguru.
</span></span></span><span class="line"><span class="cl"><span class="cm">		* Expect some \e[1m things in your logfile.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Usage:
</span></span></span><span class="line"><span class="cl"><span class="cm">		printf(&#34;%sRed%sGreen%sBold green%sClear again\n&#34;,
</span></span></span><span class="line"><span class="cl"><span class="cm">			   loguru::terminal_red(), loguru::terminal_green(),
</span></span></span><span class="line"><span class="cl"><span class="cm">			   loguru::terminal_bold(), loguru::terminal_reset());
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	If the terminal at hand does not support colors the above output
</span></span></span><span class="line"><span class="cl"><span class="cm">	will just not have funky \e[1m things showing.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Do the output terminal support colors?
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">bool</span> <span class="nf">terminal_has_color</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Colors
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_black</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_red</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_green</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_yellow</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_blue</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_purple</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_cyan</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_light_gray</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_light_red</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_white</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Formating
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_bold</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_underline</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// You should end each line with this!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_reset</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// --------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Error context related:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="k">struct</span> <span class="nc">StringStream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Use this in your EcEntryBase::print_value overload.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">stream_print</span><span class="p">(</span><span class="n">StringStream</span><span class="o">&amp;</span> <span class="n">out_string_stream</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">text</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">LOGURU_EXPORT</span> <span class="n">EcEntryBase</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">EcEntryBase</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">descr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="o">~</span><span class="n">EcEntryBase</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="n">EcEntryBase</span><span class="p">(</span><span class="k">const</span> <span class="n">EcEntryBase</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">EcEntryBase</span><span class="p">(</span><span class="n">EcEntryBase</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">EcEntryBase</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">EcEntryBase</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">EcEntryBase</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">EcEntryBase</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="k">virtual</span> <span class="kt">void</span> <span class="nf">print_value</span><span class="p">(</span><span class="n">StringStream</span><span class="o">&amp;</span> <span class="n">out_string_stream</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="n">EcEntryBase</span><span class="o">*</span> <span class="nf">previous</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_previous</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// private:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span>  <span class="n">_file</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="kt">unsigned</span>     <span class="n">_line</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span>  <span class="n">_descr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">EcEntryBase</span><span class="o">*</span> <span class="n">_previous</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">EcEntryData</span> <span class="o">:</span> <span class="k">public</span> <span class="n">EcEntryBase</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="k">using</span> <span class="n">Printer</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="o">*</span><span class="p">)(</span><span class="n">T</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="n">EcEntryData</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">descr</span><span class="p">,</span> <span class="n">T</span> <span class="n">data</span><span class="p">,</span> <span class="n">Printer</span><span class="o">&amp;&amp;</span> <span class="n">printer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="o">:</span> <span class="n">EcEntryBase</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">descr</span><span class="p">),</span> <span class="n">_data</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">_printer</span><span class="p">(</span><span class="n">printer</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="k">virtual</span> <span class="kt">void</span> <span class="nf">print_value</span><span class="p">(</span><span class="n">StringStream</span><span class="o">&amp;</span> <span class="n">out_string_stream</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">const</span> <span class="k">auto</span> <span class="n">str</span> <span class="o">=</span> <span class="n">_printer</span><span class="p">(</span><span class="n">_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="n">stream_print</span><span class="p">(</span><span class="n">out_string_stream</span><span class="p">,</span> <span class="n">str</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">T</span>       <span class="n">_data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">Printer</span> <span class="n">_printer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// template&lt;typename Printer&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// class EcEntryLambda : public EcEntryBase
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// public:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// 	EcEntryLambda(const char* file, unsigned line, const char* descr, Printer&amp;&amp; printer)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// 		: EcEntryBase(file, line, descr), _printer(std::move(printer)) {}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">// 	virtual void print_value(StringStream&amp; out_string_stream) const override
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// 	{
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// 		const auto str = _printer();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// 		stream_print(out_string_stream, str.c_str());
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// 	}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">// private:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// 	Printer _printer;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// };
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">// template&lt;typename Printer&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// EcEntryLambda&lt;Printer&gt; make_ec_entry_lambda(const char* file, unsigned line, const char* descr, Printer&amp;&amp; printer)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// 	return {file, line, descr, std::move(printer)};
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// }
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">struct</span> <span class="nc">decay_char_array</span> <span class="p">{</span> <span class="k">using</span> <span class="n">type</span> <span class="o">=</span> <span class="n">T</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">template</span> <span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span>  <span class="n">N</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">struct</span> <span class="nc">decay_char_array</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">char</span><span class="p">(</span><span class="o">&amp;</span><span class="p">)[</span><span class="n">N</span><span class="p">]</span><span class="o">&gt;</span> <span class="p">{</span> <span class="k">using</span> <span class="n">type</span> <span class="o">=</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">struct</span> <span class="nc">make_const_ptr</span> <span class="p">{</span> <span class="k">using</span> <span class="n">type</span> <span class="o">=</span> <span class="n">T</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">struct</span> <span class="nc">make_const_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">*&gt;</span> <span class="p">{</span> <span class="k">using</span> <span class="n">type</span> <span class="o">=</span> <span class="k">const</span> <span class="n">T</span><span class="o">*</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">struct</span> <span class="nc">make_ec_type</span> <span class="p">{</span> <span class="k">using</span> <span class="n">type</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">make_const_ptr</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">decay_char_array</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">type</span><span class="o">&gt;::</span><span class="n">type</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/* 	A stack trace gives you the names of the function at the point of a crash.
</span></span></span><span class="line"><span class="cl"><span class="cm">		With ERROR_CONTEXT, you can also get the values of select local variables.
</span></span></span><span class="line"><span class="cl"><span class="cm">		Usage:
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">		void process_customers(const std::string&amp; filename)
</span></span></span><span class="line"><span class="cl"><span class="cm">		{
</span></span></span><span class="line"><span class="cl"><span class="cm">			ERROR_CONTEXT(&#34;Processing file&#34;, filename.c_str());
</span></span></span><span class="line"><span class="cl"><span class="cm">			for (int customer_index : ...)
</span></span></span><span class="line"><span class="cl"><span class="cm">			{
</span></span></span><span class="line"><span class="cl"><span class="cm">				ERROR_CONTEXT(&#34;Customer index&#34;, customer_index);
</span></span></span><span class="line"><span class="cl"><span class="cm">				...
</span></span></span><span class="line"><span class="cl"><span class="cm">			}
</span></span></span><span class="line"><span class="cl"><span class="cm">		}
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">		The context is in effect during the scope of the ERROR_CONTEXT.
</span></span></span><span class="line"><span class="cl"><span class="cm">		Use loguru::get_error_context() to get the contents of the active error contexts.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">		Example result:
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">		------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="cm">		[ErrorContext]                main.cpp:416   Processing file:    &#34;customers.json&#34;
</span></span></span><span class="line"><span class="cl"><span class="cm">		[ErrorContext]                main.cpp:417   Customer index:     42
</span></span></span><span class="line"><span class="cl"><span class="cm">		------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">		Error contexts are printed automatically on crashes, and only on crashes.
</span></span></span><span class="line"><span class="cl"><span class="cm">		This makes them much faster than logging the value of a variable.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="cp">#define ERROR_CONTEXT(descr, data)                                             \
</span></span></span><span class="line"><span class="cl"><span class="cp">		const loguru::EcEntryData&lt;loguru::make_ec_type&lt;decltype(data)&gt;::type&gt;      \
</span></span></span><span class="line"><span class="cl"><span class="cp">			LOGURU_ANONYMOUS_VARIABLE(error_context_scope_)(                       \
</span></span></span><span class="line"><span class="cl"><span class="cp">				__FILE__, __LINE__, descr, data,                                   \
</span></span></span><span class="line"><span class="cl"><span class="cp">				static_cast&lt;loguru::EcEntryData&lt;loguru::make_ec_type&lt;decltype(data)&gt;::type&gt;::Printer&gt;(loguru::ec_to_text) ) </span><span class="c1">// For better error messages
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">	#define ERROR_CONTEXT(descr, data)                                 \
</span></span></span><span class="line"><span class="cl"><span class="cm">		const auto LOGURU_ANONYMOUS_VARIABLE(error_context_scope_)(    \
</span></span></span><span class="line"><span class="cl"><span class="cm">			loguru::make_ec_entry_lambda(__FILE__, __LINE__, descr,    \
</span></span></span><span class="line"><span class="cl"><span class="cm">				[=](){ return loguru::ec_to_text(data); }))
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">using</span> <span class="n">EcHandle</span> <span class="o">=</span> <span class="k">const</span> <span class="n">EcEntryBase</span><span class="o">*</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">		Get a light-weight handle to the error context stack on this thread.
</span></span></span><span class="line"><span class="cl"><span class="cm">		The handle is valid as long as the current thread has no changes to its error context stack.
</span></span></span><span class="line"><span class="cl"><span class="cm">		You can pass the handle to loguru::get_error_context on another thread.
</span></span></span><span class="line"><span class="cl"><span class="cm">		This can be very useful for when you have a parent thread spawning several working threads,
</span></span></span><span class="line"><span class="cl"><span class="cm">		and you want the error context of the parent thread to get printed (too) when there is an
</span></span></span><span class="line"><span class="cl"><span class="cm">		error on the child thread. You can accomplish this thusly:
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">		void foo(const char* parameter)
</span></span></span><span class="line"><span class="cl"><span class="cm">		{
</span></span></span><span class="line"><span class="cl"><span class="cm">			ERROR_CONTEXT(&#34;parameter&#34;, parameter)
</span></span></span><span class="line"><span class="cl"><span class="cm">			const auto parent_ec_handle = loguru::get_thread_ec_handle();
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">			std::thread([=]{
</span></span></span><span class="line"><span class="cl"><span class="cm">				loguru::set_thread_name(&#34;child thread&#34;);
</span></span></span><span class="line"><span class="cl"><span class="cm">				ERROR_CONTEXT(&#34;parent context&#34;, parent_ec_handle);
</span></span></span><span class="line"><span class="cl"><span class="cm">				dangerous_code();
</span></span></span><span class="line"><span class="cl"><span class="cm">			}.join();
</span></span></span><span class="line"><span class="cl"><span class="cm">		}
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">EcHandle</span> <span class="nf">get_thread_ec_handle</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Get a string describing the current stack of error context. Empty string if there is none.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">Text</span> <span class="nf">get_error_context</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Get a string describing the error context of the given thread handle.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">Text</span> <span class="nf">get_error_context_for</span><span class="p">(</span><span class="n">EcHandle</span> <span class="n">ec_handle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// ------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="n">Text</span> <span class="nf">ec_to_text</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="n">Text</span> <span class="nf">ec_to_text</span><span class="p">(</span><span class="kt">char</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="n">Text</span> <span class="nf">ec_to_text</span><span class="p">(</span><span class="kt">int</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="n">Text</span> <span class="nf">ec_to_text</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="n">Text</span> <span class="nf">ec_to_text</span><span class="p">(</span><span class="kt">long</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="n">Text</span> <span class="nf">ec_to_text</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="n">Text</span> <span class="nf">ec_to_text</span><span class="p">(</span><span class="kt">long</span> <span class="kt">long</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="n">Text</span> <span class="nf">ec_to_text</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="n">Text</span> <span class="nf">ec_to_text</span><span class="p">(</span><span class="kt">float</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="n">Text</span> <span class="nf">ec_to_text</span><span class="p">(</span><span class="kt">double</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="n">Text</span> <span class="nf">ec_to_text</span><span class="p">(</span><span class="kt">long</span> <span class="kt">double</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOGURU_EXPORT</span> <span class="n">Text</span> <span class="nf">ec_to_text</span><span class="p">(</span><span class="n">EcHandle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">	You can add ERROR_CONTEXT support for your own types by overloading ec_to_text. Here&#39;s how:
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	some.hpp:
</span></span></span><span class="line"><span class="cl"><span class="cm">		namespace loguru {
</span></span></span><span class="line"><span class="cl"><span class="cm">			Text ec_to_text(MySmallType data)
</span></span></span><span class="line"><span class="cl"><span class="cm">			Text ec_to_text(const MyBigType* data)
</span></span></span><span class="line"><span class="cl"><span class="cm">		} // namespace loguru
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	some.cpp:
</span></span></span><span class="line"><span class="cl"><span class="cm">		namespace loguru {
</span></span></span><span class="line"><span class="cl"><span class="cm">			Text ec_to_text(MySmallType small_value)
</span></span></span><span class="line"><span class="cl"><span class="cm">			{
</span></span></span><span class="line"><span class="cl"><span class="cm">				// Called only when needed, i.e. on a crash.
</span></span></span><span class="line"><span class="cl"><span class="cm">				std::string str = small_value.as_string(); // Format &#39;small_value&#39; here somehow.
</span></span></span><span class="line"><span class="cl"><span class="cm">				return Text{STRDUP(str.c_str())};
</span></span></span><span class="line"><span class="cl"><span class="cm">			}
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">			Text ec_to_text(const MyBigType* big_value)
</span></span></span><span class="line"><span class="cl"><span class="cm">			{
</span></span></span><span class="line"><span class="cl"><span class="cm">				// Called only when needed, i.e. on a crash.
</span></span></span><span class="line"><span class="cl"><span class="cm">				std::string str = big_value-&gt;as_string(); // Format &#39;big_value&#39; here somehow.
</span></span></span><span class="line"><span class="cl"><span class="cm">				return Text{STRDUP(str.c_str())};
</span></span></span><span class="line"><span class="cl"><span class="cm">			}
</span></span></span><span class="line"><span class="cl"><span class="cm">		} // namespace loguru
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Any file that include some.hpp:
</span></span></span><span class="line"><span class="cl"><span class="cm">		void foo(MySmallType small, const MyBigType&amp; big)
</span></span></span><span class="line"><span class="cl"><span class="cm">		{
</span></span></span><span class="line"><span class="cl"><span class="cm">			ERROR_CONTEXT(&#34;Small&#34;, small); // Copy ´small` by value.
</span></span></span><span class="line"><span class="cl"><span class="cm">			ERROR_CONTEXT(&#34;Big&#34;,   &amp;big);  // `big` should not change during this scope!
</span></span></span><span class="line"><span class="cl"><span class="cm">			....
</span></span></span><span class="line"><span class="cl"><span class="cm">		}
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace loguru
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// --------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1">// Logging macros
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// LOG_F(2, &#34;Only logged if verbosity is 2 or higher: %d&#34;, some_number);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define VLOG_F(verbosity, ...)                                                                     \
</span></span></span><span class="line"><span class="cl"><span class="cp">	((verbosity) &gt; loguru::current_verbosity_cutoff()) ? (void)0                                   \
</span></span></span><span class="line"><span class="cl"><span class="cp">									  : loguru::log(verbosity, __FILE__, __LINE__, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// LOG_F(INFO, &#34;Foo: %d&#34;, some_number);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define LOG_F(verbosity_name, ...) VLOG_F(loguru::Verbosity_ ## verbosity_name, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define VLOG_IF_F(verbosity, cond, ...)                                                            \
</span></span></span><span class="line"><span class="cl"><span class="cp">	((verbosity) &gt; loguru::current_verbosity_cutoff() || (cond) == false)                          \
</span></span></span><span class="line"><span class="cl"><span class="cp">		? (void)0                                                                                  \
</span></span></span><span class="line"><span class="cl"><span class="cp">		: loguru::log(verbosity, __FILE__, __LINE__, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define LOG_IF_F(verbosity_name, cond, ...)                                                        \
</span></span></span><span class="line"><span class="cl"><span class="cp">	VLOG_IF_F(loguru::Verbosity_ ## verbosity_name, cond, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define VLOG_SCOPE_F(verbosity, ...)                                                               \
</span></span></span><span class="line"><span class="cl"><span class="cp">	loguru::LogScopeRAII LOGURU_ANONYMOUS_VARIABLE(error_context_RAII_) =                          \
</span></span></span><span class="line"><span class="cl"><span class="cp">	((verbosity) &gt; loguru::current_verbosity_cutoff()) ? loguru::LogScopeRAII() :                  \
</span></span></span><span class="line"><span class="cl"><span class="cp">	loguru::LogScopeRAII(verbosity, __FILE__, __LINE__, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Raw logging - no preamble, no indentation. Slightly faster than full logging.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define RAW_VLOG_F(verbosity, ...)                                                                 \
</span></span></span><span class="line"><span class="cl"><span class="cp">	((verbosity) &gt; loguru::current_verbosity_cutoff()) ? (void)0                                   \
</span></span></span><span class="line"><span class="cl"><span class="cp">									  : loguru::raw_log(verbosity, __FILE__, __LINE__, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define RAW_LOG_F(verbosity_name, ...) RAW_VLOG_F(loguru::Verbosity_ ## verbosity_name, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Use to book-end a scope. Affects logging on all threads.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define LOG_SCOPE_F(verbosity_name, ...)                                                           \
</span></span></span><span class="line"><span class="cl"><span class="cp">	VLOG_SCOPE_F(loguru::Verbosity_ ## verbosity_name, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define LOG_SCOPE_FUNCTION(verbosity_name) LOG_SCOPE_F(verbosity_name, __func__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// -----------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1">// ABORT_F macro. Usage:  ABORT_F(&#34;Cause of error: %s&#34;, error_str);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Message is optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define ABORT_F(...) loguru::log_and_abort(0, &#34;ABORT: &#34;, __FILE__, __LINE__, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// --------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1">// CHECK_F macros:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_WITH_INFO_F(test, info, ...)                                                         \
</span></span></span><span class="line"><span class="cl"><span class="cp">	LOGURU_PREDICT_TRUE((test) == true) ? (void)0 : loguru::log_and_abort(0, &#34;CHECK FAILED:  &#34; info &#34;  &#34;, __FILE__,      \
</span></span></span><span class="line"><span class="cl"><span class="cp">													   __LINE__, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cm">/* Checked at runtime too. Will print error, then call fatal_handler (if any), then &#39;abort&#39;.
</span></span></span><span class="line"><span class="cl"><span class="cm">   Note that the test must be boolean.
</span></span></span><span class="line"><span class="cl"><span class="cm">   CHECK_F(ptr); will not compile, but CHECK_F(ptr != nullptr); will. */</span>
</span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_F(test, ...) CHECK_WITH_INFO_F(test, #test, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_NOTNULL_F(x, ...) CHECK_WITH_INFO_F((x) != nullptr, #x &#34; != nullptr&#34;, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_OP_F(expr_left, expr_right, op, ...)                                                 \
</span></span></span><span class="line"><span class="cl"><span class="cp">	do                                                                                             \
</span></span></span><span class="line"><span class="cl"><span class="cp">	{                                                                                              \
</span></span></span><span class="line"><span class="cl"><span class="cp">		auto val_left = expr_left;                                                                 \
</span></span></span><span class="line"><span class="cl"><span class="cp">		auto val_right = expr_right;                                                               \
</span></span></span><span class="line"><span class="cl"><span class="cp">		if (! LOGURU_PREDICT_TRUE(val_left op val_right))                                          \
</span></span></span><span class="line"><span class="cl"><span class="cp">		{                                                                                          \
</span></span></span><span class="line"><span class="cl"><span class="cp">			auto str_left = loguru::format_value(val_left);                                        \
</span></span></span><span class="line"><span class="cl"><span class="cp">			auto str_right = loguru::format_value(val_right);                                      \
</span></span></span><span class="line"><span class="cl"><span class="cp">			auto fail_info = loguru::textprintf(&#34;CHECK FAILED:  &#34; LOGURU_FMT(s) &#34; &#34; LOGURU_FMT(s) &#34; &#34; LOGURU_FMT(s) &#34;  (&#34; LOGURU_FMT(s) &#34; &#34; LOGURU_FMT(s) &#34; &#34; LOGURU_FMT(s) &#34;)  &#34;,           \
</span></span></span><span class="line"><span class="cl"><span class="cp">				#expr_left, #op, #expr_right, str_left.c_str(), #op, str_right.c_str());           \
</span></span></span><span class="line"><span class="cl"><span class="cp">			auto user_msg = loguru::textprintf(__VA_ARGS__);                                       \
</span></span></span><span class="line"><span class="cl"><span class="cp">			loguru::log_and_abort(0, fail_info.c_str(), __FILE__, __LINE__,                        \
</span></span></span><span class="line"><span class="cl"><span class="cp">			                      LOGURU_FMT(s), user_msg.c_str());                                         \
</span></span></span><span class="line"><span class="cl"><span class="cp">		}                                                                                          \
</span></span></span><span class="line"><span class="cl"><span class="cp">	} while (false)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_DEBUG_LOGGING
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#ifndef NDEBUG
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>		<span class="cp">#define LOGURU_DEBUG_LOGGING 1
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>		<span class="cp">#define LOGURU_DEBUG_LOGGING 0
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_DEBUG_LOGGING
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Debug logging enabled:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define DLOG_F(verbosity_name, ...)     LOG_F(verbosity_name, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DVLOG_F(verbosity, ...)         VLOG_F(verbosity, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DLOG_IF_F(verbosity_name, ...)  LOG_IF_F(verbosity_name, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DVLOG_IF_F(verbosity, ...)      VLOG_IF_F(verbosity, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DRAW_LOG_F(verbosity_name, ...) RAW_LOG_F(verbosity_name, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DRAW_VLOG_F(verbosity, ...)     RAW_VLOG_F(verbosity, __VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Debug logging disabled:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define DLOG_F(verbosity_name, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DVLOG_F(verbosity, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DLOG_IF_F(verbosity_name, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DVLOG_IF_F(verbosity, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DRAW_LOG_F(verbosity_name, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DRAW_VLOG_F(verbosity, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_EQ_F(a, b, ...) CHECK_OP_F(a, b, ==, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_NE_F(a, b, ...) CHECK_OP_F(a, b, !=, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_LT_F(a, b, ...) CHECK_OP_F(a, b, &lt; , ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_GT_F(a, b, ...) CHECK_OP_F(a, b, &gt; , ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_LE_F(a, b, ...) CHECK_OP_F(a, b, &lt;=, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_GE_F(a, b, ...) CHECK_OP_F(a, b, &gt;=, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_DEBUG_CHECKS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#ifndef NDEBUG
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>		<span class="cp">#define LOGURU_DEBUG_CHECKS 1
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>		<span class="cp">#define LOGURU_DEBUG_CHECKS 0
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_DEBUG_CHECKS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Debug checks enabled:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define DCHECK_F(test, ...)             CHECK_F(test, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_NOTNULL_F(x, ...)        CHECK_NOTNULL_F(x, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_EQ_F(a, b, ...)          CHECK_EQ_F(a, b, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_NE_F(a, b, ...)          CHECK_NE_F(a, b, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_LT_F(a, b, ...)          CHECK_LT_F(a, b, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_LE_F(a, b, ...)          CHECK_LE_F(a, b, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_GT_F(a, b, ...)          CHECK_GT_F(a, b, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_GE_F(a, b, ...)          CHECK_GE_F(a, b, ##__VA_ARGS__)
</span></span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Debug checks disabled:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define DCHECK_F(test, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_NOTNULL_F(x, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_EQ_F(a, b, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_NE_F(a, b, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_LT_F(a, b, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_LE_F(a, b, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_GT_F(a, b, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_GE_F(a, b, ...)
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// NDEBUG
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_REDEFINE_ASSERT
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef assert
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#ifndef NDEBUG
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>		<span class="c1">// Debug:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="cp">#define assert(test) CHECK_WITH_INFO_F(!!(test), #test) </span><span class="c1">// HACK
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>		<span class="cp">#define assert(test)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// LOGURU_REDEFINE_ASSERT
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// LOGURU_HAS_DECLARED_FORMAT_HEADER
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ----------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1">// .dP&#34;Y8 888888 88&#34;&#34;Yb 888888    db    8b    d8 .dP&#34;Y8
</span></span></span><span class="line"><span class="cl"><span class="c1">// `Ybo.&#34;   88   88__dP 88__     dPYb   88b  d88 `Ybo.&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1">// o.`Y8b   88   88&#34;Yb  88&#34;&#34;    dP__Yb  88YbdP88 o.`Y8b
</span></span></span><span class="line"><span class="cl"><span class="c1">// 8bodP&#39;   88   88  Yb 888888 dP&#34;&#34;&#34;&#34;Yb 88 YY 88 8bodP&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_WITH_STREAMS
</span></span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_HAS_DECLARED_STREAMS_HEADER
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_HAS_DECLARED_STREAMS_HEADER
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cm">/* This file extends loguru to enable std::stream-style logging, a la Glog.
</span></span></span><span class="line"><span class="cl"><span class="cm">   It&#39;s an optional feature behind the LOGURU_WITH_STREAMS settings
</span></span></span><span class="line"><span class="cl"><span class="cm">   because including it everywhere will slow down compilation times.
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdarg&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;sstream&gt;</span><span class="cp"> </span><span class="c1">// Adds about 38 kLoC on clang.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">loguru</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Like sprintf, but returns the formated text.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">strprintf</span><span class="p">(</span><span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="p">...)</span> <span class="n">LOGURU_PRINTF_LIKE</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Like vsprintf, but returns the formated text.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LOGURU_EXPORT</span>
</span></span><span class="line"><span class="cl">	<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">vstrprintf</span><span class="p">(</span><span class="n">LOGURU_FORMAT_STRING_TYPE</span> <span class="n">format</span><span class="p">,</span> <span class="n">va_list</span><span class="p">)</span> <span class="n">LOGURU_PRINTF_LIKE</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">LOGURU_EXPORT</span> <span class="n">StreamLogger</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">StreamLogger</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">)</span> <span class="o">:</span> <span class="n">_verbosity</span><span class="p">(</span><span class="n">verbosity</span><span class="p">),</span> <span class="n">_file</span><span class="p">(</span><span class="n">file</span><span class="p">),</span> <span class="n">_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">		<span class="o">~</span><span class="n">StreamLogger</span><span class="p">()</span> <span class="k">noexcept</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="n">StreamLogger</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">_ss</span> <span class="o">&lt;&lt;</span> <span class="n">t</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">// std::endl and other iomanip:s.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">StreamLogger</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span><span class="p">(</span><span class="o">*</span><span class="n">f</span><span class="p">)(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">f</span><span class="p">(</span><span class="n">_ss</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">Verbosity</span>   <span class="n">_verbosity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">_file</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="kt">unsigned</span>    <span class="n">_line</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">std</span><span class="o">::</span><span class="n">ostringstream</span> <span class="n">_ss</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">LOGURU_EXPORT</span> <span class="n">AbortLogger</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">AbortLogger</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">expr</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">)</span> <span class="o">:</span> <span class="n">_expr</span><span class="p">(</span><span class="n">expr</span><span class="p">),</span> <span class="n">_file</span><span class="p">(</span><span class="n">file</span><span class="p">),</span> <span class="n">_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="n">LOGURU_NORETURN</span> <span class="o">~</span><span class="n">AbortLogger</span><span class="p">()</span> <span class="k">noexcept</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="n">AbortLogger</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">_ss</span> <span class="o">&lt;&lt;</span> <span class="n">t</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">// std::endl and other iomanip:s.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">AbortLogger</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span><span class="p">(</span><span class="o">*</span><span class="n">f</span><span class="p">)(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">f</span><span class="p">(</span><span class="n">_ss</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span>        <span class="n">_expr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">const</span> <span class="kt">char</span><span class="o">*</span>        <span class="n">_file</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="kt">unsigned</span>           <span class="n">_line</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">std</span><span class="o">::</span><span class="n">ostringstream</span> <span class="n">_ss</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">LOGURU_EXPORT</span> <span class="n">Voidify</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">Voidify</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// This has to be an operator with a precedence lower than &lt;&lt; but higher than ?:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="kt">void</span> <span class="k">operator</span><span class="o">&amp;</span><span class="p">(</span><span class="k">const</span> <span class="n">StreamLogger</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="kt">void</span> <span class="k">operator</span><span class="o">&amp;</span><span class="p">(</span><span class="k">const</span> <span class="n">AbortLogger</span><span class="o">&amp;</span><span class="p">)</span>  <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/*  Helper functions for CHECK_OP_S macro.
</span></span></span><span class="line"><span class="cl"><span class="cm">		GLOG trick: The (int, int) specialization works around the issue that the compiler
</span></span></span><span class="line"><span class="cl"><span class="cm">		will not instantiate the template version of the function on values of unnamed enum type. */</span>
</span></span><span class="line"><span class="cl">	<span class="cp">#define DEFINE_CHECK_OP_IMPL(name, op)                                                             \
</span></span></span><span class="line"><span class="cl"><span class="cp">		template &lt;typename T1, typename T2&gt;                                                            \
</span></span></span><span class="line"><span class="cl"><span class="cp">		inline std::string* name(const char* expr, const T1&amp; v1, const char* op_str, const T2&amp; v2)     \
</span></span></span><span class="line"><span class="cl"><span class="cp">		{                                                                                              \
</span></span></span><span class="line"><span class="cl"><span class="cp">			if (LOGURU_PREDICT_TRUE(v1 op v2)) { return NULL; }                                        \
</span></span></span><span class="line"><span class="cl"><span class="cp">			std::ostringstream ss;                                                                     \
</span></span></span><span class="line"><span class="cl"><span class="cp">			ss &lt;&lt; &#34;CHECK FAILED:  &#34; &lt;&lt; expr &lt;&lt; &#34;  (&#34; &lt;&lt; v1 &lt;&lt; &#34; &#34; &lt;&lt; op_str &lt;&lt; &#34; &#34; &lt;&lt; v2 &lt;&lt; &#34;)  &#34;;     \
</span></span></span><span class="line"><span class="cl"><span class="cp">			return new std::string(ss.str());                                                          \
</span></span></span><span class="line"><span class="cl"><span class="cp">		}                                                                                              \
</span></span></span><span class="line"><span class="cl"><span class="cp">		inline std::string* name(const char* expr, int v1, const char* op_str, int v2)                 \
</span></span></span><span class="line"><span class="cl"><span class="cp">		{                                                                                              \
</span></span></span><span class="line"><span class="cl"><span class="cp">			return name&lt;int, int&gt;(expr, v1, op_str, v2);                                               \
</span></span></span><span class="line"><span class="cl"><span class="cp">		}
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">	<span class="n">DEFINE_CHECK_OP_IMPL</span><span class="p">(</span><span class="n">check_EQ_impl</span><span class="p">,</span> <span class="o">==</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">DEFINE_CHECK_OP_IMPL</span><span class="p">(</span><span class="n">check_NE_impl</span><span class="p">,</span> <span class="o">!=</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">DEFINE_CHECK_OP_IMPL</span><span class="p">(</span><span class="n">check_LE_impl</span><span class="p">,</span> <span class="o">&lt;=</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">DEFINE_CHECK_OP_IMPL</span><span class="p">(</span><span class="n">check_LT_impl</span><span class="p">,</span> <span class="o">&lt;</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">DEFINE_CHECK_OP_IMPL</span><span class="p">(</span><span class="n">check_GE_impl</span><span class="p">,</span> <span class="o">&gt;=</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">DEFINE_CHECK_OP_IMPL</span><span class="p">(</span><span class="n">check_GT_impl</span><span class="p">,</span> <span class="o">&gt;</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="cp">#undef DEFINE_CHECK_OP_IMPL
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">	<span class="cm">/*  GLOG trick: Function is overloaded for integral types to allow static const integrals
</span></span></span><span class="line"><span class="cl"><span class="cm">		declared in classes and not defined to be used as arguments to CHECK* macros. */</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span>           <span class="n">referenceable_value</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span>           <span class="n">t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">t</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="kt">char</span>               <span class="nf">referenceable_value</span><span class="p">(</span><span class="kt">char</span>               <span class="n">t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">t</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span>      <span class="nf">referenceable_value</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span>      <span class="n">t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">t</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="kt">signed</span> <span class="kt">char</span>        <span class="nf">referenceable_value</span><span class="p">(</span><span class="kt">signed</span> <span class="kt">char</span>        <span class="n">t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">t</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="kt">short</span>              <span class="nf">referenceable_value</span><span class="p">(</span><span class="kt">short</span>              <span class="n">t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">t</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">short</span>     <span class="nf">referenceable_value</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span>     <span class="n">t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">t</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="kt">int</span>                <span class="nf">referenceable_value</span><span class="p">(</span><span class="kt">int</span>                <span class="n">t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">t</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">int</span>       <span class="nf">referenceable_value</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span>       <span class="n">t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">t</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="kt">long</span>               <span class="nf">referenceable_value</span><span class="p">(</span><span class="kt">long</span>               <span class="n">t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">t</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">long</span>      <span class="nf">referenceable_value</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span>      <span class="n">t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">t</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="kt">long</span> <span class="kt">long</span>          <span class="nf">referenceable_value</span><span class="p">(</span><span class="kt">long</span> <span class="kt">long</span>          <span class="n">t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">t</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="nf">referenceable_value</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">t</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace loguru
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// -----------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1">// Logging macros:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// usage:  LOG_STREAM(INFO) &lt;&lt; &#34;Foo &#34; &lt;&lt; std::setprecision(10) &lt;&lt; some_value;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define VLOG_IF_S(verbosity, cond)                                                                 \
</span></span></span><span class="line"><span class="cl"><span class="cp">	((verbosity) &gt; loguru::current_verbosity_cutoff() || (cond) == false)                          \
</span></span></span><span class="line"><span class="cl"><span class="cp">		? (void)0                                                                                  \
</span></span></span><span class="line"><span class="cl"><span class="cp">		: loguru::Voidify() &amp; loguru::StreamLogger(verbosity, __FILE__, __LINE__)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOG_IF_S(verbosity_name, cond) VLOG_IF_S(loguru::Verbosity_ ## verbosity_name, cond)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define VLOG_S(verbosity)              VLOG_IF_S(verbosity, true)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOG_S(verbosity_name)          VLOG_S(loguru::Verbosity_ ## verbosity_name)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// -----------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1">// ABORT_S macro. Usage:  ABORT_S() &lt;&lt; &#34;Causo of error: &#34; &lt;&lt; details;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define ABORT_S() loguru::Voidify() &amp; loguru::AbortLogger(&#34;ABORT: &#34;, __FILE__, __LINE__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// -----------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1">// CHECK_S macros:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_WITH_INFO_S(cond, info)                                                              \
</span></span></span><span class="line"><span class="cl"><span class="cp">	LOGURU_PREDICT_TRUE((cond) == true)                                                            \
</span></span></span><span class="line"><span class="cl"><span class="cp">		? (void)0                                                                                  \
</span></span></span><span class="line"><span class="cl"><span class="cp">		: loguru::Voidify() &amp; loguru::AbortLogger(&#34;CHECK FAILED:  &#34; info &#34;  &#34;, __FILE__, __LINE__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_S(cond) CHECK_WITH_INFO_S(cond, #cond)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_NOTNULL_S(x) CHECK_WITH_INFO_S((x) != nullptr, #x &#34; != nullptr&#34;)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_OP_S(function_name, expr1, op, expr2)                                                \
</span></span></span><span class="line"><span class="cl"><span class="cp">	while (auto error_string = loguru::function_name(#expr1 &#34; &#34; #op &#34; &#34; #expr2,                    \
</span></span></span><span class="line"><span class="cl"><span class="cp">													 loguru::referenceable_value(expr1), #op,      \
</span></span></span><span class="line"><span class="cl"><span class="cp">													 loguru::referenceable_value(expr2)))          \
</span></span></span><span class="line"><span class="cl"><span class="cp">		loguru::AbortLogger(error_string-&gt;c_str(), __FILE__, __LINE__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_EQ_S(expr1, expr2) CHECK_OP_S(check_EQ_impl, expr1, ==, expr2)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_NE_S(expr1, expr2) CHECK_OP_S(check_NE_impl, expr1, !=, expr2)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_LE_S(expr1, expr2) CHECK_OP_S(check_LE_impl, expr1, &lt;=, expr2)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_LT_S(expr1, expr2) CHECK_OP_S(check_LT_impl, expr1, &lt; , expr2)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_GE_S(expr1, expr2) CHECK_OP_S(check_GE_impl, expr1, &gt;=, expr2)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define CHECK_GT_S(expr1, expr2) CHECK_OP_S(check_GT_impl, expr1, &gt; , expr2)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_DEBUG_LOGGING
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Debug logging enabled:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define DVLOG_IF_S(verbosity, cond)     VLOG_IF_S(verbosity, cond)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DLOG_IF_S(verbosity_name, cond) LOG_IF_S(verbosity_name, cond)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DVLOG_S(verbosity)              VLOG_S(verbosity)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DLOG_S(verbosity_name)          LOG_S(verbosity_name)
</span></span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Debug logging disabled:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define DVLOG_IF_S(verbosity, cond)                                                     \
</span></span></span><span class="line"><span class="cl"><span class="cp">		(true || (verbosity) &gt; loguru::current_verbosity_cutoff() || (cond) == false)       \
</span></span></span><span class="line"><span class="cl"><span class="cp">			? (void)0                                                                       \
</span></span></span><span class="line"><span class="cl"><span class="cp">			: loguru::Voidify() &amp; loguru::StreamLogger(verbosity, __FILE__, __LINE__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">	<span class="cp">#define DLOG_IF_S(verbosity_name, cond) DVLOG_IF_S(loguru::Verbosity_ ## verbosity_name, cond)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DVLOG_S(verbosity)              DVLOG_IF_S(verbosity, true)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DLOG_S(verbosity_name)          DVLOG_S(loguru::Verbosity_ ## verbosity_name)
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_DEBUG_CHECKS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="c1">// Debug checks enabled:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define DCHECK_S(cond)                  CHECK_S(cond)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_NOTNULL_S(x)             CHECK_NOTNULL_S(x)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_EQ_S(a, b)               CHECK_EQ_S(a, b)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_NE_S(a, b)               CHECK_NE_S(a, b)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_LT_S(a, b)               CHECK_LT_S(a, b)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_LE_S(a, b)               CHECK_LE_S(a, b)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_GT_S(a, b)               CHECK_GT_S(a, b)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_GE_S(a, b)               CHECK_GE_S(a, b)
</span></span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// Debug checks disabled:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cp">#define DCHECK_S(cond)                  CHECK_S(true || (cond))
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_NOTNULL_S(x)             CHECK_S(true || (x) != nullptr)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_EQ_S(a, b)               CHECK_S(true || (a) == (b))
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_NE_S(a, b)               CHECK_S(true || (a) != (b))
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_LT_S(a, b)               CHECK_S(true || (a) &lt;  (b))
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_LE_S(a, b)               CHECK_S(true || (a) &lt;= (b))
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_GT_S(a, b)               CHECK_S(true || (a) &gt;  (b))
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_GE_S(a, b)               CHECK_S(true || (a) &gt;= (b))
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_REPLACE_GLOG
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef LOG
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef VLOG
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef LOG_IF
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef VLOG_IF
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef CHECK
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef CHECK_NOTNULL
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef CHECK_EQ
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef CHECK_NE
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef CHECK_LT
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef CHECK_LE
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef CHECK_GT
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef CHECK_GE
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef DLOG
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef DVLOG
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef DLOG_IF
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef DVLOG_IF
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef DCHECK
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef DCHECK_NOTNULL
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef DCHECK_EQ
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef DCHECK_NE
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef DCHECK_LT
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef DCHECK_LE
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef DCHECK_GT
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef DCHECK_GE
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#undef VLOG_IS_ON
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">	<span class="cp">#define LOG            LOG_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define VLOG           VLOG_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define LOG_IF         LOG_IF_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define VLOG_IF        VLOG_IF_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define CHECK(cond)    CHECK_S(!!(cond))
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define CHECK_NOTNULL  CHECK_NOTNULL_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define CHECK_EQ       CHECK_EQ_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define CHECK_NE       CHECK_NE_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define CHECK_LT       CHECK_LT_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define CHECK_LE       CHECK_LE_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define CHECK_GT       CHECK_GT_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define CHECK_GE       CHECK_GE_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DLOG           DLOG_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DVLOG          DVLOG_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DLOG_IF        DLOG_IF_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DVLOG_IF       DVLOG_IF_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK         DCHECK_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_NOTNULL DCHECK_NOTNULL_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_EQ      DCHECK_EQ_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_NE      DCHECK_NE_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_LT      DCHECK_LT_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_LE      DCHECK_LE_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_GT      DCHECK_GT_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define DCHECK_GE      DCHECK_GE_S
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#define VLOG_IS_ON(verbosity) ((verbosity) &lt;= loguru::current_verbosity_cutoff())
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// LOGURU_REPLACE_GLOG
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// LOGURU_WITH_STREAMS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// LOGURU_HAS_DECLARED_STREAMS_HEADER
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="logurucpp" class="heading-element">
  <a href="#logurucpp" class="heading-mark"></a><code>loguru.cpp</code></h2><div class="highlight" id="id-12"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">   1
</span><span class="lnt">   2
</span><span class="lnt">   3
</span><span class="lnt">   4
</span><span class="lnt">   5
</span><span class="lnt">   6
</span><span class="lnt">   7
</span><span class="lnt">   8
</span><span class="lnt">   9
</span><span class="lnt">  10
</span><span class="lnt">  11
</span><span class="lnt">  12
</span><span class="lnt">  13
</span><span class="lnt">  14
</span><span class="lnt">  15
</span><span class="lnt">  16
</span><span class="lnt">  17
</span><span class="lnt">  18
</span><span class="lnt">  19
</span><span class="lnt">  20
</span><span class="lnt">  21
</span><span class="lnt">  22
</span><span class="lnt">  23
</span><span class="lnt">  24
</span><span class="lnt">  25
</span><span class="lnt">  26
</span><span class="lnt">  27
</span><span class="lnt">  28
</span><span class="lnt">  29
</span><span class="lnt">  30
</span><span class="lnt">  31
</span><span class="lnt">  32
</span><span class="lnt">  33
</span><span class="lnt">  34
</span><span class="lnt">  35
</span><span class="lnt">  36
</span><span class="lnt">  37
</span><span class="lnt">  38
</span><span class="lnt">  39
</span><span class="lnt">  40
</span><span class="lnt">  41
</span><span class="lnt">  42
</span><span class="lnt">  43
</span><span class="lnt">  44
</span><span class="lnt">  45
</span><span class="lnt">  46
</span><span class="lnt">  47
</span><span class="lnt">  48
</span><span class="lnt">  49
</span><span class="lnt">  50
</span><span class="lnt">  51
</span><span class="lnt">  52
</span><span class="lnt">  53
</span><span class="lnt">  54
</span><span class="lnt">  55
</span><span class="lnt">  56
</span><span class="lnt">  57
</span><span class="lnt">  58
</span><span class="lnt">  59
</span><span class="lnt">  60
</span><span class="lnt">  61
</span><span class="lnt">  62
</span><span class="lnt">  63
</span><span class="lnt">  64
</span><span class="lnt">  65
</span><span class="lnt">  66
</span><span class="lnt">  67
</span><span class="lnt">  68
</span><span class="lnt">  69
</span><span class="lnt">  70
</span><span class="lnt">  71
</span><span class="lnt">  72
</span><span class="lnt">  73
</span><span class="lnt">  74
</span><span class="lnt">  75
</span><span class="lnt">  76
</span><span class="lnt">  77
</span><span class="lnt">  78
</span><span class="lnt">  79
</span><span class="lnt">  80
</span><span class="lnt">  81
</span><span class="lnt">  82
</span><span class="lnt">  83
</span><span class="lnt">  84
</span><span class="lnt">  85
</span><span class="lnt">  86
</span><span class="lnt">  87
</span><span class="lnt">  88
</span><span class="lnt">  89
</span><span class="lnt">  90
</span><span class="lnt">  91
</span><span class="lnt">  92
</span><span class="lnt">  93
</span><span class="lnt">  94
</span><span class="lnt">  95
</span><span class="lnt">  96
</span><span class="lnt">  97
</span><span class="lnt">  98
</span><span class="lnt">  99
</span><span class="lnt"> 100
</span><span class="lnt"> 101
</span><span class="lnt"> 102
</span><span class="lnt"> 103
</span><span class="lnt"> 104
</span><span class="lnt"> 105
</span><span class="lnt"> 106
</span><span class="lnt"> 107
</span><span class="lnt"> 108
</span><span class="lnt"> 109
</span><span class="lnt"> 110
</span><span class="lnt"> 111
</span><span class="lnt"> 112
</span><span class="lnt"> 113
</span><span class="lnt"> 114
</span><span class="lnt"> 115
</span><span class="lnt"> 116
</span><span class="lnt"> 117
</span><span class="lnt"> 118
</span><span class="lnt"> 119
</span><span class="lnt"> 120
</span><span class="lnt"> 121
</span><span class="lnt"> 122
</span><span class="lnt"> 123
</span><span class="lnt"> 124
</span><span class="lnt"> 125
</span><span class="lnt"> 126
</span><span class="lnt"> 127
</span><span class="lnt"> 128
</span><span class="lnt"> 129
</span><span class="lnt"> 130
</span><span class="lnt"> 131
</span><span class="lnt"> 132
</span><span class="lnt"> 133
</span><span class="lnt"> 134
</span><span class="lnt"> 135
</span><span class="lnt"> 136
</span><span class="lnt"> 137
</span><span class="lnt"> 138
</span><span class="lnt"> 139
</span><span class="lnt"> 140
</span><span class="lnt"> 141
</span><span class="lnt"> 142
</span><span class="lnt"> 143
</span><span class="lnt"> 144
</span><span class="lnt"> 145
</span><span class="lnt"> 146
</span><span class="lnt"> 147
</span><span class="lnt"> 148
</span><span class="lnt"> 149
</span><span class="lnt"> 150
</span><span class="lnt"> 151
</span><span class="lnt"> 152
</span><span class="lnt"> 153
</span><span class="lnt"> 154
</span><span class="lnt"> 155
</span><span class="lnt"> 156
</span><span class="lnt"> 157
</span><span class="lnt"> 158
</span><span class="lnt"> 159
</span><span class="lnt"> 160
</span><span class="lnt"> 161
</span><span class="lnt"> 162
</span><span class="lnt"> 163
</span><span class="lnt"> 164
</span><span class="lnt"> 165
</span><span class="lnt"> 166
</span><span class="lnt"> 167
</span><span class="lnt"> 168
</span><span class="lnt"> 169
</span><span class="lnt"> 170
</span><span class="lnt"> 171
</span><span class="lnt"> 172
</span><span class="lnt"> 173
</span><span class="lnt"> 174
</span><span class="lnt"> 175
</span><span class="lnt"> 176
</span><span class="lnt"> 177
</span><span class="lnt"> 178
</span><span class="lnt"> 179
</span><span class="lnt"> 180
</span><span class="lnt"> 181
</span><span class="lnt"> 182
</span><span class="lnt"> 183
</span><span class="lnt"> 184
</span><span class="lnt"> 185
</span><span class="lnt"> 186
</span><span class="lnt"> 187
</span><span class="lnt"> 188
</span><span class="lnt"> 189
</span><span class="lnt"> 190
</span><span class="lnt"> 191
</span><span class="lnt"> 192
</span><span class="lnt"> 193
</span><span class="lnt"> 194
</span><span class="lnt"> 195
</span><span class="lnt"> 196
</span><span class="lnt"> 197
</span><span class="lnt"> 198
</span><span class="lnt"> 199
</span><span class="lnt"> 200
</span><span class="lnt"> 201
</span><span class="lnt"> 202
</span><span class="lnt"> 203
</span><span class="lnt"> 204
</span><span class="lnt"> 205
</span><span class="lnt"> 206
</span><span class="lnt"> 207
</span><span class="lnt"> 208
</span><span class="lnt"> 209
</span><span class="lnt"> 210
</span><span class="lnt"> 211
</span><span class="lnt"> 212
</span><span class="lnt"> 213
</span><span class="lnt"> 214
</span><span class="lnt"> 215
</span><span class="lnt"> 216
</span><span class="lnt"> 217
</span><span class="lnt"> 218
</span><span class="lnt"> 219
</span><span class="lnt"> 220
</span><span class="lnt"> 221
</span><span class="lnt"> 222
</span><span class="lnt"> 223
</span><span class="lnt"> 224
</span><span class="lnt"> 225
</span><span class="lnt"> 226
</span><span class="lnt"> 227
</span><span class="lnt"> 228
</span><span class="lnt"> 229
</span><span class="lnt"> 230
</span><span class="lnt"> 231
</span><span class="lnt"> 232
</span><span class="lnt"> 233
</span><span class="lnt"> 234
</span><span class="lnt"> 235
</span><span class="lnt"> 236
</span><span class="lnt"> 237
</span><span class="lnt"> 238
</span><span class="lnt"> 239
</span><span class="lnt"> 240
</span><span class="lnt"> 241
</span><span class="lnt"> 242
</span><span class="lnt"> 243
</span><span class="lnt"> 244
</span><span class="lnt"> 245
</span><span class="lnt"> 246
</span><span class="lnt"> 247
</span><span class="lnt"> 248
</span><span class="lnt"> 249
</span><span class="lnt"> 250
</span><span class="lnt"> 251
</span><span class="lnt"> 252
</span><span class="lnt"> 253
</span><span class="lnt"> 254
</span><span class="lnt"> 255
</span><span class="lnt"> 256
</span><span class="lnt"> 257
</span><span class="lnt"> 258
</span><span class="lnt"> 259
</span><span class="lnt"> 260
</span><span class="lnt"> 261
</span><span class="lnt"> 262
</span><span class="lnt"> 263
</span><span class="lnt"> 264
</span><span class="lnt"> 265
</span><span class="lnt"> 266
</span><span class="lnt"> 267
</span><span class="lnt"> 268
</span><span class="lnt"> 269
</span><span class="lnt"> 270
</span><span class="lnt"> 271
</span><span class="lnt"> 272
</span><span class="lnt"> 273
</span><span class="lnt"> 274
</span><span class="lnt"> 275
</span><span class="lnt"> 276
</span><span class="lnt"> 277
</span><span class="lnt"> 278
</span><span class="lnt"> 279
</span><span class="lnt"> 280
</span><span class="lnt"> 281
</span><span class="lnt"> 282
</span><span class="lnt"> 283
</span><span class="lnt"> 284
</span><span class="lnt"> 285
</span><span class="lnt"> 286
</span><span class="lnt"> 287
</span><span class="lnt"> 288
</span><span class="lnt"> 289
</span><span class="lnt"> 290
</span><span class="lnt"> 291
</span><span class="lnt"> 292
</span><span class="lnt"> 293
</span><span class="lnt"> 294
</span><span class="lnt"> 295
</span><span class="lnt"> 296
</span><span class="lnt"> 297
</span><span class="lnt"> 298
</span><span class="lnt"> 299
</span><span class="lnt"> 300
</span><span class="lnt"> 301
</span><span class="lnt"> 302
</span><span class="lnt"> 303
</span><span class="lnt"> 304
</span><span class="lnt"> 305
</span><span class="lnt"> 306
</span><span class="lnt"> 307
</span><span class="lnt"> 308
</span><span class="lnt"> 309
</span><span class="lnt"> 310
</span><span class="lnt"> 311
</span><span class="lnt"> 312
</span><span class="lnt"> 313
</span><span class="lnt"> 314
</span><span class="lnt"> 315
</span><span class="lnt"> 316
</span><span class="lnt"> 317
</span><span class="lnt"> 318
</span><span class="lnt"> 319
</span><span class="lnt"> 320
</span><span class="lnt"> 321
</span><span class="lnt"> 322
</span><span class="lnt"> 323
</span><span class="lnt"> 324
</span><span class="lnt"> 325
</span><span class="lnt"> 326
</span><span class="lnt"> 327
</span><span class="lnt"> 328
</span><span class="lnt"> 329
</span><span class="lnt"> 330
</span><span class="lnt"> 331
</span><span class="lnt"> 332
</span><span class="lnt"> 333
</span><span class="lnt"> 334
</span><span class="lnt"> 335
</span><span class="lnt"> 336
</span><span class="lnt"> 337
</span><span class="lnt"> 338
</span><span class="lnt"> 339
</span><span class="lnt"> 340
</span><span class="lnt"> 341
</span><span class="lnt"> 342
</span><span class="lnt"> 343
</span><span class="lnt"> 344
</span><span class="lnt"> 345
</span><span class="lnt"> 346
</span><span class="lnt"> 347
</span><span class="lnt"> 348
</span><span class="lnt"> 349
</span><span class="lnt"> 350
</span><span class="lnt"> 351
</span><span class="lnt"> 352
</span><span class="lnt"> 353
</span><span class="lnt"> 354
</span><span class="lnt"> 355
</span><span class="lnt"> 356
</span><span class="lnt"> 357
</span><span class="lnt"> 358
</span><span class="lnt"> 359
</span><span class="lnt"> 360
</span><span class="lnt"> 361
</span><span class="lnt"> 362
</span><span class="lnt"> 363
</span><span class="lnt"> 364
</span><span class="lnt"> 365
</span><span class="lnt"> 366
</span><span class="lnt"> 367
</span><span class="lnt"> 368
</span><span class="lnt"> 369
</span><span class="lnt"> 370
</span><span class="lnt"> 371
</span><span class="lnt"> 372
</span><span class="lnt"> 373
</span><span class="lnt"> 374
</span><span class="lnt"> 375
</span><span class="lnt"> 376
</span><span class="lnt"> 377
</span><span class="lnt"> 378
</span><span class="lnt"> 379
</span><span class="lnt"> 380
</span><span class="lnt"> 381
</span><span class="lnt"> 382
</span><span class="lnt"> 383
</span><span class="lnt"> 384
</span><span class="lnt"> 385
</span><span class="lnt"> 386
</span><span class="lnt"> 387
</span><span class="lnt"> 388
</span><span class="lnt"> 389
</span><span class="lnt"> 390
</span><span class="lnt"> 391
</span><span class="lnt"> 392
</span><span class="lnt"> 393
</span><span class="lnt"> 394
</span><span class="lnt"> 395
</span><span class="lnt"> 396
</span><span class="lnt"> 397
</span><span class="lnt"> 398
</span><span class="lnt"> 399
</span><span class="lnt"> 400
</span><span class="lnt"> 401
</span><span class="lnt"> 402
</span><span class="lnt"> 403
</span><span class="lnt"> 404
</span><span class="lnt"> 405
</span><span class="lnt"> 406
</span><span class="lnt"> 407
</span><span class="lnt"> 408
</span><span class="lnt"> 409
</span><span class="lnt"> 410
</span><span class="lnt"> 411
</span><span class="lnt"> 412
</span><span class="lnt"> 413
</span><span class="lnt"> 414
</span><span class="lnt"> 415
</span><span class="lnt"> 416
</span><span class="lnt"> 417
</span><span class="lnt"> 418
</span><span class="lnt"> 419
</span><span class="lnt"> 420
</span><span class="lnt"> 421
</span><span class="lnt"> 422
</span><span class="lnt"> 423
</span><span class="lnt"> 424
</span><span class="lnt"> 425
</span><span class="lnt"> 426
</span><span class="lnt"> 427
</span><span class="lnt"> 428
</span><span class="lnt"> 429
</span><span class="lnt"> 430
</span><span class="lnt"> 431
</span><span class="lnt"> 432
</span><span class="lnt"> 433
</span><span class="lnt"> 434
</span><span class="lnt"> 435
</span><span class="lnt"> 436
</span><span class="lnt"> 437
</span><span class="lnt"> 438
</span><span class="lnt"> 439
</span><span class="lnt"> 440
</span><span class="lnt"> 441
</span><span class="lnt"> 442
</span><span class="lnt"> 443
</span><span class="lnt"> 444
</span><span class="lnt"> 445
</span><span class="lnt"> 446
</span><span class="lnt"> 447
</span><span class="lnt"> 448
</span><span class="lnt"> 449
</span><span class="lnt"> 450
</span><span class="lnt"> 451
</span><span class="lnt"> 452
</span><span class="lnt"> 453
</span><span class="lnt"> 454
</span><span class="lnt"> 455
</span><span class="lnt"> 456
</span><span class="lnt"> 457
</span><span class="lnt"> 458
</span><span class="lnt"> 459
</span><span class="lnt"> 460
</span><span class="lnt"> 461
</span><span class="lnt"> 462
</span><span class="lnt"> 463
</span><span class="lnt"> 464
</span><span class="lnt"> 465
</span><span class="lnt"> 466
</span><span class="lnt"> 467
</span><span class="lnt"> 468
</span><span class="lnt"> 469
</span><span class="lnt"> 470
</span><span class="lnt"> 471
</span><span class="lnt"> 472
</span><span class="lnt"> 473
</span><span class="lnt"> 474
</span><span class="lnt"> 475
</span><span class="lnt"> 476
</span><span class="lnt"> 477
</span><span class="lnt"> 478
</span><span class="lnt"> 479
</span><span class="lnt"> 480
</span><span class="lnt"> 481
</span><span class="lnt"> 482
</span><span class="lnt"> 483
</span><span class="lnt"> 484
</span><span class="lnt"> 485
</span><span class="lnt"> 486
</span><span class="lnt"> 487
</span><span class="lnt"> 488
</span><span class="lnt"> 489
</span><span class="lnt"> 490
</span><span class="lnt"> 491
</span><span class="lnt"> 492
</span><span class="lnt"> 493
</span><span class="lnt"> 494
</span><span class="lnt"> 495
</span><span class="lnt"> 496
</span><span class="lnt"> 497
</span><span class="lnt"> 498
</span><span class="lnt"> 499
</span><span class="lnt"> 500
</span><span class="lnt"> 501
</span><span class="lnt"> 502
</span><span class="lnt"> 503
</span><span class="lnt"> 504
</span><span class="lnt"> 505
</span><span class="lnt"> 506
</span><span class="lnt"> 507
</span><span class="lnt"> 508
</span><span class="lnt"> 509
</span><span class="lnt"> 510
</span><span class="lnt"> 511
</span><span class="lnt"> 512
</span><span class="lnt"> 513
</span><span class="lnt"> 514
</span><span class="lnt"> 515
</span><span class="lnt"> 516
</span><span class="lnt"> 517
</span><span class="lnt"> 518
</span><span class="lnt"> 519
</span><span class="lnt"> 520
</span><span class="lnt"> 521
</span><span class="lnt"> 522
</span><span class="lnt"> 523
</span><span class="lnt"> 524
</span><span class="lnt"> 525
</span><span class="lnt"> 526
</span><span class="lnt"> 527
</span><span class="lnt"> 528
</span><span class="lnt"> 529
</span><span class="lnt"> 530
</span><span class="lnt"> 531
</span><span class="lnt"> 532
</span><span class="lnt"> 533
</span><span class="lnt"> 534
</span><span class="lnt"> 535
</span><span class="lnt"> 536
</span><span class="lnt"> 537
</span><span class="lnt"> 538
</span><span class="lnt"> 539
</span><span class="lnt"> 540
</span><span class="lnt"> 541
</span><span class="lnt"> 542
</span><span class="lnt"> 543
</span><span class="lnt"> 544
</span><span class="lnt"> 545
</span><span class="lnt"> 546
</span><span class="lnt"> 547
</span><span class="lnt"> 548
</span><span class="lnt"> 549
</span><span class="lnt"> 550
</span><span class="lnt"> 551
</span><span class="lnt"> 552
</span><span class="lnt"> 553
</span><span class="lnt"> 554
</span><span class="lnt"> 555
</span><span class="lnt"> 556
</span><span class="lnt"> 557
</span><span class="lnt"> 558
</span><span class="lnt"> 559
</span><span class="lnt"> 560
</span><span class="lnt"> 561
</span><span class="lnt"> 562
</span><span class="lnt"> 563
</span><span class="lnt"> 564
</span><span class="lnt"> 565
</span><span class="lnt"> 566
</span><span class="lnt"> 567
</span><span class="lnt"> 568
</span><span class="lnt"> 569
</span><span class="lnt"> 570
</span><span class="lnt"> 571
</span><span class="lnt"> 572
</span><span class="lnt"> 573
</span><span class="lnt"> 574
</span><span class="lnt"> 575
</span><span class="lnt"> 576
</span><span class="lnt"> 577
</span><span class="lnt"> 578
</span><span class="lnt"> 579
</span><span class="lnt"> 580
</span><span class="lnt"> 581
</span><span class="lnt"> 582
</span><span class="lnt"> 583
</span><span class="lnt"> 584
</span><span class="lnt"> 585
</span><span class="lnt"> 586
</span><span class="lnt"> 587
</span><span class="lnt"> 588
</span><span class="lnt"> 589
</span><span class="lnt"> 590
</span><span class="lnt"> 591
</span><span class="lnt"> 592
</span><span class="lnt"> 593
</span><span class="lnt"> 594
</span><span class="lnt"> 595
</span><span class="lnt"> 596
</span><span class="lnt"> 597
</span><span class="lnt"> 598
</span><span class="lnt"> 599
</span><span class="lnt"> 600
</span><span class="lnt"> 601
</span><span class="lnt"> 602
</span><span class="lnt"> 603
</span><span class="lnt"> 604
</span><span class="lnt"> 605
</span><span class="lnt"> 606
</span><span class="lnt"> 607
</span><span class="lnt"> 608
</span><span class="lnt"> 609
</span><span class="lnt"> 610
</span><span class="lnt"> 611
</span><span class="lnt"> 612
</span><span class="lnt"> 613
</span><span class="lnt"> 614
</span><span class="lnt"> 615
</span><span class="lnt"> 616
</span><span class="lnt"> 617
</span><span class="lnt"> 618
</span><span class="lnt"> 619
</span><span class="lnt"> 620
</span><span class="lnt"> 621
</span><span class="lnt"> 622
</span><span class="lnt"> 623
</span><span class="lnt"> 624
</span><span class="lnt"> 625
</span><span class="lnt"> 626
</span><span class="lnt"> 627
</span><span class="lnt"> 628
</span><span class="lnt"> 629
</span><span class="lnt"> 630
</span><span class="lnt"> 631
</span><span class="lnt"> 632
</span><span class="lnt"> 633
</span><span class="lnt"> 634
</span><span class="lnt"> 635
</span><span class="lnt"> 636
</span><span class="lnt"> 637
</span><span class="lnt"> 638
</span><span class="lnt"> 639
</span><span class="lnt"> 640
</span><span class="lnt"> 641
</span><span class="lnt"> 642
</span><span class="lnt"> 643
</span><span class="lnt"> 644
</span><span class="lnt"> 645
</span><span class="lnt"> 646
</span><span class="lnt"> 647
</span><span class="lnt"> 648
</span><span class="lnt"> 649
</span><span class="lnt"> 650
</span><span class="lnt"> 651
</span><span class="lnt"> 652
</span><span class="lnt"> 653
</span><span class="lnt"> 654
</span><span class="lnt"> 655
</span><span class="lnt"> 656
</span><span class="lnt"> 657
</span><span class="lnt"> 658
</span><span class="lnt"> 659
</span><span class="lnt"> 660
</span><span class="lnt"> 661
</span><span class="lnt"> 662
</span><span class="lnt"> 663
</span><span class="lnt"> 664
</span><span class="lnt"> 665
</span><span class="lnt"> 666
</span><span class="lnt"> 667
</span><span class="lnt"> 668
</span><span class="lnt"> 669
</span><span class="lnt"> 670
</span><span class="lnt"> 671
</span><span class="lnt"> 672
</span><span class="lnt"> 673
</span><span class="lnt"> 674
</span><span class="lnt"> 675
</span><span class="lnt"> 676
</span><span class="lnt"> 677
</span><span class="lnt"> 678
</span><span class="lnt"> 679
</span><span class="lnt"> 680
</span><span class="lnt"> 681
</span><span class="lnt"> 682
</span><span class="lnt"> 683
</span><span class="lnt"> 684
</span><span class="lnt"> 685
</span><span class="lnt"> 686
</span><span class="lnt"> 687
</span><span class="lnt"> 688
</span><span class="lnt"> 689
</span><span class="lnt"> 690
</span><span class="lnt"> 691
</span><span class="lnt"> 692
</span><span class="lnt"> 693
</span><span class="lnt"> 694
</span><span class="lnt"> 695
</span><span class="lnt"> 696
</span><span class="lnt"> 697
</span><span class="lnt"> 698
</span><span class="lnt"> 699
</span><span class="lnt"> 700
</span><span class="lnt"> 701
</span><span class="lnt"> 702
</span><span class="lnt"> 703
</span><span class="lnt"> 704
</span><span class="lnt"> 705
</span><span class="lnt"> 706
</span><span class="lnt"> 707
</span><span class="lnt"> 708
</span><span class="lnt"> 709
</span><span class="lnt"> 710
</span><span class="lnt"> 711
</span><span class="lnt"> 712
</span><span class="lnt"> 713
</span><span class="lnt"> 714
</span><span class="lnt"> 715
</span><span class="lnt"> 716
</span><span class="lnt"> 717
</span><span class="lnt"> 718
</span><span class="lnt"> 719
</span><span class="lnt"> 720
</span><span class="lnt"> 721
</span><span class="lnt"> 722
</span><span class="lnt"> 723
</span><span class="lnt"> 724
</span><span class="lnt"> 725
</span><span class="lnt"> 726
</span><span class="lnt"> 727
</span><span class="lnt"> 728
</span><span class="lnt"> 729
</span><span class="lnt"> 730
</span><span class="lnt"> 731
</span><span class="lnt"> 732
</span><span class="lnt"> 733
</span><span class="lnt"> 734
</span><span class="lnt"> 735
</span><span class="lnt"> 736
</span><span class="lnt"> 737
</span><span class="lnt"> 738
</span><span class="lnt"> 739
</span><span class="lnt"> 740
</span><span class="lnt"> 741
</span><span class="lnt"> 742
</span><span class="lnt"> 743
</span><span class="lnt"> 744
</span><span class="lnt"> 745
</span><span class="lnt"> 746
</span><span class="lnt"> 747
</span><span class="lnt"> 748
</span><span class="lnt"> 749
</span><span class="lnt"> 750
</span><span class="lnt"> 751
</span><span class="lnt"> 752
</span><span class="lnt"> 753
</span><span class="lnt"> 754
</span><span class="lnt"> 755
</span><span class="lnt"> 756
</span><span class="lnt"> 757
</span><span class="lnt"> 758
</span><span class="lnt"> 759
</span><span class="lnt"> 760
</span><span class="lnt"> 761
</span><span class="lnt"> 762
</span><span class="lnt"> 763
</span><span class="lnt"> 764
</span><span class="lnt"> 765
</span><span class="lnt"> 766
</span><span class="lnt"> 767
</span><span class="lnt"> 768
</span><span class="lnt"> 769
</span><span class="lnt"> 770
</span><span class="lnt"> 771
</span><span class="lnt"> 772
</span><span class="lnt"> 773
</span><span class="lnt"> 774
</span><span class="lnt"> 775
</span><span class="lnt"> 776
</span><span class="lnt"> 777
</span><span class="lnt"> 778
</span><span class="lnt"> 779
</span><span class="lnt"> 780
</span><span class="lnt"> 781
</span><span class="lnt"> 782
</span><span class="lnt"> 783
</span><span class="lnt"> 784
</span><span class="lnt"> 785
</span><span class="lnt"> 786
</span><span class="lnt"> 787
</span><span class="lnt"> 788
</span><span class="lnt"> 789
</span><span class="lnt"> 790
</span><span class="lnt"> 791
</span><span class="lnt"> 792
</span><span class="lnt"> 793
</span><span class="lnt"> 794
</span><span class="lnt"> 795
</span><span class="lnt"> 796
</span><span class="lnt"> 797
</span><span class="lnt"> 798
</span><span class="lnt"> 799
</span><span class="lnt"> 800
</span><span class="lnt"> 801
</span><span class="lnt"> 802
</span><span class="lnt"> 803
</span><span class="lnt"> 804
</span><span class="lnt"> 805
</span><span class="lnt"> 806
</span><span class="lnt"> 807
</span><span class="lnt"> 808
</span><span class="lnt"> 809
</span><span class="lnt"> 810
</span><span class="lnt"> 811
</span><span class="lnt"> 812
</span><span class="lnt"> 813
</span><span class="lnt"> 814
</span><span class="lnt"> 815
</span><span class="lnt"> 816
</span><span class="lnt"> 817
</span><span class="lnt"> 818
</span><span class="lnt"> 819
</span><span class="lnt"> 820
</span><span class="lnt"> 821
</span><span class="lnt"> 822
</span><span class="lnt"> 823
</span><span class="lnt"> 824
</span><span class="lnt"> 825
</span><span class="lnt"> 826
</span><span class="lnt"> 827
</span><span class="lnt"> 828
</span><span class="lnt"> 829
</span><span class="lnt"> 830
</span><span class="lnt"> 831
</span><span class="lnt"> 832
</span><span class="lnt"> 833
</span><span class="lnt"> 834
</span><span class="lnt"> 835
</span><span class="lnt"> 836
</span><span class="lnt"> 837
</span><span class="lnt"> 838
</span><span class="lnt"> 839
</span><span class="lnt"> 840
</span><span class="lnt"> 841
</span><span class="lnt"> 842
</span><span class="lnt"> 843
</span><span class="lnt"> 844
</span><span class="lnt"> 845
</span><span class="lnt"> 846
</span><span class="lnt"> 847
</span><span class="lnt"> 848
</span><span class="lnt"> 849
</span><span class="lnt"> 850
</span><span class="lnt"> 851
</span><span class="lnt"> 852
</span><span class="lnt"> 853
</span><span class="lnt"> 854
</span><span class="lnt"> 855
</span><span class="lnt"> 856
</span><span class="lnt"> 857
</span><span class="lnt"> 858
</span><span class="lnt"> 859
</span><span class="lnt"> 860
</span><span class="lnt"> 861
</span><span class="lnt"> 862
</span><span class="lnt"> 863
</span><span class="lnt"> 864
</span><span class="lnt"> 865
</span><span class="lnt"> 866
</span><span class="lnt"> 867
</span><span class="lnt"> 868
</span><span class="lnt"> 869
</span><span class="lnt"> 870
</span><span class="lnt"> 871
</span><span class="lnt"> 872
</span><span class="lnt"> 873
</span><span class="lnt"> 874
</span><span class="lnt"> 875
</span><span class="lnt"> 876
</span><span class="lnt"> 877
</span><span class="lnt"> 878
</span><span class="lnt"> 879
</span><span class="lnt"> 880
</span><span class="lnt"> 881
</span><span class="lnt"> 882
</span><span class="lnt"> 883
</span><span class="lnt"> 884
</span><span class="lnt"> 885
</span><span class="lnt"> 886
</span><span class="lnt"> 887
</span><span class="lnt"> 888
</span><span class="lnt"> 889
</span><span class="lnt"> 890
</span><span class="lnt"> 891
</span><span class="lnt"> 892
</span><span class="lnt"> 893
</span><span class="lnt"> 894
</span><span class="lnt"> 895
</span><span class="lnt"> 896
</span><span class="lnt"> 897
</span><span class="lnt"> 898
</span><span class="lnt"> 899
</span><span class="lnt"> 900
</span><span class="lnt"> 901
</span><span class="lnt"> 902
</span><span class="lnt"> 903
</span><span class="lnt"> 904
</span><span class="lnt"> 905
</span><span class="lnt"> 906
</span><span class="lnt"> 907
</span><span class="lnt"> 908
</span><span class="lnt"> 909
</span><span class="lnt"> 910
</span><span class="lnt"> 911
</span><span class="lnt"> 912
</span><span class="lnt"> 913
</span><span class="lnt"> 914
</span><span class="lnt"> 915
</span><span class="lnt"> 916
</span><span class="lnt"> 917
</span><span class="lnt"> 918
</span><span class="lnt"> 919
</span><span class="lnt"> 920
</span><span class="lnt"> 921
</span><span class="lnt"> 922
</span><span class="lnt"> 923
</span><span class="lnt"> 924
</span><span class="lnt"> 925
</span><span class="lnt"> 926
</span><span class="lnt"> 927
</span><span class="lnt"> 928
</span><span class="lnt"> 929
</span><span class="lnt"> 930
</span><span class="lnt"> 931
</span><span class="lnt"> 932
</span><span class="lnt"> 933
</span><span class="lnt"> 934
</span><span class="lnt"> 935
</span><span class="lnt"> 936
</span><span class="lnt"> 937
</span><span class="lnt"> 938
</span><span class="lnt"> 939
</span><span class="lnt"> 940
</span><span class="lnt"> 941
</span><span class="lnt"> 942
</span><span class="lnt"> 943
</span><span class="lnt"> 944
</span><span class="lnt"> 945
</span><span class="lnt"> 946
</span><span class="lnt"> 947
</span><span class="lnt"> 948
</span><span class="lnt"> 949
</span><span class="lnt"> 950
</span><span class="lnt"> 951
</span><span class="lnt"> 952
</span><span class="lnt"> 953
</span><span class="lnt"> 954
</span><span class="lnt"> 955
</span><span class="lnt"> 956
</span><span class="lnt"> 957
</span><span class="lnt"> 958
</span><span class="lnt"> 959
</span><span class="lnt"> 960
</span><span class="lnt"> 961
</span><span class="lnt"> 962
</span><span class="lnt"> 963
</span><span class="lnt"> 964
</span><span class="lnt"> 965
</span><span class="lnt"> 966
</span><span class="lnt"> 967
</span><span class="lnt"> 968
</span><span class="lnt"> 969
</span><span class="lnt"> 970
</span><span class="lnt"> 971
</span><span class="lnt"> 972
</span><span class="lnt"> 973
</span><span class="lnt"> 974
</span><span class="lnt"> 975
</span><span class="lnt"> 976
</span><span class="lnt"> 977
</span><span class="lnt"> 978
</span><span class="lnt"> 979
</span><span class="lnt"> 980
</span><span class="lnt"> 981
</span><span class="lnt"> 982
</span><span class="lnt"> 983
</span><span class="lnt"> 984
</span><span class="lnt"> 985
</span><span class="lnt"> 986
</span><span class="lnt"> 987
</span><span class="lnt"> 988
</span><span class="lnt"> 989
</span><span class="lnt"> 990
</span><span class="lnt"> 991
</span><span class="lnt"> 992
</span><span class="lnt"> 993
</span><span class="lnt"> 994
</span><span class="lnt"> 995
</span><span class="lnt"> 996
</span><span class="lnt"> 997
</span><span class="lnt"> 998
</span><span class="lnt"> 999
</span><span class="lnt">1000
</span><span class="lnt">1001
</span><span class="lnt">1002
</span><span class="lnt">1003
</span><span class="lnt">1004
</span><span class="lnt">1005
</span><span class="lnt">1006
</span><span class="lnt">1007
</span><span class="lnt">1008
</span><span class="lnt">1009
</span><span class="lnt">1010
</span><span class="lnt">1011
</span><span class="lnt">1012
</span><span class="lnt">1013
</span><span class="lnt">1014
</span><span class="lnt">1015
</span><span class="lnt">1016
</span><span class="lnt">1017
</span><span class="lnt">1018
</span><span class="lnt">1019
</span><span class="lnt">1020
</span><span class="lnt">1021
</span><span class="lnt">1022
</span><span class="lnt">1023
</span><span class="lnt">1024
</span><span class="lnt">1025
</span><span class="lnt">1026
</span><span class="lnt">1027
</span><span class="lnt">1028
</span><span class="lnt">1029
</span><span class="lnt">1030
</span><span class="lnt">1031
</span><span class="lnt">1032
</span><span class="lnt">1033
</span><span class="lnt">1034
</span><span class="lnt">1035
</span><span class="lnt">1036
</span><span class="lnt">1037
</span><span class="lnt">1038
</span><span class="lnt">1039
</span><span class="lnt">1040
</span><span class="lnt">1041
</span><span class="lnt">1042
</span><span class="lnt">1043
</span><span class="lnt">1044
</span><span class="lnt">1045
</span><span class="lnt">1046
</span><span class="lnt">1047
</span><span class="lnt">1048
</span><span class="lnt">1049
</span><span class="lnt">1050
</span><span class="lnt">1051
</span><span class="lnt">1052
</span><span class="lnt">1053
</span><span class="lnt">1054
</span><span class="lnt">1055
</span><span class="lnt">1056
</span><span class="lnt">1057
</span><span class="lnt">1058
</span><span class="lnt">1059
</span><span class="lnt">1060
</span><span class="lnt">1061
</span><span class="lnt">1062
</span><span class="lnt">1063
</span><span class="lnt">1064
</span><span class="lnt">1065
</span><span class="lnt">1066
</span><span class="lnt">1067
</span><span class="lnt">1068
</span><span class="lnt">1069
</span><span class="lnt">1070
</span><span class="lnt">1071
</span><span class="lnt">1072
</span><span class="lnt">1073
</span><span class="lnt">1074
</span><span class="lnt">1075
</span><span class="lnt">1076
</span><span class="lnt">1077
</span><span class="lnt">1078
</span><span class="lnt">1079
</span><span class="lnt">1080
</span><span class="lnt">1081
</span><span class="lnt">1082
</span><span class="lnt">1083
</span><span class="lnt">1084
</span><span class="lnt">1085
</span><span class="lnt">1086
</span><span class="lnt">1087
</span><span class="lnt">1088
</span><span class="lnt">1089
</span><span class="lnt">1090
</span><span class="lnt">1091
</span><span class="lnt">1092
</span><span class="lnt">1093
</span><span class="lnt">1094
</span><span class="lnt">1095
</span><span class="lnt">1096
</span><span class="lnt">1097
</span><span class="lnt">1098
</span><span class="lnt">1099
</span><span class="lnt">1100
</span><span class="lnt">1101
</span><span class="lnt">1102
</span><span class="lnt">1103
</span><span class="lnt">1104
</span><span class="lnt">1105
</span><span class="lnt">1106
</span><span class="lnt">1107
</span><span class="lnt">1108
</span><span class="lnt">1109
</span><span class="lnt">1110
</span><span class="lnt">1111
</span><span class="lnt">1112
</span><span class="lnt">1113
</span><span class="lnt">1114
</span><span class="lnt">1115
</span><span class="lnt">1116
</span><span class="lnt">1117
</span><span class="lnt">1118
</span><span class="lnt">1119
</span><span class="lnt">1120
</span><span class="lnt">1121
</span><span class="lnt">1122
</span><span class="lnt">1123
</span><span class="lnt">1124
</span><span class="lnt">1125
</span><span class="lnt">1126
</span><span class="lnt">1127
</span><span class="lnt">1128
</span><span class="lnt">1129
</span><span class="lnt">1130
</span><span class="lnt">1131
</span><span class="lnt">1132
</span><span class="lnt">1133
</span><span class="lnt">1134
</span><span class="lnt">1135
</span><span class="lnt">1136
</span><span class="lnt">1137
</span><span class="lnt">1138
</span><span class="lnt">1139
</span><span class="lnt">1140
</span><span class="lnt">1141
</span><span class="lnt">1142
</span><span class="lnt">1143
</span><span class="lnt">1144
</span><span class="lnt">1145
</span><span class="lnt">1146
</span><span class="lnt">1147
</span><span class="lnt">1148
</span><span class="lnt">1149
</span><span class="lnt">1150
</span><span class="lnt">1151
</span><span class="lnt">1152
</span><span class="lnt">1153
</span><span class="lnt">1154
</span><span class="lnt">1155
</span><span class="lnt">1156
</span><span class="lnt">1157
</span><span class="lnt">1158
</span><span class="lnt">1159
</span><span class="lnt">1160
</span><span class="lnt">1161
</span><span class="lnt">1162
</span><span class="lnt">1163
</span><span class="lnt">1164
</span><span class="lnt">1165
</span><span class="lnt">1166
</span><span class="lnt">1167
</span><span class="lnt">1168
</span><span class="lnt">1169
</span><span class="lnt">1170
</span><span class="lnt">1171
</span><span class="lnt">1172
</span><span class="lnt">1173
</span><span class="lnt">1174
</span><span class="lnt">1175
</span><span class="lnt">1176
</span><span class="lnt">1177
</span><span class="lnt">1178
</span><span class="lnt">1179
</span><span class="lnt">1180
</span><span class="lnt">1181
</span><span class="lnt">1182
</span><span class="lnt">1183
</span><span class="lnt">1184
</span><span class="lnt">1185
</span><span class="lnt">1186
</span><span class="lnt">1187
</span><span class="lnt">1188
</span><span class="lnt">1189
</span><span class="lnt">1190
</span><span class="lnt">1191
</span><span class="lnt">1192
</span><span class="lnt">1193
</span><span class="lnt">1194
</span><span class="lnt">1195
</span><span class="lnt">1196
</span><span class="lnt">1197
</span><span class="lnt">1198
</span><span class="lnt">1199
</span><span class="lnt">1200
</span><span class="lnt">1201
</span><span class="lnt">1202
</span><span class="lnt">1203
</span><span class="lnt">1204
</span><span class="lnt">1205
</span><span class="lnt">1206
</span><span class="lnt">1207
</span><span class="lnt">1208
</span><span class="lnt">1209
</span><span class="lnt">1210
</span><span class="lnt">1211
</span><span class="lnt">1212
</span><span class="lnt">1213
</span><span class="lnt">1214
</span><span class="lnt">1215
</span><span class="lnt">1216
</span><span class="lnt">1217
</span><span class="lnt">1218
</span><span class="lnt">1219
</span><span class="lnt">1220
</span><span class="lnt">1221
</span><span class="lnt">1222
</span><span class="lnt">1223
</span><span class="lnt">1224
</span><span class="lnt">1225
</span><span class="lnt">1226
</span><span class="lnt">1227
</span><span class="lnt">1228
</span><span class="lnt">1229
</span><span class="lnt">1230
</span><span class="lnt">1231
</span><span class="lnt">1232
</span><span class="lnt">1233
</span><span class="lnt">1234
</span><span class="lnt">1235
</span><span class="lnt">1236
</span><span class="lnt">1237
</span><span class="lnt">1238
</span><span class="lnt">1239
</span><span class="lnt">1240
</span><span class="lnt">1241
</span><span class="lnt">1242
</span><span class="lnt">1243
</span><span class="lnt">1244
</span><span class="lnt">1245
</span><span class="lnt">1246
</span><span class="lnt">1247
</span><span class="lnt">1248
</span><span class="lnt">1249
</span><span class="lnt">1250
</span><span class="lnt">1251
</span><span class="lnt">1252
</span><span class="lnt">1253
</span><span class="lnt">1254
</span><span class="lnt">1255
</span><span class="lnt">1256
</span><span class="lnt">1257
</span><span class="lnt">1258
</span><span class="lnt">1259
</span><span class="lnt">1260
</span><span class="lnt">1261
</span><span class="lnt">1262
</span><span class="lnt">1263
</span><span class="lnt">1264
</span><span class="lnt">1265
</span><span class="lnt">1266
</span><span class="lnt">1267
</span><span class="lnt">1268
</span><span class="lnt">1269
</span><span class="lnt">1270
</span><span class="lnt">1271
</span><span class="lnt">1272
</span><span class="lnt">1273
</span><span class="lnt">1274
</span><span class="lnt">1275
</span><span class="lnt">1276
</span><span class="lnt">1277
</span><span class="lnt">1278
</span><span class="lnt">1279
</span><span class="lnt">1280
</span><span class="lnt">1281
</span><span class="lnt">1282
</span><span class="lnt">1283
</span><span class="lnt">1284
</span><span class="lnt">1285
</span><span class="lnt">1286
</span><span class="lnt">1287
</span><span class="lnt">1288
</span><span class="lnt">1289
</span><span class="lnt">1290
</span><span class="lnt">1291
</span><span class="lnt">1292
</span><span class="lnt">1293
</span><span class="lnt">1294
</span><span class="lnt">1295
</span><span class="lnt">1296
</span><span class="lnt">1297
</span><span class="lnt">1298
</span><span class="lnt">1299
</span><span class="lnt">1300
</span><span class="lnt">1301
</span><span class="lnt">1302
</span><span class="lnt">1303
</span><span class="lnt">1304
</span><span class="lnt">1305
</span><span class="lnt">1306
</span><span class="lnt">1307
</span><span class="lnt">1308
</span><span class="lnt">1309
</span><span class="lnt">1310
</span><span class="lnt">1311
</span><span class="lnt">1312
</span><span class="lnt">1313
</span><span class="lnt">1314
</span><span class="lnt">1315
</span><span class="lnt">1316
</span><span class="lnt">1317
</span><span class="lnt">1318
</span><span class="lnt">1319
</span><span class="lnt">1320
</span><span class="lnt">1321
</span><span class="lnt">1322
</span><span class="lnt">1323
</span><span class="lnt">1324
</span><span class="lnt">1325
</span><span class="lnt">1326
</span><span class="lnt">1327
</span><span class="lnt">1328
</span><span class="lnt">1329
</span><span class="lnt">1330
</span><span class="lnt">1331
</span><span class="lnt">1332
</span><span class="lnt">1333
</span><span class="lnt">1334
</span><span class="lnt">1335
</span><span class="lnt">1336
</span><span class="lnt">1337
</span><span class="lnt">1338
</span><span class="lnt">1339
</span><span class="lnt">1340
</span><span class="lnt">1341
</span><span class="lnt">1342
</span><span class="lnt">1343
</span><span class="lnt">1344
</span><span class="lnt">1345
</span><span class="lnt">1346
</span><span class="lnt">1347
</span><span class="lnt">1348
</span><span class="lnt">1349
</span><span class="lnt">1350
</span><span class="lnt">1351
</span><span class="lnt">1352
</span><span class="lnt">1353
</span><span class="lnt">1354
</span><span class="lnt">1355
</span><span class="lnt">1356
</span><span class="lnt">1357
</span><span class="lnt">1358
</span><span class="lnt">1359
</span><span class="lnt">1360
</span><span class="lnt">1361
</span><span class="lnt">1362
</span><span class="lnt">1363
</span><span class="lnt">1364
</span><span class="lnt">1365
</span><span class="lnt">1366
</span><span class="lnt">1367
</span><span class="lnt">1368
</span><span class="lnt">1369
</span><span class="lnt">1370
</span><span class="lnt">1371
</span><span class="lnt">1372
</span><span class="lnt">1373
</span><span class="lnt">1374
</span><span class="lnt">1375
</span><span class="lnt">1376
</span><span class="lnt">1377
</span><span class="lnt">1378
</span><span class="lnt">1379
</span><span class="lnt">1380
</span><span class="lnt">1381
</span><span class="lnt">1382
</span><span class="lnt">1383
</span><span class="lnt">1384
</span><span class="lnt">1385
</span><span class="lnt">1386
</span><span class="lnt">1387
</span><span class="lnt">1388
</span><span class="lnt">1389
</span><span class="lnt">1390
</span><span class="lnt">1391
</span><span class="lnt">1392
</span><span class="lnt">1393
</span><span class="lnt">1394
</span><span class="lnt">1395
</span><span class="lnt">1396
</span><span class="lnt">1397
</span><span class="lnt">1398
</span><span class="lnt">1399
</span><span class="lnt">1400
</span><span class="lnt">1401
</span><span class="lnt">1402
</span><span class="lnt">1403
</span><span class="lnt">1404
</span><span class="lnt">1405
</span><span class="lnt">1406
</span><span class="lnt">1407
</span><span class="lnt">1408
</span><span class="lnt">1409
</span><span class="lnt">1410
</span><span class="lnt">1411
</span><span class="lnt">1412
</span><span class="lnt">1413
</span><span class="lnt">1414
</span><span class="lnt">1415
</span><span class="lnt">1416
</span><span class="lnt">1417
</span><span class="lnt">1418
</span><span class="lnt">1419
</span><span class="lnt">1420
</span><span class="lnt">1421
</span><span class="lnt">1422
</span><span class="lnt">1423
</span><span class="lnt">1424
</span><span class="lnt">1425
</span><span class="lnt">1426
</span><span class="lnt">1427
</span><span class="lnt">1428
</span><span class="lnt">1429
</span><span class="lnt">1430
</span><span class="lnt">1431
</span><span class="lnt">1432
</span><span class="lnt">1433
</span><span class="lnt">1434
</span><span class="lnt">1435
</span><span class="lnt">1436
</span><span class="lnt">1437
</span><span class="lnt">1438
</span><span class="lnt">1439
</span><span class="lnt">1440
</span><span class="lnt">1441
</span><span class="lnt">1442
</span><span class="lnt">1443
</span><span class="lnt">1444
</span><span class="lnt">1445
</span><span class="lnt">1446
</span><span class="lnt">1447
</span><span class="lnt">1448
</span><span class="lnt">1449
</span><span class="lnt">1450
</span><span class="lnt">1451
</span><span class="lnt">1452
</span><span class="lnt">1453
</span><span class="lnt">1454
</span><span class="lnt">1455
</span><span class="lnt">1456
</span><span class="lnt">1457
</span><span class="lnt">1458
</span><span class="lnt">1459
</span><span class="lnt">1460
</span><span class="lnt">1461
</span><span class="lnt">1462
</span><span class="lnt">1463
</span><span class="lnt">1464
</span><span class="lnt">1465
</span><span class="lnt">1466
</span><span class="lnt">1467
</span><span class="lnt">1468
</span><span class="lnt">1469
</span><span class="lnt">1470
</span><span class="lnt">1471
</span><span class="lnt">1472
</span><span class="lnt">1473
</span><span class="lnt">1474
</span><span class="lnt">1475
</span><span class="lnt">1476
</span><span class="lnt">1477
</span><span class="lnt">1478
</span><span class="lnt">1479
</span><span class="lnt">1480
</span><span class="lnt">1481
</span><span class="lnt">1482
</span><span class="lnt">1483
</span><span class="lnt">1484
</span><span class="lnt">1485
</span><span class="lnt">1486
</span><span class="lnt">1487
</span><span class="lnt">1488
</span><span class="lnt">1489
</span><span class="lnt">1490
</span><span class="lnt">1491
</span><span class="lnt">1492
</span><span class="lnt">1493
</span><span class="lnt">1494
</span><span class="lnt">1495
</span><span class="lnt">1496
</span><span class="lnt">1497
</span><span class="lnt">1498
</span><span class="lnt">1499
</span><span class="lnt">1500
</span><span class="lnt">1501
</span><span class="lnt">1502
</span><span class="lnt">1503
</span><span class="lnt">1504
</span><span class="lnt">1505
</span><span class="lnt">1506
</span><span class="lnt">1507
</span><span class="lnt">1508
</span><span class="lnt">1509
</span><span class="lnt">1510
</span><span class="lnt">1511
</span><span class="lnt">1512
</span><span class="lnt">1513
</span><span class="lnt">1514
</span><span class="lnt">1515
</span><span class="lnt">1516
</span><span class="lnt">1517
</span><span class="lnt">1518
</span><span class="lnt">1519
</span><span class="lnt">1520
</span><span class="lnt">1521
</span><span class="lnt">1522
</span><span class="lnt">1523
</span><span class="lnt">1524
</span><span class="lnt">1525
</span><span class="lnt">1526
</span><span class="lnt">1527
</span><span class="lnt">1528
</span><span class="lnt">1529
</span><span class="lnt">1530
</span><span class="lnt">1531
</span><span class="lnt">1532
</span><span class="lnt">1533
</span><span class="lnt">1534
</span><span class="lnt">1535
</span><span class="lnt">1536
</span><span class="lnt">1537
</span><span class="lnt">1538
</span><span class="lnt">1539
</span><span class="lnt">1540
</span><span class="lnt">1541
</span><span class="lnt">1542
</span><span class="lnt">1543
</span><span class="lnt">1544
</span><span class="lnt">1545
</span><span class="lnt">1546
</span><span class="lnt">1547
</span><span class="lnt">1548
</span><span class="lnt">1549
</span><span class="lnt">1550
</span><span class="lnt">1551
</span><span class="lnt">1552
</span><span class="lnt">1553
</span><span class="lnt">1554
</span><span class="lnt">1555
</span><span class="lnt">1556
</span><span class="lnt">1557
</span><span class="lnt">1558
</span><span class="lnt">1559
</span><span class="lnt">1560
</span><span class="lnt">1561
</span><span class="lnt">1562
</span><span class="lnt">1563
</span><span class="lnt">1564
</span><span class="lnt">1565
</span><span class="lnt">1566
</span><span class="lnt">1567
</span><span class="lnt">1568
</span><span class="lnt">1569
</span><span class="lnt">1570
</span><span class="lnt">1571
</span><span class="lnt">1572
</span><span class="lnt">1573
</span><span class="lnt">1574
</span><span class="lnt">1575
</span><span class="lnt">1576
</span><span class="lnt">1577
</span><span class="lnt">1578
</span><span class="lnt">1579
</span><span class="lnt">1580
</span><span class="lnt">1581
</span><span class="lnt">1582
</span><span class="lnt">1583
</span><span class="lnt">1584
</span><span class="lnt">1585
</span><span class="lnt">1586
</span><span class="lnt">1587
</span><span class="lnt">1588
</span><span class="lnt">1589
</span><span class="lnt">1590
</span><span class="lnt">1591
</span><span class="lnt">1592
</span><span class="lnt">1593
</span><span class="lnt">1594
</span><span class="lnt">1595
</span><span class="lnt">1596
</span><span class="lnt">1597
</span><span class="lnt">1598
</span><span class="lnt">1599
</span><span class="lnt">1600
</span><span class="lnt">1601
</span><span class="lnt">1602
</span><span class="lnt">1603
</span><span class="lnt">1604
</span><span class="lnt">1605
</span><span class="lnt">1606
</span><span class="lnt">1607
</span><span class="lnt">1608
</span><span class="lnt">1609
</span><span class="lnt">1610
</span><span class="lnt">1611
</span><span class="lnt">1612
</span><span class="lnt">1613
</span><span class="lnt">1614
</span><span class="lnt">1615
</span><span class="lnt">1616
</span><span class="lnt">1617
</span><span class="lnt">1618
</span><span class="lnt">1619
</span><span class="lnt">1620
</span><span class="lnt">1621
</span><span class="lnt">1622
</span><span class="lnt">1623
</span><span class="lnt">1624
</span><span class="lnt">1625
</span><span class="lnt">1626
</span><span class="lnt">1627
</span><span class="lnt">1628
</span><span class="lnt">1629
</span><span class="lnt">1630
</span><span class="lnt">1631
</span><span class="lnt">1632
</span><span class="lnt">1633
</span><span class="lnt">1634
</span><span class="lnt">1635
</span><span class="lnt">1636
</span><span class="lnt">1637
</span><span class="lnt">1638
</span><span class="lnt">1639
</span><span class="lnt">1640
</span><span class="lnt">1641
</span><span class="lnt">1642
</span><span class="lnt">1643
</span><span class="lnt">1644
</span><span class="lnt">1645
</span><span class="lnt">1646
</span><span class="lnt">1647
</span><span class="lnt">1648
</span><span class="lnt">1649
</span><span class="lnt">1650
</span><span class="lnt">1651
</span><span class="lnt">1652
</span><span class="lnt">1653
</span><span class="lnt">1654
</span><span class="lnt">1655
</span><span class="lnt">1656
</span><span class="lnt">1657
</span><span class="lnt">1658
</span><span class="lnt">1659
</span><span class="lnt">1660
</span><span class="lnt">1661
</span><span class="lnt">1662
</span><span class="lnt">1663
</span><span class="lnt">1664
</span><span class="lnt">1665
</span><span class="lnt">1666
</span><span class="lnt">1667
</span><span class="lnt">1668
</span><span class="lnt">1669
</span><span class="lnt">1670
</span><span class="lnt">1671
</span><span class="lnt">1672
</span><span class="lnt">1673
</span><span class="lnt">1674
</span><span class="lnt">1675
</span><span class="lnt">1676
</span><span class="lnt">1677
</span><span class="lnt">1678
</span><span class="lnt">1679
</span><span class="lnt">1680
</span><span class="lnt">1681
</span><span class="lnt">1682
</span><span class="lnt">1683
</span><span class="lnt">1684
</span><span class="lnt">1685
</span><span class="lnt">1686
</span><span class="lnt">1687
</span><span class="lnt">1688
</span><span class="lnt">1689
</span><span class="lnt">1690
</span><span class="lnt">1691
</span><span class="lnt">1692
</span><span class="lnt">1693
</span><span class="lnt">1694
</span><span class="lnt">1695
</span><span class="lnt">1696
</span><span class="lnt">1697
</span><span class="lnt">1698
</span><span class="lnt">1699
</span><span class="lnt">1700
</span><span class="lnt">1701
</span><span class="lnt">1702
</span><span class="lnt">1703
</span><span class="lnt">1704
</span><span class="lnt">1705
</span><span class="lnt">1706
</span><span class="lnt">1707
</span><span class="lnt">1708
</span><span class="lnt">1709
</span><span class="lnt">1710
</span><span class="lnt">1711
</span><span class="lnt">1712
</span><span class="lnt">1713
</span><span class="lnt">1714
</span><span class="lnt">1715
</span><span class="lnt">1716
</span><span class="lnt">1717
</span><span class="lnt">1718
</span><span class="lnt">1719
</span><span class="lnt">1720
</span><span class="lnt">1721
</span><span class="lnt">1722
</span><span class="lnt">1723
</span><span class="lnt">1724
</span><span class="lnt">1725
</span><span class="lnt">1726
</span><span class="lnt">1727
</span><span class="lnt">1728
</span><span class="lnt">1729
</span><span class="lnt">1730
</span><span class="lnt">1731
</span><span class="lnt">1732
</span><span class="lnt">1733
</span><span class="lnt">1734
</span><span class="lnt">1735
</span><span class="lnt">1736
</span><span class="lnt">1737
</span><span class="lnt">1738
</span><span class="lnt">1739
</span><span class="lnt">1740
</span><span class="lnt">1741
</span><span class="lnt">1742
</span><span class="lnt">1743
</span><span class="lnt">1744
</span><span class="lnt">1745
</span><span class="lnt">1746
</span><span class="lnt">1747
</span><span class="lnt">1748
</span><span class="lnt">1749
</span><span class="lnt">1750
</span><span class="lnt">1751
</span><span class="lnt">1752
</span><span class="lnt">1753
</span><span class="lnt">1754
</span><span class="lnt">1755
</span><span class="lnt">1756
</span><span class="lnt">1757
</span><span class="lnt">1758
</span><span class="lnt">1759
</span><span class="lnt">1760
</span><span class="lnt">1761
</span><span class="lnt">1762
</span><span class="lnt">1763
</span><span class="lnt">1764
</span><span class="lnt">1765
</span><span class="lnt">1766
</span><span class="lnt">1767
</span><span class="lnt">1768
</span><span class="lnt">1769
</span><span class="lnt">1770
</span><span class="lnt">1771
</span><span class="lnt">1772
</span><span class="lnt">1773
</span><span class="lnt">1774
</span><span class="lnt">1775
</span><span class="lnt">1776
</span><span class="lnt">1777
</span><span class="lnt">1778
</span><span class="lnt">1779
</span><span class="lnt">1780
</span><span class="lnt">1781
</span><span class="lnt">1782
</span><span class="lnt">1783
</span><span class="lnt">1784
</span><span class="lnt">1785
</span><span class="lnt">1786
</span><span class="lnt">1787
</span><span class="lnt">1788
</span><span class="lnt">1789
</span><span class="lnt">1790
</span><span class="lnt">1791
</span><span class="lnt">1792
</span><span class="lnt">1793
</span><span class="lnt">1794
</span><span class="lnt">1795
</span><span class="lnt">1796
</span><span class="lnt">1797
</span><span class="lnt">1798
</span><span class="lnt">1799
</span><span class="lnt">1800
</span><span class="lnt">1801
</span><span class="lnt">1802
</span><span class="lnt">1803
</span><span class="lnt">1804
</span><span class="lnt">1805
</span><span class="lnt">1806
</span><span class="lnt">1807
</span><span class="lnt">1808
</span><span class="lnt">1809
</span><span class="lnt">1810
</span><span class="lnt">1811
</span><span class="lnt">1812
</span><span class="lnt">1813
</span><span class="lnt">1814
</span><span class="lnt">1815
</span><span class="lnt">1816
</span><span class="lnt">1817
</span><span class="lnt">1818
</span><span class="lnt">1819
</span><span class="lnt">1820
</span><span class="lnt">1821
</span><span class="lnt">1822
</span><span class="lnt">1823
</span><span class="lnt">1824
</span><span class="lnt">1825
</span><span class="lnt">1826
</span><span class="lnt">1827
</span><span class="lnt">1828
</span><span class="lnt">1829
</span><span class="lnt">1830
</span><span class="lnt">1831
</span><span class="lnt">1832
</span><span class="lnt">1833
</span><span class="lnt">1834
</span><span class="lnt">1835
</span><span class="lnt">1836
</span><span class="lnt">1837
</span><span class="lnt">1838
</span><span class="lnt">1839
</span><span class="lnt">1840
</span><span class="lnt">1841
</span><span class="lnt">1842
</span><span class="lnt">1843
</span><span class="lnt">1844
</span><span class="lnt">1845
</span><span class="lnt">1846
</span><span class="lnt">1847
</span><span class="lnt">1848
</span><span class="lnt">1849
</span><span class="lnt">1850
</span><span class="lnt">1851
</span><span class="lnt">1852
</span><span class="lnt">1853
</span><span class="lnt">1854
</span><span class="lnt">1855
</span><span class="lnt">1856
</span><span class="lnt">1857
</span><span class="lnt">1858
</span><span class="lnt">1859
</span><span class="lnt">1860
</span><span class="lnt">1861
</span><span class="lnt">1862
</span><span class="lnt">1863
</span><span class="lnt">1864
</span><span class="lnt">1865
</span><span class="lnt">1866
</span><span class="lnt">1867
</span><span class="lnt">1868
</span><span class="lnt">1869
</span><span class="lnt">1870
</span><span class="lnt">1871
</span><span class="lnt">1872
</span><span class="lnt">1873
</span><span class="lnt">1874
</span><span class="lnt">1875
</span><span class="lnt">1876
</span><span class="lnt">1877
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#ifndef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// Disable all warnings from gcc/clang:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#pragma GCC diagnostic push
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wpragmas&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wc++98-compat&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wc++98-compat-pedantic&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wexit-time-destructors&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wformat-nonliteral&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wglobal-constructors&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wgnu-zero-variadic-macro-arguments&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wmissing-prototypes&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wpadded&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wsign-compare&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wsign-conversion&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wunknown-pragmas&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wunused-macros&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma GCC diagnostic ignored &#34;-Wzero-as-null-pointer-constant&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp">#ifdef _MSC_VER
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma warning(push)
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma warning(disable:4018)
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// _MSC_VER
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_USE_FMTLIB 1
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;loguru.hpp&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_HAS_BEEN_IMPLEMENTED
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_HAS_BEEN_IMPLEMENTED
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// #define LOGURU_PREAMBLE_WIDTH (53 + LOGURU_THREADNAME_WIDTH + LOGURU_FILENAME_WIDTH)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define LOGURU_PREAMBLE_WIDTH (57 + LOGURU_THREADNAME_WIDTH + LOGURU_FILENAME_WIDTH)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#undef min
</span></span></span><span class="line"><span class="cl"><span class="cp">#undef max
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;atomic&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdarg&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdio&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;mutex&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;regex&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;thread&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#include</span> <span class="cpf">&lt;direct.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="cp">#define localtime_r(a, b) localtime_s(b, a) </span><span class="c1">// No localtime_r with MSVC, but arguments are swapped for localtime_s
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#include</span> <span class="cpf">&lt;signal.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#include</span> <span class="cpf">&lt;sys/stat.h&gt;</span><span class="cp"> </span><span class="c1">// mkdir
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">   </span><span class="c1">// STDERR_FILENO
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifdef __linux__
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#include</span> <span class="cpf">&lt;linux/limits.h&gt;</span><span class="cp"> </span><span class="c1">// PATH_MAX
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#elif !defined(_WIN32)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#include</span> <span class="cpf">&lt;limits.h&gt;</span><span class="cp"> </span><span class="c1">// PATH_MAX
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef PATH_MAX
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#define PATH_MAX 1024
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifdef __APPLE__
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#include</span> <span class="cpf">&#34;TargetConditionals.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// TODO: use defined(_POSIX_VERSION) for some of these things?
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if defined(_WIN32) || defined(__CYGWIN__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#define LOGURU_PTHREADS    0
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#define LOGURU_WINTHREADS  1
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#ifndef LOGURU_STACKTRACES
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="cp">#define LOGURU_STACKTRACES 0
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#elif defined(__rtems__) || defined(__ANDROID__) || defined(__FreeBSD__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#define LOGURU_PTHREADS    1
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#define LOGURU_WINTHREADS  0
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#ifndef LOGURU_STACKTRACES
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="cp">#define LOGURU_STACKTRACES 0
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#define LOGURU_PTHREADS    1
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#define LOGURU_WINTHREADS  0
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#ifndef LOGURU_STACKTRACES
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="cp">#define LOGURU_STACKTRACES 1
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_STACKTRACES
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#include</span> <span class="cpf">&lt;cxxabi.h&gt;</span><span class="cp">    </span><span class="c1">// for __cxa_demangle
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="cp">#include</span> <span class="cpf">&lt;dlfcn.h&gt;</span><span class="cp">     </span><span class="c1">// for dladdr
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="cp">#include</span> <span class="cpf">&lt;execinfo.h&gt;</span><span class="cp">  </span><span class="c1">// for backtrace
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#endif </span><span class="c1">// LOGURU_STACKTRACES
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_PTHREADS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#include</span> <span class="cpf">&lt;pthread.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#if defined(__FreeBSD__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="cp">#include</span> <span class="cpf">&lt;pthread_np.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="cp">#include</span> <span class="cpf">&lt;sys/thr.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#elif defined(__OpenBSD__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="cp">#include</span> <span class="cpf">&lt;pthread_np.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="cp">#ifdef __linux__
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="cm">/* On Linux, the default thread name is the same as the name of the binary.
</span></span></span><span class="line"><span class="cl"><span class="cm">           Additionally, all new threads inherit the name of the thread it got forked from.
</span></span></span><span class="line"><span class="cl"><span class="cm">           For this reason, Loguru use the pthread Thread Local Storage
</span></span></span><span class="line"><span class="cl"><span class="cm">           for storing thread names on Linux. */</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#define LOGURU_PTLS_NAMES 1
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_WINTHREADS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#ifndef _WIN32_WINNT
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="cp">#define _WIN32_WINNT 0x0502
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#define WIN32_LEAN_AND_MEAN
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#define NOMINMAX
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#include</span> <span class="cpf">&lt;windows.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef LOGURU_PTLS_NAMES
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>   <span class="cp">#define LOGURU_PTLS_NAMES 0
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">loguru</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_WITH_FILEABS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="k">struct</span> <span class="nc">FileAbs</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span> <span class="n">path</span><span class="p">[</span><span class="n">PATH_MAX</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span> <span class="n">mode_str</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">struct</span> <span class="nc">stat</span> <span class="n">st</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">FILE</span><span class="o">*</span> <span class="n">fp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">bool</span> <span class="n">is_reopening</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> <span class="c1">// to prevent recursive call in file_reopen.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">decltype</span><span class="p">(</span><span class="n">steady_clock</span><span class="o">::</span><span class="n">now</span><span class="p">())</span> <span class="n">last_check_time</span> <span class="o">=</span> <span class="n">steady_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="k">typedef</span> <span class="n">FILE</span><span class="o">*</span> <span class="n">FileAbs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">Callback</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">string</span>     <span class="n">id</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">log_handler_t</span>   <span class="n">callback</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">void</span><span class="o">*</span>           <span class="n">user_data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">Verbosity</span>       <span class="n">verbosity</span><span class="p">;</span> <span class="c1">// Does not change!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">close_handler_t</span> <span class="n">close</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">flush_handler_t</span> <span class="n">flush</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">unsigned</span>        <span class="n">indentation</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">CallbackVec</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Callback</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">StringPair</span>     <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">StringPairList</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">StringPair</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="k">auto</span> <span class="n">s_start_time</span> <span class="o">=</span> <span class="n">steady_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Verbosity</span> <span class="n">g_stderr_verbosity</span>  <span class="o">=</span> <span class="n">Verbosity_0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span>      <span class="n">g_colorlogtostderr</span>  <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">unsigned</span>  <span class="n">g_flush_interval_ms</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span>      <span class="n">g_preamble_header</span>   <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span>      <span class="n">g_preamble</span>          <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Verbosity</span> <span class="n">g_internal_verbosity</span> <span class="o">=</span> <span class="n">Verbosity_0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Preamble details
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">bool</span>      <span class="n">g_preamble_date</span>     <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span>      <span class="n">g_preamble_time</span>     <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span>      <span class="n">g_preamble_uptime</span>   <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span>      <span class="n">g_preamble_thread</span>   <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span>      <span class="n">g_preamble_file</span>     <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span>      <span class="n">g_preamble_verbose</span>  <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span>      <span class="n">g_preamble_pipe</span>     <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">recursive_mutex</span>  <span class="n">s_mutex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">Verbosity</span>             <span class="n">s_max_out_verbosity</span> <span class="o">=</span> <span class="n">Verbosity_OFF</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span>           <span class="n">s_argv0_filename</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span>           <span class="n">s_arguments</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">char</span>                  <span class="n">s_current_dir</span><span class="p">[</span><span class="n">PATH_MAX</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">CallbackVec</span>           <span class="n">s_callbacks</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">fatal_handler_t</span>       <span class="n">s_fatal_handler</span>   <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">verbosity_to_name_t</span>   <span class="n">s_verbosity_to_name_callback</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">name_to_verbosity_t</span>   <span class="n">s_name_to_verbosity_callback</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">StringPairList</span>        <span class="n">s_user_stack_cleanups</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">bool</span>                  <span class="n">s_strip_file_path</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">atomic</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="o">&gt;</span> <span class="n">s_stderr_indentation</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// For periodic flushing:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="o">*</span> <span class="n">s_flush_thread</span>   <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">bool</span>         <span class="n">s_needs_flushing</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="k">const</span> <span class="kt">bool</span> <span class="n">s_terminal_has_color</span> <span class="o">=</span> <span class="p">[](){</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="cp">#ifndef ENABLE_VIRTUAL_TERMINAL_PROCESSING
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="cp">#define ENABLE_VIRTUAL_TERMINAL_PROCESSING  0x0004
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">            <span class="n">HANDLE</span> <span class="n">hOut</span> <span class="o">=</span> <span class="n">GetStdHandle</span><span class="p">(</span><span class="n">STD_OUTPUT_HANDLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">hOut</span> <span class="o">!=</span> <span class="n">INVALID_HANDLE_VALUE</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">DWORD</span> <span class="n">dwMode</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">GetConsoleMode</span><span class="p">(</span><span class="n">hOut</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dwMode</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">dwMode</span> <span class="o">|=</span> <span class="n">ENABLE_VIRTUAL_TERMINAL_PROCESSING</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="nf">SetConsoleMode</span><span class="p">(</span><span class="n">hOut</span><span class="p">,</span> <span class="n">dwMode</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">isatty</span><span class="p">(</span><span class="n">STDERR_FILENO</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">term</span> <span class="o">=</span> <span class="n">getenv</span><span class="p">(</span><span class="s">&#34;TERM&#34;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="s">&#34;cygwin&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="o">||</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="s">&#34;linux&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="o">||</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="s">&#34;rxvt-unicode-256color&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="o">||</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="s">&#34;screen&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="o">||</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="s">&#34;screen-256color&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="o">||</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="s">&#34;screen.xterm-256color&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="o">||</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="s">&#34;tmux-256color&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="o">||</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="s">&#34;xterm&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="o">||</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="s">&#34;xterm-256color&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="o">||</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="s">&#34;xterm-termite&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="o">||</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="s">&#34;xterm-color&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="p">}();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">void</span> <span class="nf">print_preamble_header</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">out_buff</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">out_buff_size</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cp">#if LOGURU_PTLS_NAMES
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="k">static</span> <span class="n">pthread_once_t</span> <span class="n">s_pthread_key_once</span> <span class="o">=</span> <span class="n">PTHREAD_ONCE_INIT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="n">pthread_key_t</span>  <span class="n">s_pthread_key_name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">void</span> <span class="nf">make_pthread_key_name</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">pthread_key_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s_pthread_key_name</span><span class="p">,</span> <span class="n">free</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ------------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Colors
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">terminal_has_color</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Colors
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp">#define VTSEQ(ID) (&#34;\x1b[1;&#34; #ID &#34;m&#34;)
</span></span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp">#define VTSEQ(ID) (&#34;\x1b[&#34; #ID &#34;m&#34;)
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_black</span><span class="p">()</span>      <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_red</span><span class="p">()</span>        <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_green</span><span class="p">()</span>      <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_yellow</span><span class="p">()</span>     <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">33</span><span class="p">)</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_blue</span><span class="p">()</span>       <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">34</span><span class="p">)</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_purple</span><span class="p">()</span>     <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">35</span><span class="p">)</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_cyan</span><span class="p">()</span>       <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">36</span><span class="p">)</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_light_gray</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">37</span><span class="p">)</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_white</span><span class="p">()</span>      <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">37</span><span class="p">)</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_light_red</span><span class="p">()</span>  <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">91</span><span class="p">)</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_dim</span><span class="p">()</span>        <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Formating
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_bold</span><span class="p">()</span>       <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_underline</span><span class="p">()</span>  <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// You should end each line with this!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">terminal_reset</span><span class="p">()</span>      <span class="p">{</span> <span class="k">return</span> <span class="n">s_terminal_has_color</span> <span class="o">?</span> <span class="n">VTSEQ</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ------------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#if LOGURU_WITH_FILEABS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="kt">void</span> <span class="nf">file_reopen</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kr">inline</span> <span class="n">FILE</span><span class="o">*</span> <span class="nf">to_file</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">FileAbs</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">user_data</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">fp</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="kr">inline</span> <span class="n">FILE</span><span class="o">*</span> <span class="nf">to_file</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">FILE</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">user_data</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">file_log</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">,</span> <span class="k">const</span> <span class="n">Message</span><span class="o">&amp;</span> <span class="n">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_WITH_FILEABS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="n">FileAbs</span><span class="o">*</span> <span class="n">file_abs</span> <span class="o">=</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">FileAbs</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">user_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">is_reopening</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// It is better checking file change every minute/hour/day,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// instead of doing this every time we log.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// Here check_interval is set to zero to enable checking every time;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">const</span> <span class="k">auto</span> <span class="n">check_interval</span> <span class="o">=</span> <span class="n">seconds</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">seconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">steady_clock</span><span class="o">::</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">last_check_time</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">check_interval</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">last_check_time</span> <span class="o">=</span> <span class="n">steady_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">file_reopen</span><span class="p">(</span><span class="n">user_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">FILE</span><span class="o">*</span> <span class="n">file</span> <span class="o">=</span> <span class="n">to_file</span><span class="p">(</span><span class="n">user_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">file</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="n">FILE</span><span class="o">*</span> <span class="n">file</span> <span class="o">=</span> <span class="n">to_file</span><span class="p">(</span><span class="n">user_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="n">fprintf</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;%s%s%s%s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">message</span><span class="p">.</span><span class="n">preamble</span><span class="p">,</span> <span class="n">message</span><span class="p">.</span><span class="n">indentation</span><span class="p">,</span> <span class="n">message</span><span class="p">.</span><span class="n">prefix</span><span class="p">,</span> <span class="n">message</span><span class="p">.</span><span class="n">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_flush_interval_ms</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">fflush</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">file_close</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">FILE</span><span class="o">*</span> <span class="n">file</span> <span class="o">=</span> <span class="n">to_file</span><span class="p">(</span><span class="n">user_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_WITH_FILEABS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="k">delete</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">FileAbs</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">user_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">file_flush</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">FILE</span><span class="o">*</span> <span class="n">file</span> <span class="o">=</span> <span class="n">to_file</span><span class="p">(</span><span class="n">user_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">fflush</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_WITH_FILEABS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="kt">void</span> <span class="nf">file_reopen</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">FileAbs</span> <span class="o">*</span> <span class="n">file_abs</span> <span class="o">=</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">FileAbs</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">user_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">struct</span> <span class="nc">stat</span> <span class="n">st</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">fp</span> <span class="o">||</span> <span class="p">(</span><span class="n">ret</span> <span class="o">=</span> <span class="n">stat</span><span class="p">(</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">path</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">st</span><span class="p">))</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="p">(</span><span class="n">st</span><span class="p">.</span><span class="n">st_ino</span> <span class="o">!=</span> <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">st</span><span class="p">.</span><span class="n">st_ino</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">is_reopening</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">fp</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">fclose</span><span class="p">(</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">fp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">fp</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">VLOG_F</span><span class="p">(</span><span class="n">g_internal_verbosity</span><span class="p">,</span> <span class="s">&#34;Reopening file &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39; due to previous error&#34;</span><span class="p">,</span> <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">const</span> <span class="k">auto</span> <span class="n">why</span> <span class="o">=</span> <span class="n">errno_as_text</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="n">VLOG_F</span><span class="p">(</span><span class="n">g_internal_verbosity</span><span class="p">,</span> <span class="s">&#34;Reopening file &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39; due to &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39;&#34;</span><span class="p">,</span> <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">path</span><span class="p">,</span> <span class="n">why</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">VLOG_F</span><span class="p">(</span><span class="n">g_internal_verbosity</span><span class="p">,</span> <span class="s">&#34;Reopening file &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39; due to file changed&#34;</span><span class="p">,</span> <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// try reopen current file.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">create_directories</span><span class="p">(</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">path</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">LOG_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="s">&#34;Failed to create directories to &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39;&#34;</span><span class="p">,</span> <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">fp</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">path</span><span class="p">,</span> <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">mode_str</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">fp</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">LOG_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="s">&#34;Failed to open &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39;&#34;</span><span class="p">,</span> <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">stat</span><span class="p">(</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">path</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">st</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">is_reopening</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="c1">// ------------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Helpers:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="n">Text</span><span class="o">::~</span><span class="n">Text</span><span class="p">()</span> <span class="p">{</span> <span class="n">free</span><span class="p">(</span><span class="n">_str</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_USE_FMTLIB
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="n">Text</span> <span class="nf">vtextprintf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">format_args</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="n">STRDUP</span><span class="p">(</span><span class="n">fmt</span><span class="o">::</span><span class="n">vformat</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">args</span><span class="p">).</span><span class="n">c_str</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="n">LOGURU_PRINTF_LIKE</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">Text</span> <span class="n">vtextprintf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="n">va_list</span> <span class="n">vlist</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="kt">int</span> <span class="n">bytes_needed</span> <span class="o">=</span> <span class="n">_vscprintf</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">CHECK_F</span><span class="p">(</span><span class="n">bytes_needed</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#34;Bad string format: &#39;%s&#39;&#34;</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span><span class="o">*</span> <span class="n">buff</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">bytes_needed</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">vsnprintf</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="n">bytes_needed</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">Text</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="kt">char</span><span class="o">*</span> <span class="n">buff</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">vasprintf</span><span class="p">(</span><span class="o">&amp;</span><span class="n">buff</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">CHECK_F</span><span class="p">(</span><span class="n">result</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#34;Bad string format: &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39;&#34;</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">Text</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Text</span> <span class="nf">textprintf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="p">...)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_list</span> <span class="n">vlist</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_start</span><span class="p">(</span><span class="n">vlist</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">vtextprintf</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_end</span><span class="p">(</span><span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Overloaded for variadic template matching.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Text</span> <span class="nf">textprintf</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">calloc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">indentation</span><span class="p">(</span><span class="kt">unsigned</span> <span class="n">depth</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">buff</span><span class="p">[]</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;.   .   .   .   .   .   .   .   .   .   &#34;</span> <span class="s">&#34;.   .   .   .   .   .   .   .   .   .   &#34;</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;.   .   .   .   .   .   .   .   .   .   &#34;</span> <span class="s">&#34;.   .   .   .   .   .   .   .   .   .   &#34;</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;.   .   .   .   .   .   .   .   .   .   &#34;</span> <span class="s">&#34;.   .   .   .   .   .   .   .   .   .   &#34;</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;.   .   .   .   .   .   .   .   .   .   &#34;</span> <span class="s">&#34;.   .   .   .   .   .   .   .   .   .   &#34;</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;.   .   .   .   .   .   .   .   .   .   &#34;</span> <span class="s">&#34;.   .   .   .   .   .   .   .   .   .   &#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">const</span> <span class="n">size_t</span> <span class="n">INDENTATION_WIDTH</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">const</span> <span class="n">size_t</span> <span class="n">NUM_INDENTATIONS</span> <span class="o">=</span> <span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">INDENTATION_WIDTH</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">depth</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="o">&gt;</span><span class="p">(</span><span class="n">depth</span><span class="p">,</span> <span class="n">NUM_INDENTATIONS</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">buff</span> <span class="o">+</span> <span class="n">INDENTATION_WIDTH</span> <span class="o">*</span> <span class="p">(</span><span class="n">NUM_INDENTATIONS</span> <span class="o">-</span> <span class="n">depth</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">void</span> <span class="nf">parse_args</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[],</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">verbosity_flag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">arg_dest</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">out_argc</span> <span class="o">=</span> <span class="n">argc</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">arg_it</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">arg_it</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="o">++</span><span class="n">arg_it</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">auto</span> <span class="n">cmd</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="n">arg_it</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="k">auto</span> <span class="n">arg_len</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">verbosity_flag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">strncmp</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">verbosity_flag</span><span class="p">,</span> <span class="n">arg_len</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">std</span><span class="o">::</span><span class="n">isalpha</span><span class="p">(</span><span class="n">cmd</span><span class="p">[</span><span class="n">arg_len</span><span class="p">],</span> <span class="n">std</span><span class="o">::</span><span class="n">locale</span><span class="p">(</span><span class="s">&#34;&#34;</span><span class="p">)))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">out_argc</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">auto</span> <span class="n">value_str</span> <span class="o">=</span> <span class="n">cmd</span> <span class="o">+</span> <span class="n">arg_len</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">value_str</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// Value in separate argument
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="n">arg_it</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">CHECK_LT_F</span><span class="p">(</span><span class="n">arg_it</span><span class="p">,</span> <span class="n">argc</span><span class="p">,</span> <span class="s">&#34;Missing verbosiy level after &#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">verbosity_flag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">value_str</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="n">arg_it</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                    <span class="n">out_argc</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">value_str</span> <span class="o">==</span> <span class="sc">&#39;=&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">value_str</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="k">auto</span> <span class="n">req_verbosity</span> <span class="o">=</span> <span class="n">get_verbosity_from_name</span><span class="p">(</span><span class="n">value_str</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">req_verbosity</span> <span class="o">!=</span> <span class="n">Verbosity_INVALID</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">g_stderr_verbosity</span> <span class="o">=</span> <span class="n">req_verbosity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="kt">char</span><span class="o">*</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">g_stderr_verbosity</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">strtol</span><span class="p">(</span><span class="n">value_str</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">end</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">                    <span class="n">CHECK_F</span><span class="p">(</span><span class="n">end</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">end</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="s">&#34;Invalid verbosity. Expected integer, INFO, WARNING, ERROR or OFF, got &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39;&#34;</span><span class="p">,</span> <span class="n">value_str</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">argv</span><span class="p">[</span><span class="n">arg_dest</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="n">arg_it</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">argc</span> <span class="o">=</span> <span class="n">out_argc</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">argv</span><span class="p">[</span><span class="n">argc</span><span class="p">]</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">long</span> <span class="kt">long</span> <span class="nf">now_ns</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">nanoseconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">().</span><span class="n">time_since_epoch</span><span class="p">()).</span><span class="n">count</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Returns the part of the path after the last / or \ (if any).
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">filename</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">ptr</span> <span class="o">=</span> <span class="n">path</span><span class="p">;</span> <span class="o">*</span><span class="n">ptr</span><span class="p">;</span> <span class="o">++</span><span class="n">ptr</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">ptr</span> <span class="o">==</span> <span class="sc">&#39;/&#39;</span> <span class="o">||</span> <span class="o">*</span><span class="n">ptr</span> <span class="o">==</span> <span class="sc">&#39;\\&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">path</span> <span class="o">=</span> <span class="n">ptr</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ------------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">void</span> <span class="nf">on_atexit</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">VLOG_F</span><span class="p">(</span><span class="n">g_internal_verbosity</span><span class="p">,</span> <span class="s">&#34;atexit&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">flush</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">void</span> <span class="nf">install_signal_handlers</span><span class="p">(</span><span class="kt">bool</span> <span class="n">unsafe_signal_handler</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">void</span> <span class="nf">write_hex_digit</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">num</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">DCHECK_LT_F</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="mi">16u</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="o">&lt;</span> <span class="mi">10u</span><span class="p">)</span> <span class="p">{</span> <span class="n">out</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="kt">char</span><span class="p">(</span><span class="sc">&#39;0&#39;</span> <span class="o">+</span> <span class="n">num</span><span class="p">));</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="p">{</span> <span class="n">out</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="kt">char</span><span class="p">(</span><span class="sc">&#39;A&#39;</span> <span class="o">+</span> <span class="n">num</span> <span class="o">-</span> <span class="mi">10</span><span class="p">));</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">void</span> <span class="nf">write_hex_byte</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">n</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">write_hex_digit</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">4u</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">write_hex_digit</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">n</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">void</span> <span class="nf">escape</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">char</span> <span class="nl">c</span> <span class="p">:</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="cm">/**/</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\a&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">out</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">a&#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\b&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">out</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">b&#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\f&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">out</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">f&#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\n&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">out</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">n&#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\r&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">out</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">r&#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\t&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">out</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">t&#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\v&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">out</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">v&#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\\&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">out</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\\\</span><span class="s">&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\&#39;&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">out</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\\&#39;</span><span class="s">&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\&#34;&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">out</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\\&#34;</span><span class="s">&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span>  <span class="p">{</span> <span class="n">out</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s"> &#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">c</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="mh">0x20</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ASCI control character:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// else if (c &lt; 0x20 || c != (c &amp; 127)) { // ASCII control character or UTF-8:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">out</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">x&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">write_hex_byte</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">c</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="n">out</span> <span class="o">+=</span> <span class="n">c</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Text</span> <span class="nf">errno_as_text</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span> <span class="n">buff</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#if defined(__GLIBC__) &amp;&amp; defined(_GNU_SOURCE)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="c1">// GNU Version
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="n">STRDUP</span><span class="p">(</span><span class="n">strerror_r</span><span class="p">(</span><span class="n">errno</span><span class="p">,</span> <span class="n">buff</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buff</span><span class="p">))));</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#elif defined(__APPLE__) || _POSIX_C_SOURCE &gt;= 200112L
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="c1">// XSI Version
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">strerror_r</span><span class="p">(</span><span class="n">errno</span><span class="p">,</span> <span class="n">buff</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buff</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="n">strdup</span><span class="p">(</span><span class="n">buff</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#elif defined(_WIN32)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="n">strerror_s</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buff</span><span class="p">),</span> <span class="n">errno</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="n">STRDUP</span><span class="p">(</span><span class="n">buff</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="c1">// Not thread-safe.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="n">STRDUP</span><span class="p">(</span><span class="n">strerror</span><span class="p">(</span><span class="n">errno</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">init</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[],</span> <span class="k">const</span> <span class="n">Options</span><span class="o">&amp;</span> <span class="n">options</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">CHECK_GT_F</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span>       <span class="mi">0</span><span class="p">,</span>       <span class="s">&#34;Expected proper argc/argv&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">CHECK_EQ_F</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">argc</span><span class="p">],</span> <span class="k">nullptr</span><span class="p">,</span> <span class="s">&#34;Expected proper argc/argv&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">s_argv0_filename</span> <span class="o">=</span> <span class="n">filename</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="cp">#define getcwd _getcwd
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">getcwd</span><span class="p">(</span><span class="n">s_current_dir</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">s_current_dir</span><span class="p">)))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">const</span> <span class="k">auto</span> <span class="n">error_text</span> <span class="o">=</span> <span class="n">errno_as_text</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">LOG_F</span><span class="p">(</span><span class="n">WARNING</span><span class="p">,</span> <span class="s">&#34;Failed to get current working directory: &#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">error_text</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">s_arguments</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">escape</span><span class="p">(</span><span class="n">s_arguments</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">s_arguments</span> <span class="o">+=</span> <span class="s">&#34; &#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">options</span><span class="p">.</span><span class="n">verbosity_flag</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">parse_args</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">,</span> <span class="n">options</span><span class="p">.</span><span class="n">verbosity_flag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="n">main_thread_name</span> <span class="o">=</span> <span class="n">options</span><span class="p">.</span><span class="n">main_thread_name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="cp">#if LOGURU_PTLS_NAMES || LOGURU_WINTHREADS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="n">set_thread_name</span><span class="p">(</span><span class="n">main_thread_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="cp">#elif LOGURU_PTHREADS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="kt">char</span> <span class="n">old_thread_name</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">                <span class="k">auto</span> <span class="n">this_thread</span> <span class="o">=</span> <span class="n">pthread_self</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="cp">#if defined(__APPLE__) || defined(__linux__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                    <span class="n">pthread_getname_np</span><span class="p">(</span><span class="n">this_thread</span><span class="p">,</span> <span class="n">old_thread_name</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">old_thread_name</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">                <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="k">if</span> <span class="p">(</span><span class="n">old_thread_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="cp">#ifdef __APPLE__
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                        <span class="n">pthread_setname_np</span><span class="p">(</span><span class="n">main_thread_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="cp">#elif defined(__FreeBSD__) || defined(__OpenBSD__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                        <span class="n">pthread_set_name_np</span><span class="p">(</span><span class="n">this_thread</span><span class="p">,</span> <span class="n">main_thread_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="cp">#elif defined(__linux__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                        <span class="n">pthread_setname_np</span><span class="p">(</span><span class="n">this_thread</span><span class="p">,</span> <span class="n">main_thread_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="cp">#endif </span><span class="c1">// LOGURU_PTHREADS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_stderr_verbosity</span> <span class="o">&gt;=</span> <span class="n">Verbosity_INFO</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_header</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">char</span> <span class="n">preamble_explain</span><span class="p">[</span><span class="n">LOGURU_PREAMBLE_WIDTH</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="n">print_preamble_header</span><span class="p">(</span><span class="n">preamble_explain</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">preamble_explain</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">g_colorlogtostderr</span> <span class="o">&amp;&amp;</span> <span class="n">s_terminal_has_color</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&#34;%s%s%s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">terminal_reset</span><span class="p">(),</span> <span class="n">terminal_dim</span><span class="p">(),</span> <span class="n">preamble_explain</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&#34;%s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">preamble_explain</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">fflush</span><span class="p">(</span><span class="n">stderr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">VLOG_F</span><span class="p">(</span><span class="n">g_internal_verbosity</span><span class="p">,</span> <span class="s">&#34;arguments: &#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">s_arguments</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">strlen</span><span class="p">(</span><span class="n">s_current_dir</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">VLOG_F</span><span class="p">(</span><span class="n">g_internal_verbosity</span><span class="p">,</span> <span class="s">&#34;Current dir: &#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">s_current_dir</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">VLOG_F</span><span class="p">(</span><span class="n">g_internal_verbosity</span><span class="p">,</span> <span class="s">&#34;stderr verbosity: &#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">g_stderr_verbosity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">VLOG_F</span><span class="p">(</span><span class="n">g_internal_verbosity</span><span class="p">,</span> <span class="s">&#34;-----------------------------------&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">install_signal_handlers</span><span class="p">(</span><span class="n">options</span><span class="p">.</span><span class="n">unsafe_signal_handler</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">atexit</span><span class="p">(</span><span class="n">on_atexit</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">shutdown</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">VLOG_F</span><span class="p">(</span><span class="n">g_internal_verbosity</span><span class="p">,</span> <span class="s">&#34;loguru::shutdown()&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">remove_all_callbacks</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">set_fatal_handler</span><span class="p">(</span><span class="k">nullptr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">set_verbosity_to_name_callback</span><span class="p">(</span><span class="k">nullptr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">set_name_to_verbosity_callback</span><span class="p">(</span><span class="k">nullptr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">write_date_time</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">buff</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">buff_size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">now</span> <span class="o">=</span> <span class="n">system_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">long</span> <span class="kt">long</span> <span class="n">ms_since_epoch</span> <span class="o">=</span> <span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">microseconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">now</span><span class="p">.</span><span class="n">time_since_epoch</span><span class="p">()).</span><span class="n">count</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">time_t</span> <span class="n">sec_since_epoch</span> <span class="o">=</span> <span class="n">time_t</span><span class="p">(</span><span class="n">ms_since_epoch</span> <span class="o">/</span> <span class="mi">1000000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">tm</span> <span class="n">time_info</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">localtime_r</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sec_since_epoch</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">time_info</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">snprintf</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="n">buff_size</span><span class="p">,</span> <span class="s">&#34;%04d%02d%02d_%02d%02d%02d.%06lld&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="mi">1900</span> <span class="o">+</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_year</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_mon</span><span class="p">,</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_mday</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">time_info</span><span class="p">.</span><span class="n">tm_hour</span><span class="p">,</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_min</span><span class="p">,</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_sec</span><span class="p">,</span> <span class="n">ms_since_epoch</span> <span class="o">%</span> <span class="mi">1000000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">argv0_filename</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">s_argv0_filename</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">arguments</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">s_arguments</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">current_dir</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">s_current_dir</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">home_dir</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="kt">char</span><span class="o">*</span> <span class="n">user_profile</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">size_t</span> <span class="n">len</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">errno_t</span> <span class="n">err</span> <span class="o">=</span> <span class="n">_dupenv_s</span><span class="p">(</span><span class="o">&amp;</span><span class="n">user_profile</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">len</span><span class="p">,</span> <span class="s">&#34;USERPROFILE&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">CHECK_F</span><span class="p">(</span><span class="n">err</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#34;Missing USERPROFILE&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">user_profile</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#else </span><span class="c1">// _WIN32
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">auto</span> <span class="n">home</span> <span class="o">=</span> <span class="n">getenv</span><span class="p">(</span><span class="s">&#34;HOME&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">CHECK_F</span><span class="p">(</span><span class="n">home</span> <span class="o">!=</span> <span class="k">nullptr</span><span class="p">,</span> <span class="s">&#34;Missing HOME&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">home</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#endif </span><span class="c1">// _WIN32
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">suggest_log_path</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">prefix</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">buff</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">buff_size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">prefix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;~&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">snprintf</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="n">buff_size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;%s%s&#34;</span><span class="p">,</span> <span class="n">home_dir</span><span class="p">(),</span> <span class="n">prefix</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">snprintf</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="n">buff_size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;%s&#34;</span><span class="p">,</span> <span class="n">prefix</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Check for terminating /
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">size_t</span> <span class="n">n</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">buff</span><span class="p">[</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">&#39;/&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">CHECK_F</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="n">buff_size</span><span class="p">,</span> <span class="s">&#34;Filename buffer too small&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">buff</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;/&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">buff</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="n">strncat_s</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="n">buff_size</span> <span class="o">-</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">s_argv0_filename</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span> <span class="n">buff_size</span> <span class="o">-</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">strncat_s</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="n">buff_size</span> <span class="o">-</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;/&#34;</span><span class="p">,</span>                      <span class="n">buff_size</span> <span class="o">-</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">write_date_time</span><span class="p">(</span><span class="n">buff</span> <span class="o">+</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">),</span>    <span class="n">buff_size</span> <span class="o">-</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">strncat_s</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="n">buff_size</span> <span class="o">-</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;.log&#34;</span><span class="p">,</span>                   <span class="n">buff_size</span> <span class="o">-</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="n">strncat</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="n">s_argv0_filename</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span> <span class="n">buff_size</span> <span class="o">-</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">strncat</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">&#34;/&#34;</span><span class="p">,</span> <span class="n">buff_size</span> <span class="o">-</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">write_date_time</span><span class="p">(</span><span class="n">buff</span> <span class="o">+</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">),</span> <span class="n">buff_size</span> <span class="o">-</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">strncat</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">&#34;.log&#34;</span><span class="p">,</span> <span class="n">buff_size</span> <span class="o">-</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">create_directories</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file_path_const</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">CHECK_F</span><span class="p">(</span><span class="n">file_path_const</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">file_path_const</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span><span class="o">*</span> <span class="n">file_path</span> <span class="o">=</span> <span class="n">STRDUP</span><span class="p">(</span><span class="n">file_path_const</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">strchr</span><span class="p">(</span><span class="n">file_path</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="sc">&#39;/&#39;</span><span class="p">);</span> <span class="n">p</span><span class="p">;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">strchr</span><span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="sc">&#39;/&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="k">if</span> <span class="p">(</span><span class="n">_mkdir</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="k">if</span> <span class="p">(</span><span class="n">mkdir</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="mo">0755</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="k">if</span> <span class="p">(</span><span class="n">errno</span> <span class="o">!=</span> <span class="n">EEXIST</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">LOG_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="s">&#34;Failed to create directory &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39;&#34;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">LOG_IF_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">errno</span> <span class="o">==</span> <span class="n">EACCES</span><span class="p">,</span>       <span class="s">&#34;EACCES&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">LOG_IF_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">errno</span> <span class="o">==</span> <span class="n">ENAMETOOLONG</span><span class="p">,</span> <span class="s">&#34;ENAMETOOLONG&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">LOG_IF_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">errno</span> <span class="o">==</span> <span class="n">ENOENT</span><span class="p">,</span>       <span class="s">&#34;ENOENT&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">LOG_IF_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">errno</span> <span class="o">==</span> <span class="n">ENOTDIR</span><span class="p">,</span>      <span class="s">&#34;ENOTDIR&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">LOG_IF_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">errno</span> <span class="o">==</span> <span class="n">ELOOP</span><span class="p">,</span>        <span class="s">&#34;ELOOP&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="sc">&#39;/&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">free</span><span class="p">(</span><span class="n">file_path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="sc">&#39;/&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">free</span><span class="p">(</span><span class="n">file_path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="n">add_file</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">path_in</span><span class="p">,</span> <span class="n">FileMode</span> <span class="n">mode</span><span class="p">,</span> <span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span> <span class="n">path</span><span class="p">[</span><span class="n">PATH_MAX</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">path_in</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;~&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">snprintf</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;%s%s&#34;</span><span class="p">,</span> <span class="n">home_dir</span><span class="p">(),</span> <span class="n">path_in</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">snprintf</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;%s&#34;</span><span class="p">,</span> <span class="n">path_in</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">create_directories</span><span class="p">(</span><span class="n">path</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">LOG_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="s">&#34;Failed to create directories to &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39;&#34;</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">mode_str</span> <span class="o">=</span> <span class="p">(</span><span class="n">mode</span> <span class="o">==</span> <span class="n">FileMode</span><span class="o">::</span><span class="n">Truncate</span> <span class="o">?</span> <span class="s">&#34;w&#34;</span> <span class="o">:</span> <span class="s">&#34;a&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">FILE</span><span class="o">*</span> <span class="n">file</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="n">errno_t</span> <span class="n">file_error</span> <span class="o">=</span> <span class="n">fopen_s</span><span class="p">(</span><span class="o">&amp;</span><span class="n">file</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">mode_str</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">file_error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="n">file</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">mode_str</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">file</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="n">LOG_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="s">&#34;Failed to open &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39;&#34;</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_WITH_FILEABS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="n">FileAbs</span><span class="o">*</span> <span class="n">file_abs</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileAbs</span><span class="p">();</span> <span class="c1">// this is deleted in file_close;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">snprintf</span><span class="p">(</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">path</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">path</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;%s&#34;</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">snprintf</span><span class="p">(</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">mode_str</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">mode_str</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;%s&#34;</span><span class="p">,</span> <span class="n">mode_str</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">stat</span><span class="p">(</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">path</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">st</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">fp</span> <span class="o">=</span> <span class="n">file</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">file_abs</span><span class="o">-&gt;</span><span class="n">verbosity</span> <span class="o">=</span> <span class="n">verbosity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">add_callback</span><span class="p">(</span><span class="n">path_in</span><span class="p">,</span> <span class="n">file_log</span><span class="p">,</span> <span class="n">file_abs</span><span class="p">,</span> <span class="n">verbosity</span><span class="p">,</span> <span class="n">file_close</span><span class="p">,</span> <span class="n">file_flush</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="n">add_callback</span><span class="p">(</span><span class="n">path_in</span><span class="p">,</span> <span class="n">file_log</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">verbosity</span><span class="p">,</span> <span class="n">file_close</span><span class="p">,</span> <span class="n">file_flush</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">mode</span> <span class="o">==</span> <span class="n">FileMode</span><span class="o">::</span><span class="n">Append</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">fprintf</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;</span><span class="se">\n\n\n\n\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">s_arguments</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">fprintf</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;arguments: %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">s_arguments</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">strlen</span><span class="p">(</span><span class="n">s_current_dir</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">fprintf</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;Current dir: %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">s_current_dir</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">fprintf</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;File verbosity level: %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">verbosity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_header</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">char</span> <span class="n">preamble_explain</span><span class="p">[</span><span class="n">LOGURU_PREAMBLE_WIDTH</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="n">print_preamble_header</span><span class="p">(</span><span class="n">preamble_explain</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">preamble_explain</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="n">fprintf</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;%s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">preamble_explain</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">fflush</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">VLOG_F</span><span class="p">(</span><span class="n">g_internal_verbosity</span><span class="p">,</span> <span class="s">&#34;Logging to &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39;, mode: &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39;, verbosity: &#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">mode_str</span><span class="p">,</span> <span class="n">verbosity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Will be called right before abort().
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="n">set_fatal_handler</span><span class="p">(</span><span class="n">fatal_handler_t</span> <span class="n">handler</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">s_fatal_handler</span> <span class="o">=</span> <span class="n">handler</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">fatal_handler_t</span> <span class="n">get_fatal_handler</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">s_fatal_handler</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">set_verbosity_to_name_callback</span><span class="p">(</span><span class="n">verbosity_to_name_t</span> <span class="n">callback</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">s_verbosity_to_name_callback</span> <span class="o">=</span> <span class="n">callback</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">set_name_to_verbosity_callback</span><span class="p">(</span><span class="n">name_to_verbosity_t</span> <span class="n">callback</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">s_name_to_verbosity_callback</span> <span class="o">=</span> <span class="n">callback</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">add_stack_cleanup</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">find_this</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">replace_with_this</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">strlen</span><span class="p">(</span><span class="n">find_this</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">replace_with_this</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">LOG_F</span><span class="p">(</span><span class="n">WARNING</span><span class="p">,</span> <span class="s">&#34;add_stack_cleanup: the replacement should be shorter than the pattern!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">s_user_stack_cleanups</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">StringPair</span><span class="p">(</span><span class="n">find_this</span><span class="p">,</span> <span class="n">replace_with_this</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">void</span> <span class="n">on_callback_change</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">s_max_out_verbosity</span> <span class="o">=</span> <span class="n">Verbosity_OFF</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">callback</span> <span class="p">:</span> <span class="n">s_callbacks</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">s_max_out_verbosity</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">s_max_out_verbosity</span><span class="p">,</span> <span class="n">callback</span><span class="p">.</span><span class="n">verbosity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">add_callback</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="k">const</span> <span class="kt">char</span><span class="o">*</span>     <span class="n">id</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">log_handler_t</span>   <span class="n">callback</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="kt">void</span><span class="o">*</span>           <span class="n">user_data</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">Verbosity</span>       <span class="n">verbosity</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">close_handler_t</span> <span class="n">on_close</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">flush_handler_t</span> <span class="n">on_flush</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">recursive_mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">s_mutex</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">s_callbacks</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">Callback</span><span class="p">{</span><span class="n">id</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">user_data</span><span class="p">,</span> <span class="n">verbosity</span><span class="p">,</span> <span class="n">on_close</span><span class="p">,</span> <span class="n">on_flush</span><span class="p">,</span> <span class="mi">0</span><span class="p">});</span>
</span></span><span class="line"><span class="cl">        <span class="n">on_callback_change</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Returns a custom verbosity name if one is available, or nullptr.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// See also set_verbosity_to_name_callback.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">get_verbosity_name</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">name</span> <span class="o">=</span> <span class="n">s_verbosity_to_name_callback</span>
</span></span><span class="line"><span class="cl">                <span class="o">?</span> <span class="p">(</span><span class="o">*</span><span class="n">s_verbosity_to_name_callback</span><span class="p">)(</span><span class="n">verbosity</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="o">:</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Use standard replacements if callback fails:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">verbosity</span> <span class="o">&lt;=</span> <span class="n">Verbosity_FATAL</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">name</span> <span class="o">=</span> <span class="s">&#34;FATL&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">verbosity</span> <span class="o">==</span> <span class="n">Verbosity_ERROR</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">name</span> <span class="o">=</span> <span class="s">&#34;ERR&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">verbosity</span> <span class="o">==</span> <span class="n">Verbosity_WARNING</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">name</span> <span class="o">=</span> <span class="s">&#34;WARN&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">verbosity</span> <span class="o">==</span> <span class="n">Verbosity_INFO</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">name</span> <span class="o">=</span> <span class="s">&#34;INFO&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Returns Verbosity_INVALID if the name is not found.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// See also set_name_to_verbosity_callback.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Verbosity</span> <span class="n">get_verbosity_from_name</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">verbosity</span> <span class="o">=</span> <span class="n">s_name_to_verbosity_callback</span>
</span></span><span class="line"><span class="cl">                <span class="o">?</span> <span class="p">(</span><span class="o">*</span><span class="n">s_name_to_verbosity_callback</span><span class="p">)(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="o">:</span> <span class="n">Verbosity_INVALID</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Use standard replacements if callback fails:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="n">verbosity</span> <span class="o">==</span> <span class="n">Verbosity_INVALID</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">&#34;OFF&#34;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">verbosity</span> <span class="o">=</span> <span class="n">Verbosity_OFF</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">&#34;INFO&#34;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">verbosity</span> <span class="o">=</span> <span class="n">Verbosity_INFO</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">&#34;WARNING&#34;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">verbosity</span> <span class="o">=</span> <span class="n">Verbosity_WARNING</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">&#34;ERROR&#34;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">verbosity</span> <span class="o">=</span> <span class="n">Verbosity_ERROR</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">&#34;FATAL&#34;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">verbosity</span> <span class="o">=</span> <span class="n">Verbosity_FATAL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">verbosity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="n">remove_callback</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">recursive_mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">s_mutex</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">find_if</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">s_callbacks</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">s_callbacks</span><span class="p">),</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="k">const</span> <span class="n">Callback</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">c</span><span class="p">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">id</span><span class="p">;</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">it</span> <span class="o">!=</span> <span class="n">s_callbacks</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">close</span><span class="p">)</span> <span class="p">{</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">close</span><span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">user_data</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">s_callbacks</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">it</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">on_callback_change</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">LOG_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="s">&#34;Failed to locate callback with id &#39;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#39;&#34;</span><span class="p">,</span> <span class="n">id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">remove_all_callbacks</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">recursive_mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">s_mutex</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="nl">callback</span> <span class="p">:</span> <span class="n">s_callbacks</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">callback</span><span class="p">.</span><span class="n">close</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">callback</span><span class="p">.</span><span class="n">close</span><span class="p">(</span><span class="n">callback</span><span class="p">.</span><span class="n">user_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">s_callbacks</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">on_callback_change</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Returns the maximum of g_stderr_verbosity and all file/custom outputs.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Verbosity</span> <span class="n">current_verbosity_cutoff</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">g_stderr_verbosity</span> <span class="o">&gt;</span> <span class="n">s_max_out_verbosity</span> <span class="o">?</span>
</span></span><span class="line"><span class="cl">               <span class="nl">g_stderr_verbosity</span> <span class="p">:</span> <span class="n">s_max_out_verbosity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_WINTHREADS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="kt">char</span><span class="o">*</span> <span class="n">get_thread_name_win32</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">__declspec</span><span class="p">(</span> <span class="kr">thread</span> <span class="p">)</span> <span class="k">static</span> <span class="kt">char</span> <span class="n">thread_name</span><span class="p">[</span><span class="n">LOGURU_THREADNAME_WIDTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">&amp;</span><span class="n">thread_name</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// LOGURU_WINTHREADS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">set_thread_name</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#if LOGURU_PTLS_NAMES
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">pthread_once</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s_pthread_key_once</span><span class="p">,</span> <span class="n">make_pthread_key_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">pthread_setspecific</span><span class="p">(</span><span class="n">s_pthread_key_name</span><span class="p">,</span> <span class="n">STRDUP</span><span class="p">(</span><span class="n">name</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="cp">#elif LOGURU_PTHREADS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="cp">#ifdef __APPLE__
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="n">pthread_setname_np</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="cp">#elif defined(__FreeBSD__) || defined(__OpenBSD__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="n">pthread_set_name_np</span><span class="p">(</span><span class="n">pthread_self</span><span class="p">(),</span> <span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="cp">#elif defined(__linux__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="n">pthread_setname_np</span><span class="p">(</span><span class="n">pthread_self</span><span class="p">(),</span> <span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="cp">#elif LOGURU_WINTHREADS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="n">strncpy_s</span><span class="p">(</span><span class="n">get_thread_name_win32</span><span class="p">(),</span> <span class="n">LOGURU_THREADNAME_WIDTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">_TRUNCATE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#else </span><span class="c1">// LOGURU_PTHREADS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#endif </span><span class="c1">// LOGURU_PTHREADS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_PTLS_NAMES
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">get_thread_name_ptls</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">pthread_once</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s_pthread_key_once</span><span class="p">,</span> <span class="n">make_pthread_key_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">pthread_getspecific</span><span class="p">(</span><span class="n">s_pthread_key_name</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// LOGURU_PTLS_NAMES
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">get_thread_name</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">buffer</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">length</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">right_align_hext_id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">right_align_hext_id</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="n">CHECK_NE_F</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="mi">0u</span><span class="p">,</span> <span class="s">&#34;Zero length buffer in get_thread_name&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">CHECK_NOTNULL_F</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="s">&#34;nullptr in get_thread_name&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_PTHREADS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="k">auto</span> <span class="kr">thread</span> <span class="o">=</span> <span class="n">pthread_self</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#if LOGURU_PTLS_NAMES
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="k">if</span> <span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span> <span class="o">=</span> <span class="n">get_thread_name_ptls</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">snprintf</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="s">&#34;%s&#34;</span><span class="p">,</span> <span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#elif defined(__APPLE__) || defined(__linux__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="n">pthread_getname_np</span><span class="p">(</span><span class="kr">thread</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">length</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="cp">#ifdef __APPLE__
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="kt">uint64_t</span> <span class="n">thread_id</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">pthread_threadid_np</span><span class="p">(</span><span class="kr">thread</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">thread_id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="cp">#elif defined(__FreeBSD__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="kt">long</span> <span class="n">thread_id</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">thr_self</span><span class="p">(</span><span class="o">&amp;</span><span class="n">thread_id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="cp">#elif defined(__OpenBSD__)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="kt">unsigned</span> <span class="n">thread_id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="kt">uint64_t</span> <span class="n">thread_id</span> <span class="o">=</span> <span class="kr">thread</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="k">if</span> <span class="p">(</span><span class="n">right_align_hext_id</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">snprintf</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="s">&#34;%*X&#34;</span><span class="p">,</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="o">&gt;</span><span class="p">(</span><span class="n">thread_id</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">snprintf</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="s">&#34;%X&#34;</span><span class="p">,</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="o">&gt;</span><span class="p">(</span><span class="n">thread_id</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#elif LOGURU_WINTHREADS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="k">if</span> <span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span> <span class="o">=</span> <span class="n">get_thread_name_win32</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">snprintf</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="p">(</span><span class="n">size_t</span><span class="p">)</span><span class="n">length</span><span class="p">,</span> <span class="s">&#34;%s&#34;</span><span class="p">,</span> <span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else </span><span class="c1">// !LOGURU_WINTHREADS &amp;&amp; !LOGURU_WINTHREADS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Stack traces
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_STACKTRACES
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="n">Text</span> <span class="n">demangle</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">status</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span><span class="o">*</span> <span class="n">demangled</span> <span class="o">=</span> <span class="n">abi</span><span class="o">::</span><span class="n">__cxa_demangle</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">status</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Text</span> <span class="n">result</span><span class="p">{</span><span class="n">status</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="nl">demangled</span> <span class="p">:</span> <span class="n">STRDUP</span><span class="p">(</span><span class="n">name</span><span class="p">)};</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cp">#if LOGURU_RTTI
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">type_name</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">auto</span> <span class="n">demangled</span> <span class="o">=</span> <span class="n">demangle</span><span class="p">(</span><span class="k">typeid</span><span class="p">(</span><span class="n">T</span><span class="p">).</span><span class="n">name</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">demangled</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#endif </span><span class="c1">// LOGURU_RTTI
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="k">const</span> <span class="n">StringPairList</span> <span class="n">REPLACE_LIST</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#if LOGURU_RTTI
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="p">{</span> <span class="n">type_name</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(),</span>    <span class="s">&#34;std::string&#34;</span>    <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span> <span class="n">type_name</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">wstring</span><span class="o">&gt;</span><span class="p">(),</span>   <span class="s">&#34;std::wstring&#34;</span>   <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span> <span class="n">type_name</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">u16string</span><span class="o">&gt;</span><span class="p">(),</span> <span class="s">&#34;std::u16string&#34;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span> <span class="n">type_name</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">u32string</span><span class="o">&gt;</span><span class="p">(),</span> <span class="s">&#34;std::u32string&#34;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#endif </span><span class="c1">// LOGURU_RTTI
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">{</span> <span class="s">&#34;std::__1::&#34;</span><span class="p">,</span>                <span class="s">&#34;std::&#34;</span>          <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="s">&#34;__thiscall &#34;</span><span class="p">,</span>               <span class="s">&#34;&#34;</span>               <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="s">&#34;__cdecl &#34;</span><span class="p">,</span>                  <span class="s">&#34;&#34;</span>               <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">do_replacements</span><span class="p">(</span><span class="k">const</span> <span class="n">StringPairList</span><span class="o">&amp;</span> <span class="n">replacements</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="nl">p</span> <span class="p">:</span> <span class="n">replacements</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">first</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// On gcc, &#34;type_name&lt;std::string&gt;()&#34; is &#34;std::string&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">size_t</span> <span class="n">it</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">while</span> <span class="p">((</span><span class="n">it</span><span class="o">=</span><span class="n">str</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">first</span><span class="p">))</span> <span class="o">!=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">npos</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">str</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">first</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">prettify_stacktrace</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">input</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">output</span> <span class="o">=</span> <span class="n">input</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">do_replacements</span><span class="p">(</span><span class="n">s_user_stack_cleanups</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">do_replacements</span><span class="p">(</span><span class="n">REPLACE_LIST</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">std</span><span class="o">::</span><span class="n">regex</span> <span class="n">std_allocator_re</span><span class="p">(</span><span class="n">R</span><span class="s">&#34;(,\s*std::allocator&lt;[^&lt;&gt;]+&gt;)&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">output</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">regex_replace</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">std_allocator_re</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">&#34;&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">std</span><span class="o">::</span><span class="n">regex</span> <span class="n">template_spaces_re</span><span class="p">(</span><span class="n">R</span><span class="s">&#34;(&lt;\s*([^&lt;&gt; ]+)\s*&gt;)&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">output</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">regex_replace</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">template_spaces_re</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">&#34;&lt;$1&gt;&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">regex_error</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Probably old GCC.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">output</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">stacktrace_as_stdstring</span><span class="p">(</span><span class="kt">int</span> <span class="n">skip</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// From https://gist.github.com/fmela/591333
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">void</span><span class="o">*</span> <span class="n">callstack</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="k">const</span> <span class="k">auto</span> <span class="n">max_frames</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">callstack</span><span class="p">)</span> <span class="o">/</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">callstack</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">num_frames</span> <span class="o">=</span> <span class="n">backtrace</span><span class="p">(</span><span class="n">callstack</span><span class="p">,</span> <span class="n">max_frames</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span><span class="o">**</span> <span class="n">symbols</span> <span class="o">=</span> <span class="n">backtrace_symbols</span><span class="p">(</span><span class="n">callstack</span><span class="p">,</span> <span class="n">num_frames</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Print stack traces so the most relevant ones are written last
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// Rationale: http://yellerapp.com/posts/2015-01-22-upside-down-stacktraces.html
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">num_frames</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">skip</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="n">Dl_info</span> <span class="n">info</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">dladdr</span><span class="p">(</span><span class="n">callstack</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">info</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">info</span><span class="p">.</span><span class="n">dli_sname</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">char</span><span class="o">*</span> <span class="n">demangled</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">status</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">dli_sname</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;_&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">demangled</span> <span class="o">=</span> <span class="n">abi</span><span class="o">::</span><span class="n">__cxa_demangle</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">dli_sname</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">status</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buf</span><span class="p">),</span> <span class="s">&#34;%-3d %*p %s + %zd</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                         <span class="n">i</span> <span class="o">-</span> <span class="n">skip</span><span class="p">,</span> <span class="kt">int</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span> <span class="n">callstack</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                         <span class="n">status</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="nl">demangled</span> <span class="p">:</span>
</span></span><span class="line"><span class="cl">                         <span class="n">info</span><span class="p">.</span><span class="n">dli_sname</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="n">symbols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:</span> <span class="n">info</span><span class="p">.</span><span class="n">dli_sname</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                         <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">callstack</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">-</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">dli_saddr</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">                <span class="n">free</span><span class="p">(</span><span class="n">demangled</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buf</span><span class="p">),</span> <span class="s">&#34;%-3d %*p %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                         <span class="n">i</span> <span class="o">-</span> <span class="n">skip</span><span class="p">,</span> <span class="kt">int</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span> <span class="n">callstack</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">symbols</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">+=</span> <span class="n">buf</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">free</span><span class="p">(</span><span class="n">symbols</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">num_frames</span> <span class="o">==</span> <span class="n">max_frames</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">=</span> <span class="s">&#34;[truncated]</span><span class="se">\n</span><span class="s">&#34;</span> <span class="o">+</span> <span class="n">result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">result</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;\n&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">prettify_stacktrace</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#else </span><span class="c1">// LOGURU_STACKTRACES
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Text</span> <span class="n">demangle</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="n">STRDUP</span><span class="p">(</span><span class="n">name</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">stacktrace_as_stdstring</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// No stacktraces available on this platform&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="s">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// LOGURU_STACKTRACES
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="n">Text</span> <span class="n">stacktrace</span><span class="p">(</span><span class="kt">int</span> <span class="n">skip</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">str</span> <span class="o">=</span> <span class="n">stacktrace_as_stdstring</span><span class="p">(</span><span class="n">skip</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="n">STRDUP</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">c_str</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">void</span> <span class="n">print_preamble_header</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">out_buff</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">out_buff_size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">out_buff_size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">out_buff</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">long</span> <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_date</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;date       &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_time</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// pos += snprintf(out_buff + pos, out_buff_size - pos, &#34;time         &#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;time            &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_uptime</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// pos += snprintf(out_buff + pos, out_buff_size - pos, &#34;( uptime  ) &#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;(  uptime  ) &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_thread</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//pos += snprintf(out_buff + pos, out_buff_size - pos, &#34;[%-*s]&#34;, LOGURU_THREADNAME_WIDTH, &#34; thread name/id&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;[%-*s]&#34;</span><span class="p">,</span> <span class="n">LOGURU_THREADNAME_WIDTH</span><span class="p">,</span> <span class="s">&#34; thread id &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_file</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;%*s:line  &#34;</span><span class="p">,</span> <span class="n">LOGURU_FILENAME_WIDTH</span><span class="p">,</span> <span class="s">&#34;file&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_verbose</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;   v&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_pipe</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;| &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">void</span> <span class="n">print_preamble</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">out_buff</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">out_buff_size</span><span class="p">,</span> <span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">out_buff_size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">out_buff</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">g_preamble</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="kt">long</span> <span class="kt">long</span> <span class="n">ms_since_epoch</span> <span class="o">=</span> <span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">microseconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">system_clock</span><span class="o">::</span><span class="n">now</span><span class="p">().</span><span class="n">time_since_epoch</span><span class="p">()).</span><span class="n">count</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">time_t</span> <span class="n">sec_since_epoch</span> <span class="o">=</span> <span class="n">time_t</span><span class="p">(</span><span class="n">ms_since_epoch</span> <span class="o">/</span> <span class="mi">1000000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">tm</span> <span class="n">time_info</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">localtime_r</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sec_since_epoch</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">time_info</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">uptime_ms</span> <span class="o">=</span> <span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">milliseconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">steady_clock</span><span class="o">::</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">s_start_time</span><span class="p">).</span><span class="n">count</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">uptime_sec</span> <span class="o">=</span> <span class="n">uptime_ms</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">char</span> <span class="n">thread_name</span><span class="p">[</span><span class="n">LOGURU_THREADNAME_WIDTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="n">get_thread_name</span><span class="p">(</span><span class="n">thread_name</span><span class="p">,</span> <span class="n">LOGURU_THREADNAME_WIDTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">s_strip_file_path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">file</span> <span class="o">=</span> <span class="n">filename</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">char</span> <span class="n">level_buff</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">custom_level_name</span> <span class="o">=</span> <span class="n">get_verbosity_name</span><span class="p">(</span><span class="n">verbosity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">custom_level_name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">snprintf</span><span class="p">(</span><span class="n">level_buff</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">level_buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;%s&#34;</span><span class="p">,</span> <span class="n">custom_level_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">snprintf</span><span class="p">(</span><span class="n">level_buff</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">level_buff</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;% 4d&#34;</span><span class="p">,</span> <span class="n">verbosity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">long</span> <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_date</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;%04d-%02d-%02d &#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                             <span class="mi">1900</span> <span class="o">+</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_year</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_mon</span><span class="p">,</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_mday</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_time</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;%02d:%02d:%02d.%06lld &#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                           <span class="n">time_info</span><span class="p">.</span><span class="n">tm_hour</span><span class="p">,</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_min</span><span class="p">,</span> <span class="n">time_info</span><span class="p">.</span><span class="n">tm_sec</span><span class="p">,</span> <span class="n">ms_since_epoch</span> <span class="o">%</span> <span class="mi">1000000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_uptime</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;(%9.3fs) &#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                           <span class="n">uptime_sec</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_thread</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;[%-*s]&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                           <span class="n">LOGURU_THREADNAME_WIDTH</span><span class="p">,</span> <span class="n">thread_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_file</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">char</span> <span class="n">shortened_filename</span><span class="p">[</span><span class="n">LOGURU_FILENAME_WIDTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="n">snprintf</span><span class="p">(</span><span class="n">shortened_filename</span><span class="p">,</span> <span class="n">LOGURU_FILENAME_WIDTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;%s&#34;</span><span class="p">,</span> <span class="n">file</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;%*s:%-5u &#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                           <span class="n">LOGURU_FILENAME_WIDTH</span><span class="p">,</span> <span class="n">shortened_filename</span><span class="p">,</span> <span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_verbose</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;%4s&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                           <span class="n">level_buff</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_preamble_pipe</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">out_buff_size</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">pos</span> <span class="o">+=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">out_buff</span> <span class="o">+</span> <span class="n">pos</span><span class="p">,</span> <span class="n">out_buff_size</span> <span class="o">-</span> <span class="n">pos</span><span class="p">,</span> <span class="s">&#34;| &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// stack_trace_skip is just if verbosity == FATAL.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">static</span> <span class="kt">void</span> <span class="n">log_message</span><span class="p">(</span><span class="kt">int</span> <span class="n">stack_trace_skip</span><span class="p">,</span> <span class="n">Message</span><span class="o">&amp;</span> <span class="n">message</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">with_indentation</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">abort_if_fatal</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">const</span> <span class="k">auto</span> <span class="n">verbosity</span> <span class="o">=</span> <span class="n">message</span><span class="p">.</span><span class="n">verbosity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">recursive_mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">s_mutex</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">verbosity</span> <span class="o">==</span> <span class="n">Verbosity_FATAL</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">auto</span> <span class="n">st</span> <span class="o">=</span> <span class="n">loguru</span><span class="o">::</span><span class="n">stacktrace</span><span class="p">(</span><span class="n">stack_trace_skip</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">st</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">RAW_LOG_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="s">&#34;Stack trace:</span><span class="se">\n</span><span class="s">&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">st</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">auto</span> <span class="n">ec</span> <span class="o">=</span> <span class="n">loguru</span><span class="o">::</span><span class="n">get_error_context</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">ec</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">RAW_LOG_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="s">&#34;&#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">ec</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">with_indentation</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">message</span><span class="p">.</span><span class="n">indentation</span> <span class="o">=</span> <span class="n">indentation</span><span class="p">(</span><span class="n">s_stderr_indentation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">verbosity</span> <span class="o">&lt;=</span> <span class="n">g_stderr_verbosity</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">g_colorlogtostderr</span> <span class="o">&amp;&amp;</span> <span class="n">s_terminal_has_color</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">verbosity</span> <span class="o">&gt;</span> <span class="n">Verbosity_WARNING</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&#34;%s%s%s%s%s%s%s%s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="n">terminal_reset</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                        <span class="n">terminal_dim</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                        <span class="n">message</span><span class="p">.</span><span class="n">preamble</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="n">message</span><span class="p">.</span><span class="n">indentation</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="n">verbosity</span> <span class="o">==</span> <span class="n">Verbosity_INFO</span> <span class="o">?</span> <span class="n">terminal_reset</span><span class="p">()</span> <span class="o">:</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="c1">// un-dim for info
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="n">message</span><span class="p">.</span><span class="n">prefix</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="n">message</span><span class="p">.</span><span class="n">message</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="n">terminal_reset</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&#34;%s%s%s%s%s%s%s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="n">terminal_reset</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                        <span class="n">verbosity</span> <span class="o">==</span> <span class="n">Verbosity_WARNING</span> <span class="o">?</span> <span class="n">terminal_yellow</span><span class="p">()</span> <span class="o">:</span> <span class="n">terminal_red</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                        <span class="n">message</span><span class="p">.</span><span class="n">preamble</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="n">message</span><span class="p">.</span><span class="n">indentation</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="n">message</span><span class="p">.</span><span class="n">prefix</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="n">message</span><span class="p">.</span><span class="n">message</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="n">terminal_reset</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&#34;%s%s%s%s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">message</span><span class="p">.</span><span class="n">preamble</span><span class="p">,</span> <span class="n">message</span><span class="p">.</span><span class="n">indentation</span><span class="p">,</span> <span class="n">message</span><span class="p">.</span><span class="n">prefix</span><span class="p">,</span> <span class="n">message</span><span class="p">.</span><span class="n">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">g_flush_interval_ms</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">fflush</span><span class="p">(</span><span class="n">stderr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">s_needs_flushing</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="nl">p</span> <span class="p">:</span> <span class="n">s_callbacks</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">verbosity</span> <span class="o">&lt;=</span> <span class="n">p</span><span class="p">.</span><span class="n">verbosity</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">with_indentation</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">message</span><span class="p">.</span><span class="n">indentation</span> <span class="o">=</span> <span class="n">indentation</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">indentation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="n">p</span><span class="p">.</span><span class="n">callback</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">user_data</span><span class="p">,</span> <span class="n">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">g_flush_interval_ms</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">flush</span><span class="p">)</span> <span class="p">{</span> <span class="n">p</span><span class="p">.</span><span class="n">flush</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">user_data</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">s_needs_flushing</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_flush_interval_ms</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">s_flush_thread</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">s_flush_thread</span> <span class="o">=</span> <span class="k">new</span> <span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="p">([](){</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="p">(;;)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="p">(</span><span class="n">s_needs_flushing</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">flush</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="n">g_flush_interval_ms</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">});</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">verbosity</span> <span class="o">==</span> <span class="n">Verbosity_FATAL</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">flush</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">s_fatal_handler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">s_fatal_handler</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">flush</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">abort_if_fatal</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_CATCH_SIGABRT &amp;&amp; !defined(_WIN32)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="c1">// Make sure we don&#39;t catch our own abort:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">signal</span><span class="p">(</span><span class="n">SIGABRT</span><span class="p">,</span> <span class="n">SIG_DFL</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="n">abort</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// stack_trace_skip is just if verbosity == FATAL.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="n">log_to_everywhere</span><span class="p">(</span><span class="kt">int</span> <span class="n">stack_trace_skip</span><span class="p">,</span> <span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                           <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                           <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">prefix</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">buff</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span> <span class="n">preamble_buff</span><span class="p">[</span><span class="n">LOGURU_PREAMBLE_WIDTH</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="n">print_preamble</span><span class="p">(</span><span class="n">preamble_buff</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">preamble_buff</span><span class="p">),</span> <span class="n">verbosity</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">{</span><span class="n">verbosity</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">preamble_buff</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">buff</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="n">log_message</span><span class="p">(</span><span class="n">stack_trace_skip</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="nb">true</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_USE_FMTLIB
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="kt">void</span> <span class="n">vlog</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">format_args</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">formatted</span> <span class="o">=</span> <span class="n">fmt</span><span class="o">::</span><span class="n">vformat</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">log_to_everywhere</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">verbosity</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">formatted</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">raw_vlog</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">format_args</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">formatted</span> <span class="o">=</span> <span class="n">fmt</span><span class="o">::</span><span class="n">vformat</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">{</span><span class="n">verbosity</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">formatted</span><span class="p">.</span><span class="n">c_str</span><span class="p">()};</span>
</span></span><span class="line"><span class="cl">        <span class="n">log_message</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="kt">void</span> <span class="n">log</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="p">...)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_list</span> <span class="n">vlist</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_start</span><span class="p">(</span><span class="n">vlist</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">buff</span> <span class="o">=</span> <span class="n">vtextprintf</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">log_to_everywhere</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">verbosity</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">buff</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_end</span><span class="p">(</span><span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">raw_log</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="p">...)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_list</span> <span class="n">vlist</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_start</span><span class="p">(</span><span class="n">vlist</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">buff</span> <span class="o">=</span> <span class="n">vtextprintf</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">{</span><span class="n">verbosity</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">buff</span><span class="p">.</span><span class="n">c_str</span><span class="p">()};</span>
</span></span><span class="line"><span class="cl">        <span class="n">log_message</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_end</span><span class="p">(</span><span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">flush</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">recursive_mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">s_mutex</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">fflush</span><span class="p">(</span><span class="n">stderr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">callback</span> <span class="p">:</span> <span class="n">s_callbacks</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">callback</span><span class="p">.</span><span class="n">flush</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">callback</span><span class="p">.</span><span class="n">flush</span><span class="p">(</span><span class="n">callback</span><span class="p">.</span><span class="n">user_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">s_needs_flushing</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">LogScopeRAII</span><span class="o">::</span><span class="n">LogScopeRAII</span><span class="p">(</span><span class="n">Verbosity</span> <span class="n">verbosity</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="p">...)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">_verbosity</span><span class="p">(</span><span class="n">verbosity</span><span class="p">),</span> <span class="n">_file</span><span class="p">(</span><span class="n">file</span><span class="p">),</span> <span class="n">_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">verbosity</span> <span class="o">&lt;=</span> <span class="n">current_verbosity_cutoff</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">recursive_mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">s_mutex</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">_indent_stderr</span> <span class="o">=</span> <span class="p">(</span><span class="n">verbosity</span> <span class="o">&lt;=</span> <span class="n">g_stderr_verbosity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">_start_time_ns</span> <span class="o">=</span> <span class="n">now_ns</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">va_list</span> <span class="n">vlist</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">va_start</span><span class="p">(</span><span class="n">vlist</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">vsnprintf</span><span class="p">(</span><span class="n">_name</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">_name</span><span class="p">),</span> <span class="n">format</span><span class="p">,</span> <span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">log_to_everywhere</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">_verbosity</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="s">&#34;{ &#34;</span><span class="p">,</span> <span class="n">_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">va_end</span><span class="p">(</span><span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">_indent_stderr</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="o">++</span><span class="n">s_stderr_indentation</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="nl">p</span> <span class="p">:</span> <span class="n">s_callbacks</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">verbosity</span> <span class="o">&lt;=</span> <span class="n">p</span><span class="p">.</span><span class="n">verbosity</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="o">++</span><span class="n">p</span><span class="p">.</span><span class="n">indentation</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">_file</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">LogScopeRAII</span><span class="o">::~</span><span class="n">LogScopeRAII</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">_file</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">recursive_mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">s_mutex</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">_indent_stderr</span> <span class="o">&amp;&amp;</span> <span class="n">s_stderr_indentation</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="o">--</span><span class="n">s_stderr_indentation</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="nl">p</span> <span class="p">:</span> <span class="n">s_callbacks</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// Note: Callback indentation cannot change!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="n">_verbosity</span> <span class="o">&lt;=</span> <span class="n">p</span><span class="p">.</span><span class="n">verbosity</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// in unlikely case this callback is new
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">indentation</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="o">--</span><span class="n">p</span><span class="p">.</span><span class="n">indentation</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_VERBOSE_SCOPE_ENDINGS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="k">auto</span> <span class="n">duration_sec</span> <span class="o">=</span> <span class="p">(</span><span class="n">now_ns</span><span class="p">()</span> <span class="o">-</span> <span class="n">_start_time_ns</span><span class="p">)</span> <span class="o">/</span> <span class="mf">1e9</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_USE_FMTLIB
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="k">auto</span> <span class="n">buff</span> <span class="o">=</span> <span class="n">textprintf</span><span class="p">(</span><span class="s">&#34;[{:.{}f} s]: {:s}&#34;</span><span class="p">,</span> <span class="n">duration_sec</span><span class="p">,</span> <span class="n">LOGURU_SCOPE_TIME_PRECISION</span><span class="p">,</span> <span class="n">_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="k">auto</span> <span class="n">buff</span> <span class="o">=</span> <span class="n">textprintf</span><span class="p">(</span><span class="s">&#34;[%.*f s]: %s&#34;</span><span class="p">,</span> <span class="n">LOGURU_SCOPE_TIME_PRECISION</span><span class="p">,</span> <span class="n">duration_sec</span><span class="p">,</span> <span class="n">_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="n">log_to_everywhere</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">_verbosity</span><span class="p">,</span> <span class="n">_file</span><span class="p">,</span> <span class="n">_line</span><span class="p">,</span> <span class="s">&#34;} &#34;</span><span class="p">,</span> <span class="n">buff</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>            <span class="n">log_to_everywhere</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">_verbosity</span><span class="p">,</span> <span class="n">_file</span><span class="p">,</span> <span class="n">_line</span><span class="p">,</span> <span class="s">&#34;}&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_USE_FMTLIB
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="kt">void</span> <span class="n">vlog_and_abort</span><span class="p">(</span><span class="kt">int</span> <span class="n">stack_trace_skip</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">expr</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">format_args</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">formatted</span> <span class="o">=</span> <span class="n">fmt</span><span class="o">::</span><span class="n">vformat</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">log_to_everywhere</span><span class="p">(</span><span class="n">stack_trace_skip</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Verbosity_FATAL</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">formatted</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">abort</span><span class="p">();</span> <span class="c1">// log_to_everywhere already does this, but this makes the analyzer happy.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="kt">void</span> <span class="n">log_and_abort</span><span class="p">(</span><span class="kt">int</span> <span class="n">stack_trace_skip</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">expr</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="p">...)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_list</span> <span class="n">vlist</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_start</span><span class="p">(</span><span class="n">vlist</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">buff</span> <span class="o">=</span> <span class="n">vtextprintf</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">log_to_everywhere</span><span class="p">(</span><span class="n">stack_trace_skip</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Verbosity_FATAL</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">buff</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_end</span><span class="p">(</span><span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">abort</span><span class="p">();</span> <span class="c1">// log_to_everywhere already does this, but this makes the analyzer happy.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">log_and_abort</span><span class="p">(</span><span class="kt">int</span> <span class="n">stack_trace_skip</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">expr</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">log_and_abort</span><span class="p">(</span><span class="n">stack_trace_skip</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="s">&#34; &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ----------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Streams:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_USE_FMTLIB
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">vstrprintf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="k">const</span> <span class="n">Args</span><span class="o">&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">text</span> <span class="o">=</span> <span class="n">textprintf</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">args</span><span class="p">...);</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">result</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">strprintf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="k">const</span> <span class="n">Args</span><span class="o">&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">vstrprintf</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">args</span><span class="p">...);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">vstrprintf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="n">va_list</span> <span class="n">vlist</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">text</span> <span class="o">=</span> <span class="n">vtextprintf</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">result</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">strprintf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">format</span><span class="p">,</span> <span class="p">...)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_list</span> <span class="n">vlist</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_start</span><span class="p">(</span><span class="n">vlist</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">vstrprintf</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">va_end</span><span class="p">(</span><span class="n">vlist</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="cp">#if LOGURU_WITH_STREAMS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="n">StreamLogger</span><span class="o">::~</span><span class="n">StreamLogger</span><span class="p">()</span> <span class="k">noexcept</span><span class="p">(</span><span class="nb">false</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">message</span> <span class="o">=</span> <span class="n">_ss</span><span class="p">.</span><span class="n">str</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">log</span><span class="p">(</span><span class="n">_verbosity</span><span class="p">,</span> <span class="n">_file</span><span class="p">,</span> <span class="n">_line</span><span class="p">,</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">message</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">AbortLogger</span><span class="o">::~</span><span class="n">AbortLogger</span><span class="p">()</span> <span class="k">noexcept</span><span class="p">(</span><span class="nb">false</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">message</span> <span class="o">=</span> <span class="n">_ss</span><span class="p">.</span><span class="n">str</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">loguru</span><span class="o">::</span><span class="n">log_and_abort</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">_expr</span><span class="p">,</span> <span class="n">_file</span><span class="p">,</span> <span class="n">_line</span><span class="p">,</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">message</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cp">#endif </span><span class="c1">// LOGURU_WITH_STREAMS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ----------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 888888 88&#34;&#34;Yb 88&#34;&#34;Yb  dP&#34;Yb  88&#34;&#34;Yb      dP&#34;&#34;b8  dP&#34;Yb  88b 88 888888 888888 Yb  dP 888888
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 88__   88__dP 88__dP dP   Yb 88__dP     dP   `&#34; dP   Yb 88Yb88   88   88__    YbdP    88
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 88&#34;&#34;   88&#34;Yb  88&#34;Yb  Yb   dP 88&#34;Yb      Yb      Yb   dP 88 Y88   88   88&#34;&#34;    dPYb    88
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 888888 88  Yb 88  Yb  YbodP  88  Yb      YboodP  YbodP  88  Y8   88   888888 dP  Yb   88
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ----------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">StringStream</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">str</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Use this in your EcPrinter implementations.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="n">stream_print</span><span class="p">(</span><span class="n">StringStream</span><span class="o">&amp;</span> <span class="n">out_string_stream</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">text</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">out_string_stream</span><span class="p">.</span><span class="n">str</span> <span class="o">+=</span> <span class="n">text</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ----------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">ECPtr</span> <span class="o">=</span> <span class="n">EcEntryBase</span><span class="o">*</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#if defined(_WIN32) || (defined(__APPLE__) &amp;&amp; !TARGET_OS_IPHONE)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#ifdef __APPLE__
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="cp">#define LOGURU_THREAD_LOCAL __thread
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="cp">#define LOGURU_THREAD_LOCAL thread_local
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="k">static</span> <span class="n">LOGURU_THREAD_LOCAL</span> <span class="n">ECPtr</span> <span class="n">thread_ec_ptr</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ECPtr</span><span class="o">&amp;</span> <span class="n">get_thread_ec_head_ref</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">thread_ec_ptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else </span><span class="c1">// !thread_local
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">static</span> <span class="n">pthread_once_t</span> <span class="n">s_ec_pthread_once</span> <span class="o">=</span> <span class="n">PTHREAD_ONCE_INIT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">pthread_key_t</span>  <span class="n">s_ec_pthread_key</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">free_ec_head_ref</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">io_error_context</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">delete</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">ECPtr</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">io_error_context</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">ec_make_pthread_key</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">pthread_key_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s_ec_pthread_key</span><span class="p">,</span> <span class="n">free_ec_head_ref</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ECPtr</span><span class="o">&amp;</span> <span class="n">get_thread_ec_head_ref</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">pthread_once</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s_ec_pthread_once</span><span class="p">,</span> <span class="n">ec_make_pthread_key</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">ec</span> <span class="o">=</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">ECPtr</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">pthread_getspecific</span><span class="p">(</span><span class="n">s_ec_pthread_key</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">ec</span> <span class="o">==</span> <span class="k">nullptr</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">ec</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ECPtr</span><span class="p">(</span><span class="k">nullptr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">pthread_setspecific</span><span class="p">(</span><span class="n">s_ec_pthread_key</span><span class="p">,</span> <span class="n">ec</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">*</span><span class="n">ec</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// !thread_local
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ----------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="n">EcHandle</span> <span class="n">get_thread_ec_handle</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">get_thread_ec_head_ref</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Text</span> <span class="n">get_error_context</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">get_error_context_for</span><span class="p">(</span><span class="n">get_thread_ec_head_ref</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Text</span> <span class="n">get_error_context_for</span><span class="p">(</span><span class="k">const</span> <span class="n">EcEntryBase</span><span class="o">*</span> <span class="n">ec_head</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">EcEntryBase</span><span class="o">*&gt;</span> <span class="n">stack</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="p">(</span><span class="n">ec_head</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">stack</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">ec_head</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">ec_head</span> <span class="o">=</span> <span class="n">ec_head</span><span class="o">-&gt;</span><span class="n">_previous</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">stack</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">stack</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">StringStream</span> <span class="n">result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">stack</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span><span class="p">.</span><span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;------------------------------------------------</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">entry</span> <span class="p">:</span> <span class="n">stack</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">const</span> <span class="k">auto</span> <span class="n">description</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">_descr</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#34;:&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_USE_FMTLIB
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="k">auto</span> <span class="n">prefix</span> <span class="o">=</span> <span class="n">textprintf</span><span class="p">(</span><span class="s">&#34;[ErrorContext] {.{}s}:{:-5u} {:-20s} &#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">filename</span><span class="p">(</span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">_file</span><span class="p">),</span> <span class="n">LOGURU_FILENAME_WIDTH</span><span class="p">,</span> <span class="n">entry</span><span class="o">-&gt;</span><span class="n">_line</span><span class="p">,</span> <span class="n">description</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="k">auto</span> <span class="n">prefix</span> <span class="o">=</span> <span class="n">textprintf</span><span class="p">(</span><span class="s">&#34;[ErrorContext] %*s:%-5u %-20s &#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">LOGURU_FILENAME_WIDTH</span><span class="p">,</span> <span class="n">filename</span><span class="p">(</span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">_file</span><span class="p">),</span> <span class="n">entry</span><span class="o">-&gt;</span><span class="n">_line</span><span class="p">,</span> <span class="n">description</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>                <span class="n">result</span><span class="p">.</span><span class="n">str</span> <span class="o">+=</span> <span class="n">prefix</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="n">entry</span><span class="o">-&gt;</span><span class="n">print_value</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">result</span><span class="p">.</span><span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span><span class="p">.</span><span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;------------------------------------------------&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="n">STRDUP</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">str</span><span class="p">.</span><span class="n">c_str</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">EcEntryBase</span><span class="o">::</span><span class="n">EcEntryBase</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">descr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">_file</span><span class="p">(</span><span class="n">file</span><span class="p">),</span> <span class="n">_line</span><span class="p">(</span><span class="n">line</span><span class="p">),</span> <span class="n">_descr</span><span class="p">(</span><span class="n">descr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">EcEntryBase</span><span class="o">*&amp;</span> <span class="n">ec_head</span> <span class="o">=</span> <span class="n">get_thread_ec_head_ref</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">_previous</span> <span class="o">=</span> <span class="n">ec_head</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">ec_head</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">EcEntryBase</span><span class="o">::~</span><span class="n">EcEntryBase</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">get_thread_ec_head_ref</span><span class="p">()</span> <span class="o">=</span> <span class="n">_previous</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="n">Text</span> <span class="n">ec_to_text</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Add quotes around the string to make it obvious where it begin and ends.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// This is great for detecting erroneous leading or trailing spaces in e.g. an identifier.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">auto</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&#34;</span><span class="se">\&#34;</span><span class="s">&#34;</span> <span class="o">+</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#34;</span><span class="se">\&#34;</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Text</span><span class="p">{</span><span class="n">STRDUP</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">c_str</span><span class="p">())};</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Text</span> <span class="n">ec_to_text</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Add quotes around the character to make it obvious where it begin and ends.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&#34;&#39;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">write_hex_digit</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="kt">unsigned</span> <span class="n">num</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="o">&lt;</span> <span class="mi">10u</span><span class="p">)</span> <span class="p">{</span> <span class="n">str</span> <span class="o">+=</span> <span class="kt">char</span><span class="p">(</span><span class="sc">&#39;0&#39;</span> <span class="o">+</span> <span class="n">num</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span>           <span class="p">{</span> <span class="n">str</span> <span class="o">+=</span> <span class="kt">char</span><span class="p">(</span><span class="sc">&#39;a&#39;</span> <span class="o">+</span> <span class="n">num</span> <span class="o">-</span> <span class="mi">10</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">write_hex_16</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="kt">uint16_t</span> <span class="n">n</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">write_hex_digit</span><span class="p">((</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">12u</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">write_hex_digit</span><span class="p">((</span><span class="n">n</span> <span class="o">&gt;&gt;</span>  <span class="mi">8u</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">write_hex_digit</span><span class="p">((</span><span class="n">n</span> <span class="o">&gt;&gt;</span>  <span class="mi">4u</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">write_hex_digit</span><span class="p">((</span><span class="n">n</span> <span class="o">&gt;&gt;</span>  <span class="mi">0u</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span>      <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\\&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\\\</span><span class="s">&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\&#34;&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\\&#34;</span><span class="s">&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\&#39;&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\\&#39;</span><span class="s">&#34;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">0&#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\b&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">b&#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\f&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">f&#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\n&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">n&#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\r&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">r&#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\t&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">t&#34;</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">c</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="mh">0x20</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;</span><span class="se">\\</span><span class="s">u&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">write_hex_16</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint16_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">c</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="n">str</span> <span class="o">+=</span> <span class="n">c</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">str</span> <span class="o">+=</span> <span class="s">&#34;&#39;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Text</span><span class="p">{</span><span class="n">STRDUP</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">c_str</span><span class="p">())};</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cp">#define DEFINE_EC(Type)                        \
</span></span></span><span class="line"><span class="cl"><span class="cp">        Text ec_to_text(Type value)                \
</span></span></span><span class="line"><span class="cl"><span class="cp">        {                                          \
</span></span></span><span class="line"><span class="cl"><span class="cp">            auto str = std::to_string(value);      \
</span></span></span><span class="line"><span class="cl"><span class="cp">            return Text{STRDUP(str.c_str())};      \
</span></span></span><span class="line"><span class="cl"><span class="cp">        }
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="n">DEFINE_EC</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">DEFINE_EC</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">DEFINE_EC</span><span class="p">(</span><span class="kt">long</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">DEFINE_EC</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">DEFINE_EC</span><span class="p">(</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">DEFINE_EC</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">DEFINE_EC</span><span class="p">(</span><span class="kt">float</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">DEFINE_EC</span><span class="p">(</span><span class="kt">double</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">DEFINE_EC</span><span class="p">(</span><span class="kt">long</span> <span class="kt">double</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cp">#undef DEFINE_EC
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">    <span class="n">Text</span> <span class="n">ec_to_text</span><span class="p">(</span><span class="n">EcHandle</span> <span class="n">ec_handle</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Text</span> <span class="n">parent_ec</span> <span class="o">=</span> <span class="n">get_error_context_for</span><span class="p">(</span><span class="n">ec_handle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">size_t</span> <span class="n">buffer_size</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">parent_ec</span><span class="p">.</span><span class="n">c_str</span><span class="p">())</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span><span class="o">*</span> <span class="n">with_newline</span> <span class="o">=</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">malloc</span><span class="p">(</span><span class="n">buffer_size</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">with_newline</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="n">strncpy_s</span><span class="p">(</span><span class="n">with_newline</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">buffer_size</span><span class="p">,</span> <span class="n">parent_ec</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span> <span class="n">buffer_size</span> <span class="o">-</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="n">strcpy</span><span class="p">(</span><span class="n">with_newline</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">parent_ec</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="n">with_newline</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ----------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace loguru
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ----------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1">// .dP&#34;Y8 88  dP&#34;&#34;b8 88b 88    db    88     .dP&#34;Y8
</span></span></span><span class="line"><span class="cl"><span class="c1">// `Ybo.&#34; 88 dP   `&#34; 88Yb88   dPYb   88     `Ybo.&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1">// o.`Y8b 88 Yb  &#34;88 88 Y88  dP__Yb  88  .o o.`Y8b
</span></span></span><span class="line"><span class="cl"><span class="c1">// 8bodP&#39; 88  YboodP 88  Y8 dP&#34;&#34;&#34;&#34;Yb 88ood8 8bodP&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1">// ----------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">namespace</span> <span class="n">loguru</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">install_signal_handlers</span><span class="p">(</span><span class="kt">bool</span> <span class="n">unsafe_signal_handler</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">unsafe_signal_handler</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// TODO: implement signal handlers on windows
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace loguru
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#else </span><span class="c1">// _WIN32
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">loguru</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">Signal</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span>         <span class="n">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="n">Signal</span> <span class="n">ALL_SIGNALS</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="cp">#if LOGURU_CATCH_SIGABRT
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="p">{</span> <span class="n">SIGABRT</span><span class="p">,</span> <span class="s">&#34;SIGABRT&#34;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>        <span class="p">{</span> <span class="n">SIGBUS</span><span class="p">,</span>  <span class="s">&#34;SIGBUS&#34;</span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="n">SIGFPE</span><span class="p">,</span>  <span class="s">&#34;SIGFPE&#34;</span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="n">SIGILL</span><span class="p">,</span>  <span class="s">&#34;SIGILL&#34;</span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="n">SIGINT</span><span class="p">,</span>  <span class="s">&#34;SIGINT&#34;</span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="n">SIGSEGV</span><span class="p">,</span> <span class="s">&#34;SIGSEGV&#34;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="n">SIGTERM</span><span class="p">,</span> <span class="s">&#34;SIGTERM&#34;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">write_to_stderr</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">write</span><span class="p">(</span><span class="n">STDERR_FILENO</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">result</span><span class="p">;</span> <span class="c1">// Ignore errors.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">write_to_stderr</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">write_to_stderr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">data</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">call_default_signal_handler</span><span class="p">(</span><span class="kt">int</span> <span class="n">signal_number</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">struct</span> <span class="nc">sigaction</span> <span class="n">sig_action</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sig_action</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">sig_action</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">sigemptyset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sig_action</span><span class="p">.</span><span class="n">sa_mask</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">sig_action</span><span class="p">.</span><span class="n">sa_handler</span> <span class="o">=</span> <span class="n">SIG_DFL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">sigaction</span><span class="p">(</span><span class="n">signal_number</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sig_action</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">kill</span><span class="p">(</span><span class="n">getpid</span><span class="p">(),</span> <span class="n">signal_number</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">bool</span> <span class="n">s_unsafe_signal_handler</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">signal_handler</span><span class="p">(</span><span class="kt">int</span> <span class="n">signal_number</span><span class="p">,</span> <span class="n">siginfo_t</span><span class="o">*</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">signal_name</span> <span class="o">=</span> <span class="s">&#34;UNKNOWN SIGNAL&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">s</span> <span class="p">:</span> <span class="n">ALL_SIGNALS</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">number</span> <span class="o">==</span> <span class="n">signal_number</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">signal_name</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// --------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="cm">/* There are few things that are safe to do in a signal handler,
</span></span></span><span class="line"><span class="cl"><span class="cm">           but writing to stderr is one of them.
</span></span></span><span class="line"><span class="cl"><span class="cm">           So we first print out what happened to stderr so we&#39;re sure that gets out,
</span></span></span><span class="line"><span class="cl"><span class="cm">           then we do the unsafe things, like logging the stack trace.
</span></span></span><span class="line"><span class="cl"><span class="cm">        */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_colorlogtostderr</span> <span class="o">&amp;&amp;</span> <span class="n">s_terminal_has_color</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">write_to_stderr</span><span class="p">(</span><span class="n">terminal_reset</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">            <span class="n">write_to_stderr</span><span class="p">(</span><span class="n">terminal_bold</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">            <span class="n">write_to_stderr</span><span class="p">(</span><span class="n">terminal_light_red</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">write_to_stderr</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">write_to_stderr</span><span class="p">(</span><span class="s">&#34;Loguru caught a signal: &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">write_to_stderr</span><span class="p">(</span><span class="n">signal_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">write_to_stderr</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">g_colorlogtostderr</span> <span class="o">&amp;&amp;</span> <span class="n">s_terminal_has_color</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">write_to_stderr</span><span class="p">(</span><span class="n">terminal_reset</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// --------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">s_unsafe_signal_handler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// --------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="cm">/* Now we do unsafe things. This can for example lead to deadlocks if
</span></span></span><span class="line"><span class="cl"><span class="cm">               the signal was triggered from the system&#39;s memory management functions
</span></span></span><span class="line"><span class="cl"><span class="cm">               and the code below tries to do allocations.
</span></span></span><span class="line"><span class="cl"><span class="cm">            */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">flush</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="kt">char</span> <span class="n">preamble_buff</span><span class="p">[</span><span class="n">LOGURU_PREAMBLE_WIDTH</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="n">print_preamble</span><span class="p">(</span><span class="n">preamble_buff</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">preamble_buff</span><span class="p">),</span> <span class="n">Verbosity_FATAL</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">auto</span> <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">{</span><span class="n">Verbosity_FATAL</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">preamble_buff</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;Signal: &#34;</span><span class="p">,</span> <span class="n">signal_name</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">log_message</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">catch</span> <span class="p">(...)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// This can happed due to s_fatal_handler.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">write_to_stderr</span><span class="p">(</span><span class="s">&#34;Exception caught and ignored by Loguru signal handler.</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">flush</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">// --------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">call_default_signal_handler</span><span class="p">(</span><span class="n">signal_number</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">install_signal_handlers</span><span class="p">(</span><span class="kt">bool</span> <span class="n">unsafe_signal_handler</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">s_unsafe_signal_handler</span> <span class="o">=</span> <span class="n">unsafe_signal_handler</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">struct</span> <span class="nc">sigaction</span> <span class="n">sig_action</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sig_action</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">sig_action</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">sigemptyset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sig_action</span><span class="p">.</span><span class="n">sa_mask</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">sig_action</span><span class="p">.</span><span class="n">sa_flags</span> <span class="o">|=</span> <span class="n">SA_SIGINFO</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">sig_action</span><span class="p">.</span><span class="n">sa_sigaction</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">signal_handler</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">s</span> <span class="p">:</span> <span class="n">ALL_SIGNALS</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">CHECK_F</span><span class="p">(</span><span class="n">sigaction</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">number</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sig_action</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s">&#34;Failed to install handler for &#34;</span> <span class="n">LOGURU_FMT</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace loguru
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// _WIN32
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifdef _WIN32
</span></span></span><span class="line"><span class="cl"><span class="cp">#ifdef _MSC_VER
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma warning(pop)
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// _MSC_VER
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#endif </span><span class="c1">// _WIN32
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// LOGURU_IMPLEMENTATION
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="cmakeliststxt" class="heading-element">
  <a href="#cmakeliststxt" class="heading-mark"></a><code>CMakeLists.txt</code></h2><div class="highlight" id="id-13"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cmake" data-lang="cmake"><span class="line"><span class="cl"><span class="nb">project</span><span class="p">(</span><span class="s">loguru</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">3.10</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_FLAGS</span> <span class="s2">&#34;${CMAKE_CXX_FLAGS} -o3&#34;</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">set</span><span class="p">(</span><span class="s">LIBRARY_OUTPUT_PATH</span> <span class="o">${</span><span class="nv">CMAKE_SOURCE_DIR</span><span class="o">}</span><span class="s">/</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">add_library</span><span class="p">(</span><span class="s">loguru</span> <span class="s">STATIC</span> <span class="s">loguru.cpp</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">loguru</span> <span class="s">fmt</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="demo" class="heading-element">
  <a href="#demo" class="heading-mark"></a>demo</h2><div class="highlight" id="id-14"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">├── build
</span></span><span class="line"><span class="cl">├── CMakeLists.txt
</span></span><span class="line"><span class="cl">└── main.cpp
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">1</span> directory, <span class="m">2</span> files</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="maincpp" class="heading-element">
  <a href="#maincpp" class="heading-mark"></a><code>main.cpp</code></h3><div class="highlight" id="id-15"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;thread&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LOGURU_USE_FMTLIB 1
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;loguru.hpp&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">sleep_ms</span><span class="p">(</span><span class="kt">int</span> <span class="n">ms</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">VLOG_F</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#34;Sleeping for %d ms&#34;</span><span class="p">,</span> <span class="n">ms</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="n">ms</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">foo</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOG_SCOPE_F</span><span class="p">(</span><span class="n">INFO</span><span class="p">,</span> <span class="s">&#34;foo&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOG_F</span><span class="p">(</span><span class="n">INFO</span><span class="p">,</span> <span class="s">&#34;%d&#34;</span><span class="p">,</span>  <span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOG_F</span><span class="p">(</span><span class="n">INFO</span><span class="p">,</span> <span class="s">&#34;foo for loop&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">complex_calculation</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOG_SCOPE_F</span><span class="p">(</span><span class="n">INFO</span><span class="p">,</span> <span class="s">&#34;complex_calculation&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOG_F</span><span class="p">(</span><span class="n">INFO</span><span class="p">,</span> <span class="s">&#34;Starting time machine...&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">sleep_ms</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOG_F</span><span class="p">(</span><span class="n">WARNING</span><span class="p">,</span> <span class="s">&#34;The flux capacitor is not getting enough power!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">sleep_ms</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LOG_F</span><span class="p">(</span><span class="n">INFO</span><span class="p">,</span> <span class="s">&#34;Lighting strike!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">VLOG_F</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#34;Found 1.21 gigawatts...&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">sleep_ms</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="p">([](){</span>
</span></span><span class="line"><span class="cl">		<span class="n">loguru</span><span class="o">::</span><span class="n">set_thread_name</span><span class="p">(</span><span class="s">&#34;complex_calculation&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">LOG_F</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span> <span class="s">&#34;We ended up in 1985!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}).</span><span class="n">join</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">loguru</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">loguru</span><span class="o">::</span><span class="n">add_file</span><span class="p">(</span><span class="s">&#34;everything.log&#34;</span><span class="p">,</span> <span class="n">loguru</span><span class="o">::</span><span class="n">Append</span><span class="p">,</span> <span class="n">loguru</span><span class="o">::</span><span class="n">Verbosity_MAX</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">LOG_F</span><span class="p">(</span><span class="n">INFO</span><span class="p">,</span> <span class="s">&#34;Hello from main.cpp!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">complex_calculation</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="s">&#34;hello&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">LOG_F</span><span class="p">(</span><span class="n">INFO</span><span class="p">,</span> <span class="s">&#34;{}&#34;</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// foo();
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="cmakeliststxt-1" class="heading-element">
  <a href="#cmakeliststxt-1" class="heading-mark"></a><code>CMakeLists.txt</code></h3><div class="highlight" id="id-16"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cmake" data-lang="cmake"><span class="line"><span class="cl"><span class="nb">project</span><span class="p">(</span><span class="s">demo</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">3.10</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span> <span class="s">17</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_FLAGS</span> <span class="s2">&#34;${CMAKE_CXX_FLAGS} -lpthread -ldl -lrt&#34;</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">include_directories</span><span class="p">(</span><span class="s">../</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">link_directories</span><span class="p">(</span><span class="s">../</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">add_executable</span><span class="p">(</span><span class="s">demo</span> <span class="s">./main.cpp</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">demo</span> <span class="s">loguru</span> <span class="s">fmt</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div></div><h2 id="see-also">相关内容</h2>
    <ul><li>
          <a href="/archives/2019-12-17-cmake-%E8%A6%81%E7%82%B9%E6%80%BB%E7%BB%93/" title="cmake 要点总结">cmake 要点总结</a></li><li>
          <a href="/archives/2019-12-04-clion-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/" title="Clion 远程调试">Clion 远程调试</a></li><li>
          <a href="/archives/2019-03-24-makefile-%E5%B0%86%E6%89%80%E6%9C%89%E7%9B%AE%E5%BD%95%E4%B8%AD%E7%9A%84%E6%BA%90%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E6%88%90%E7%8B%AC%E7%AB%8B%E7%A8%8B%E5%BA%8F/" title="makefile 将所有目录中的源文件编译成独立程序">makefile 将所有目录中的源文件编译成独立程序</a></li><li>
          <a href="/archives/2019-02-20-sublimegdb--%E6%9B%B4%E5%A5%BD%E7%94%A8%E7%9A%84%E8%BD%BB%E9%87%8F%E7%BA%A7-debugger/" title="SublimeGDB: 更好用的轻量级 Debugger">SublimeGDB: 更好用的轻量级 Debugger</a></li><li>
          <a href="/archives/2020-03-21-macos-%E6%97%A0%E6%B3%95%E8%AF%BB%E5%8F%96%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E6%96%87%E4%BB%B6_%E6%96%87%E4%BB%B6%E7%81%B0%E8%89%B2_%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80_/" title="MacOS 无法读取移动硬盘文件(文件灰色,无法打开)">MacOS 无法读取移动硬盘文件(文件灰色,无法打开)</a></li></ul><div class="post-reward">
    <div class="comment"></div>
    <input type="checkbox" class="reward-input" name="reward" id="fi-reward" hidden />
    <label class="reward-button" for="fi-reward">赞赏</label>
    <div class="reward-ways" data-mode="static"><div><img loading="lazy" src="/images/reward/alipay.png" alt="william 支付宝" data-title="william 支付宝" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/><span data-animation>支付宝</span>
          </div><div><img loading="lazy" src="/images/reward/wechat.png" alt="william 微信" data-title="william 微信" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/><span data-animation>微信</span>
          </div></div>
  </div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="更新于 2020-03-23 00:00:00">更新于 2020-03-23&nbsp;</span>
      </div><div class="post-info-license">
            <span><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a></span>
          </div></div><div class="post-info-line">
        <div class="post-info-md"><span><a href="/archives/2020-03-23-c&#43;&#43;%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97-loguru/index.md" title="阅读原始文档" class="link-to-markdown">阅读原始文档</a></span></div>
        <div class="post-info-share">
          <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://williamlfang.github.io/archives/2020-03-23-c&#43;&#43;%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97-loguru/" data-title="C&#43;&#43;日志模块:loguru" data-hashtags="c&#43;&#43;,log,loguru,日志"><i class="fa-brands fa-twitter fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://williamlfang.github.io/archives/2020-03-23-c&#43;&#43;%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97-loguru/" data-hashtag="c&#43;&#43;"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 WhatsApp" data-sharer="whatsapp" data-url="https://williamlfang.github.io/archives/2020-03-23-c&#43;&#43;%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97-loguru/" data-title="C&#43;&#43;日志模块:loguru" data-web><i class="fa-brands fa-whatsapp fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Reddit" data-sharer="reddit" data-url="https://williamlfang.github.io/archives/2020-03-23-c&#43;&#43;%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97-loguru/"><i class="fa-brands fa-reddit fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://williamlfang.github.io/archives/2020-03-23-c&#43;&#43;%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97-loguru/" data-title="C&#43;&#43;日志模块:loguru"><i class="fa-brands fa-weibo fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Evernote" data-sharer="evernote" data-url="https://williamlfang.github.io/archives/2020-03-23-c&#43;&#43;%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97-loguru/" data-title="C&#43;&#43;日志模块:loguru"><i class="fa-brands fa-evernote fa-fw" aria-hidden="true"></i></a>
  </span>
        </div>
      </div></div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href="/tags/c&#43;&#43;/" class="post-tag" title="标签 - C&#43;&#43;">C&#43;&#43;</a><a href="/tags/log/" class="post-tag" title="标签 - Log">Log</a><a href="/tags/loguru/" class="post-tag" title="标签 - Loguru">Loguru</a><a href="/tags/%E6%97%A5%E5%BF%97/" class="post-tag" title="标签 - 日志">日志</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/archives/2020-03-21-macos-%E6%97%A0%E6%B3%95%E8%AF%BB%E5%8F%96%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E6%96%87%E4%BB%B6_%E6%96%87%E4%BB%B6%E7%81%B0%E8%89%B2_%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80_/" class="post-nav-item" rel="prev" title="MacOS 无法读取移动硬盘文件(文件灰色,无法打开)"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>MacOS 无法读取移动硬盘文件(文件灰色,无法打开)</a>
      <a href="/archives/2020-04-08-zsh-%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8-vim-%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8--_arguments-451--_vim_files--function-definition-file-not-found/" class="post-nav-item" rel="next" title="zsh 无法使用 vim 自动补全: _arguments:451: _vim_files: function definition file not found">zsh 无法使用 vim 自动补全: _arguments:451: _vim_files: function definition file not found<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="giscus">
          <script
            src="https://giscus.app/client.js"
            data-repo="williamlfang/williamlfang.github.io"
            data-repo-id="R_kgDOLj_4ng"
            data-category="Announcements"
            data-category-id="DIC_kwDOLj_4ns4CeKG0"
            data-mapping="pathname"
            data-strict="0"
            
            data-theme="preferred_color_scheme"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="bottom"
            data-lang="zh-CN"
            data-loading="lazy"
            crossorigin="anonymous"
            async
            defer
          ></script>
        </div>
        <noscript>
          Please enable JavaScript to view the comments powered by <a href="https://giscus.app/" rel="external nofollow noopener noreferrer">giscus</a>.
        </noscript></div></article>

  <aside class="toc" id="toc-auto" aria-label="目录"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.123.8"><img class="hugo-icon" src="/images/hugo.min.svg" alt="Hugo logo" /> Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.3.2"><img class="fixit-icon" src="/images/fixit.min.svg" alt="FixIt logo" /> FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2013 - 2025</span><span class="author" itemprop="copyrightHolder">
              <a href="/">william</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a></span></div><div class="footer-line statistics"></div><div class="footer-line visitor">
          <span id="busuanzi_container_site_uv" title='总访客数'><i class="fa-regular fa-user fa-fw" aria-hidden="true"></i>&nbsp;<span id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span></span><span id="busuanzi_container_site_pv" class="footer-divider" title='总访问量'><i class="fa-regular fa-eye fa-fw" aria-hidden="true"></i>&nbsp;<span id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span></span>
        </div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric">0%</span>
        </div><div class="fixed-button view-comments d-none" role="button" aria-label="查看评论"><i class="fa-solid fa-comment fa-fw" aria-hidden="true"></i></div></div><div id="mask"></div><div class="reading-progress-bar" style="left: 0;top: 0;"></div><noscript>
    <div class="noscript-warning">FixIt 主题在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/lightgallery/css/lightgallery-bundle.min.css"><link rel="preload" href="/lib/katex/katex.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/katex/katex.min.css"></noscript><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><link rel="stylesheet" href="/lib/pace/themes/blue/pace-theme-minimal.css"><script src="/lib/autocomplete/autocomplete.min.js" defer></script><script src="/lib/fuse/fuse.min.js" defer></script><script src="/lib/twemoji/twemoji.min.js" defer></script><script src="/lib/lightgallery/lightgallery.min.js" defer></script><script src="/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js" defer></script><script src="/lib/lightgallery/plugins/zoom/lg-zoom.min.js" defer></script><script src="/lib/sharer/sharer.min.js" async defer></script><script src="/lib/katex/katex.min.js" defer></script><script src="/lib/katex/auto-render.min.js" defer></script><script src="/lib/katex/mhchem.min.js" defer></script><script src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async defer></script><script src="/lib/pace/pace.min.js" async defer></script><script>window.config={"autoBookmark":true,"code":{"copyTitle":"复制到剪贴板","editLockTitle":"锁定可编辑代码块","editUnLockTitle":"解锁可编辑代码块","editable":true,"maxShownLines":25},"comment":{"enable":true,"expired":false,"giscus":{"darkTheme":"dark","lightTheme":"light"}},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验。"},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"enablePWA":true,"lightgallery":true,"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":false,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"没有找到结果","snippetLength":50,"threshold":0.3,"type":"fuse","useExtendedSearch":false},"twemoji":true};</script><script src="/js/theme.min.js" defer></script></body>
</html>
